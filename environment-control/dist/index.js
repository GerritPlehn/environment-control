import{createRequire as W2}from"node:module";var $2=Object.create;var{getPrototypeOf:G2,defineProperty:v6,getOwnPropertyNames:H2}=Object;var q2=Object.prototype.hasOwnProperty;var K2=(Q,J,X)=>{X=Q!=null?$2(G2(Q)):{};let Y=J||!Q||!Q.__esModule?v6(X,"default",{value:Q,enumerable:!0}):X;for(let $ of H2(Q))if(!q2.call(Y,$))v6(Y,$,{get:()=>Q[$],enumerable:!0});return Y};var D=(Q,J)=>()=>(J||Q((J={exports:{}}).exports,J),J.exports);var y=W2(import.meta.url);var f6=D((g6)=>{Object.defineProperty(g6,"__esModule",{value:!0});class y6{constructor(Q){this.aliasToTopic={},this.max=Q}put(Q,J){if(J===0||J>this.max)return!1;return this.aliasToTopic[J]=Q,this.length=Object.keys(this.aliasToTopic).length,!0}getTopicByAlias(Q){return this.aliasToTopic[Q]}clear(){this.aliasToTopic={}}}g6.default=y6});var q0=D((WR,b6)=>{class k6 extends Error{constructor(Q){if(!Array.isArray(Q))throw new TypeError(`Expected input to be an Array, got ${typeof Q}`);let J="";for(let X=0;X<Q.length;X++)J+=`    ${Q[X].stack}
`;super(J);this.name="AggregateError",this.errors=Q}}b6.exports={AggregateError:k6,ArrayIsArray(Q){return Array.isArray(Q)},ArrayPrototypeIncludes(Q,J){return Q.includes(J)},ArrayPrototypeIndexOf(Q,J){return Q.indexOf(J)},ArrayPrototypeJoin(Q,J){return Q.join(J)},ArrayPrototypeMap(Q,J){return Q.map(J)},ArrayPrototypePop(Q,J){return Q.pop(J)},ArrayPrototypePush(Q,J){return Q.push(J)},ArrayPrototypeSlice(Q,J,X){return Q.slice(J,X)},Error,FunctionPrototypeCall(Q,J,...X){return Q.call(J,...X)},FunctionPrototypeSymbolHasInstance(Q,J){return Function.prototype[Symbol.hasInstance].call(Q,J)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(Q,J){return Object.defineProperties(Q,J)},ObjectDefineProperty(Q,J,X){return Object.defineProperty(Q,J,X)},ObjectGetOwnPropertyDescriptor(Q,J){return Object.getOwnPropertyDescriptor(Q,J)},ObjectKeys(Q){return Object.keys(Q)},ObjectSetPrototypeOf(Q,J){return Object.setPrototypeOf(Q,J)},Promise,PromisePrototypeCatch(Q,J){return Q.catch(J)},PromisePrototypeThen(Q,J,X){return Q.then(J,X)},PromiseReject(Q){return Promise.reject(Q)},PromiseResolve(Q){return Promise.resolve(Q)},ReflectApply:Reflect.apply,RegExpPrototypeTest(Q,J){return Q.test(J)},SafeSet:Set,String,StringPrototypeSlice(Q,J,X){return Q.slice(J,X)},StringPrototypeToLowerCase(Q){return Q.toLowerCase()},StringPrototypeToUpperCase(Q){return Q.toUpperCase()},StringPrototypeTrim(Q){return Q.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(Q,J,X){return Q.set(J,X)},Boolean,Uint8Array}});var uJ=D((zR,m6)=>{m6.exports={format(Q,...J){return Q.replace(/%([sdifj])/g,function(...[X,Y]){let $=J.shift();if(Y==="f")return $.toFixed(6);else if(Y==="j")return JSON.stringify($);else if(Y==="s"&&typeof $==="object")return`${$.constructor!==Object?$.constructor.name:""} {}`.trim();else return $.toString()})},inspect(Q){switch(typeof Q){case"string":if(Q.includes("'")){if(!Q.includes('"'))return`"${Q}"`;else if(!Q.includes("`")&&!Q.includes("${"))return`\`${Q}\``}return`'${Q}'`;case"number":if(isNaN(Q))return"NaN";else if(Object.is(Q,-0))return String(Q);return Q;case"bigint":return`${String(Q)}n`;case"boolean":case"undefined":return String(Q);case"object":return"{}"}}}});var P0=D((VR,d6)=>{var{format:V2,inspect:H9}=uJ(),{AggregateError:M2}=q0(),U2=globalThis.AggregateError||M2,F2=Symbol("kIsNodeError"),O2=["string","function","number","object","Function","Object","boolean","bigint","symbol"],N2=/^([A-Z][a-z0-9]*)+$/,q9={};function C8(Q,J){if(!Q)throw new q9.ERR_INTERNAL_ASSERTION(J)}function u6(Q){let J="",X=Q.length,Y=Q[0]==="-"?1:0;for(;X>=Y+4;X-=3)J=`_${Q.slice(X-3,X)}${J}`;return`${Q.slice(0,X)}${J}`}function j2(Q,J,X){if(typeof J==="function")return C8(J.length<=X.length,`Code: ${Q}; The provided arguments length (${X.length}) does not match the required ones (${J.length}).`),J(...X);let Y=(J.match(/%[dfijoOs]/g)||[]).length;if(C8(Y===X.length,`Code: ${Q}; The provided arguments length (${X.length}) does not match the required ones (${Y}).`),X.length===0)return J;return V2(J,...X)}function L0(Q,J,X){if(!X)X=Error;class Y extends X{constructor(...$){super(j2(Q,J,$))}toString(){return`${this.name} [${Q}]: ${this.message}`}}Object.defineProperties(Y.prototype,{name:{value:X.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${Q}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),Y.prototype.code=Q,Y.prototype[F2]=!0,q9[Q]=Y}function l6(Q){let J="__node_internal_"+Q.name;return Object.defineProperty(Q,"name",{value:J}),Q}function B2(Q,J){if(Q&&J&&Q!==J){if(Array.isArray(J.errors))return J.errors.push(Q),J;let X=new U2([J,Q],J.message);return X.code=J.code,X}return Q||J}class c6 extends Error{constructor(Q="The operation was aborted",J=void 0){if(J!==void 0&&typeof J!=="object")throw new q9.ERR_INVALID_ARG_TYPE("options","Object",J);super(Q,J);this.code="ABORT_ERR",this.name="AbortError"}}L0("ERR_ASSERTION","%s",Error);L0("ERR_INVALID_ARG_TYPE",(Q,J,X)=>{if(C8(typeof Q==="string","'name' must be a string"),!Array.isArray(J))J=[J];let Y="The ";if(Q.endsWith(" argument"))Y+=`${Q} `;else Y+=`"${Q}" ${Q.includes(".")?"property":"argument"} `;Y+="must be ";let $=[],G=[],H=[];for(let K of J)if(C8(typeof K==="string","All expected entries have to be of type string"),O2.includes(K))$.push(K.toLowerCase());else if(N2.test(K))G.push(K);else C8(K!=="object",'The value "object" should be written as "Object"'),H.push(K);if(G.length>0){let K=$.indexOf("object");if(K!==-1)$.splice($,K,1),G.push("Object")}if($.length>0){switch($.length){case 1:Y+=`of type ${$[0]}`;break;case 2:Y+=`one of type ${$[0]} or ${$[1]}`;break;default:{let K=$.pop();Y+=`one of type ${$.join(", ")}, or ${K}`}}if(G.length>0||H.length>0)Y+=" or "}if(G.length>0){switch(G.length){case 1:Y+=`an instance of ${G[0]}`;break;case 2:Y+=`an instance of ${G[0]} or ${G[1]}`;break;default:{let K=G.pop();Y+=`an instance of ${G.join(", ")}, or ${K}`}}if(H.length>0)Y+=" or "}switch(H.length){case 0:break;case 1:if(H[0].toLowerCase()!==H[0])Y+="an ";Y+=`${H[0]}`;break;case 2:Y+=`one of ${H[0]} or ${H[1]}`;break;default:{let K=H.pop();Y+=`one of ${H.join(", ")}, or ${K}`}}if(X==null)Y+=`. Received ${X}`;else if(typeof X==="function"&&X.name)Y+=`. Received function ${X.name}`;else if(typeof X==="object"){var q;if((q=X.constructor)!==null&&q!==void 0&&q.name)Y+=`. Received an instance of ${X.constructor.name}`;else{let K=H9(X,{depth:-1});Y+=`. Received ${K}`}}else{let K=H9(X,{colors:!1});if(K.length>25)K=`${K.slice(0,25)}...`;Y+=`. Received type ${typeof X} (${K})`}return Y},TypeError);L0("ERR_INVALID_ARG_VALUE",(Q,J,X="is invalid")=>{let Y=H9(J);if(Y.length>128)Y=Y.slice(0,128)+"...";return`The ${Q.includes(".")?"property":"argument"} '${Q}' ${X}. Received ${Y}`},TypeError);L0("ERR_INVALID_RETURN_VALUE",(Q,J,X)=>{var Y;let $=X!==null&&X!==void 0&&(Y=X.constructor)!==null&&Y!==void 0&&Y.name?`instance of ${X.constructor.name}`:`type ${typeof X}`;return`Expected ${Q} to be returned from the "${J}" function but got ${$}.`},TypeError);L0("ERR_MISSING_ARGS",(...Q)=>{C8(Q.length>0,"At least one arg needs to be specified");let J,X=Q.length;switch(Q=(Array.isArray(Q)?Q:[Q]).map((Y)=>`"${Y}"`).join(" or "),X){case 1:J+=`The ${Q[0]} argument`;break;case 2:J+=`The ${Q[0]} and ${Q[1]} arguments`;break;default:{let Y=Q.pop();J+=`The ${Q.join(", ")}, and ${Y} arguments`}break}return`${J} must be specified`},TypeError);L0("ERR_OUT_OF_RANGE",(Q,J,X)=>{C8(J,'Missing "range" argument');let Y;if(Number.isInteger(X)&&Math.abs(X)>4294967296)Y=u6(String(X));else if(typeof X==="bigint"){Y=String(X);let $=BigInt(2)**BigInt(32);if(X>$||X<-$)Y=u6(Y);Y+="n"}else Y=H9(X);return`The value of "${Q}" is out of range. It must be ${J}. Received ${Y}`},RangeError);L0("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);L0("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);L0("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);L0("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);L0("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);L0("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);L0("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);L0("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);L0("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);L0("ERR_STREAM_WRITE_AFTER_END","write after end",Error);L0("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);d6.exports={AbortError:c6,aggregateTwoErrors:l6(B2),hideStackFrames:l6,codes:q9}});var JY=D((QY,$4)=>{Object.defineProperty(QY,"__esModule",{value:!0});var a6=new WeakMap,lJ=new WeakMap;function G0(Q){let J=a6.get(Q);return console.assert(J!=null,"'this' is expected an Event object, but got",Q),J}function p6(Q){if(Q.passiveListener!=null){if(typeof console!=="undefined"&&typeof console.error==="function")console.error("Unable to preventDefault inside passive event listener invocation.",Q.passiveListener);return}if(!Q.event.cancelable)return;if(Q.canceled=!0,typeof Q.event.preventDefault==="function")Q.event.preventDefault()}function HQ(Q,J){a6.set(this,{eventTarget:Q,event:J,eventPhase:2,currentTarget:Q,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:J.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let X=Object.keys(J);for(let Y=0;Y<X.length;++Y){let $=X[Y];if(!($ in this))Object.defineProperty(this,$,s6($))}}HQ.prototype={get type(){return G0(this).event.type},get target(){return G0(this).eventTarget},get currentTarget(){return G0(this).currentTarget},composedPath(){let Q=G0(this).currentTarget;if(Q==null)return[];return[Q]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return G0(this).eventPhase},stopPropagation(){let Q=G0(this);if(Q.stopped=!0,typeof Q.event.stopPropagation==="function")Q.event.stopPropagation()},stopImmediatePropagation(){let Q=G0(this);if(Q.stopped=!0,Q.immediateStopped=!0,typeof Q.event.stopImmediatePropagation==="function")Q.event.stopImmediatePropagation()},get bubbles(){return Boolean(G0(this).event.bubbles)},get cancelable(){return Boolean(G0(this).event.cancelable)},preventDefault(){p6(G0(this))},get defaultPrevented(){return G0(this).canceled},get composed(){return Boolean(G0(this).event.composed)},get timeStamp(){return G0(this).timeStamp},get srcElement(){return G0(this).eventTarget},get cancelBubble(){return G0(this).stopped},set cancelBubble(Q){if(!Q)return;let J=G0(this);if(J.stopped=!0,typeof J.event.cancelBubble==="boolean")J.event.cancelBubble=!0},get returnValue(){return!G0(this).canceled},set returnValue(Q){if(!Q)p6(G0(this))},initEvent(){}};Object.defineProperty(HQ.prototype,"constructor",{value:HQ,configurable:!0,writable:!0});if(typeof window!=="undefined"&&typeof window.Event!=="undefined")Object.setPrototypeOf(HQ.prototype,window.Event.prototype),lJ.set(window.Event.prototype,HQ);function s6(Q){return{get(){return G0(this).event[Q]},set(J){G0(this).event[Q]=J},configurable:!0,enumerable:!0}}function A2(Q){return{value(){let J=G0(this).event;return J[Q].apply(J,arguments)},configurable:!0,enumerable:!0}}function D2(Q,J){let X=Object.keys(J);if(X.length===0)return Q;function Y($,G){Q.call(this,$,G)}Y.prototype=Object.create(Q.prototype,{constructor:{value:Y,configurable:!0,writable:!0}});for(let $=0;$<X.length;++$){let G=X[$];if(!(G in Q.prototype)){let q=typeof Object.getOwnPropertyDescriptor(J,G).value==="function";Object.defineProperty(Y.prototype,G,q?A2(G):s6(G))}}return Y}function t6(Q){if(Q==null||Q===Object.prototype)return HQ;let J=lJ.get(Q);if(J==null)J=D2(t6(Object.getPrototypeOf(Q)),Q),lJ.set(Q,J);return J}function L2(Q,J){return new(t6(Object.getPrototypeOf(J)))(Q,J)}function C2(Q){return G0(Q).immediateStopped}function P2(Q,J){G0(Q).eventPhase=J}function w2(Q,J){G0(Q).currentTarget=J}function n6(Q,J){G0(Q).passiveListener=J}var e6=new WeakMap,i6=1,o6=2,K9=3;function W9(Q){return Q!==null&&typeof Q==="object"}function Y4(Q){let J=e6.get(Q);if(J==null)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return J}function E2(Q){return{get(){let X=Y4(this).get(Q);while(X!=null){if(X.listenerType===K9)return X.listener;X=X.next}return null},set(J){if(typeof J!=="function"&&!W9(J))J=null;let X=Y4(this),Y=null,$=X.get(Q);while($!=null){if($.listenerType===K9)if(Y!==null)Y.next=$.next;else if($.next!==null)X.set(Q,$.next);else X.delete(Q);else Y=$;$=$.next}if(J!==null){let G={listener:J,listenerType:K9,passive:!1,once:!1,next:null};if(Y===null)X.set(Q,G);else Y.next=G}},configurable:!0,enumerable:!0}}function cJ(Q,J){Object.defineProperty(Q,`on${J}`,E2(J))}function r6(Q){function J(){Y1.call(this)}J.prototype=Object.create(Y1.prototype,{constructor:{value:J,configurable:!0,writable:!0}});for(let X=0;X<Q.length;++X)cJ(J.prototype,Q[X]);return J}function Y1(){if(this instanceof Y1){e6.set(this,new Map);return}if(arguments.length===1&&Array.isArray(arguments[0]))return r6(arguments[0]);if(arguments.length>0){let Q=new Array(arguments.length);for(let J=0;J<arguments.length;++J)Q[J]=arguments[J];return r6(Q)}throw new TypeError("Cannot call a class as a function")}Y1.prototype={addEventListener(Q,J,X){if(J==null)return;if(typeof J!=="function"&&!W9(J))throw new TypeError("'listener' should be a function or an object.");let Y=Y4(this),$=W9(X),H=($?Boolean(X.capture):Boolean(X))?i6:o6,q={listener:J,listenerType:H,passive:$&&Boolean(X.passive),once:$&&Boolean(X.once),next:null},K=Y.get(Q);if(K===void 0){Y.set(Q,q);return}let z=null;while(K!=null){if(K.listener===J&&K.listenerType===H)return;z=K,K=K.next}z.next=q},removeEventListener(Q,J,X){if(J==null)return;let Y=Y4(this),G=(W9(X)?Boolean(X.capture):Boolean(X))?i6:o6,H=null,q=Y.get(Q);while(q!=null){if(q.listener===J&&q.listenerType===G){if(H!==null)H.next=q.next;else if(q.next!==null)Y.set(Q,q.next);else Y.delete(Q);return}H=q,q=q.next}},dispatchEvent(Q){if(Q==null||typeof Q.type!=="string")throw new TypeError('"event.type" should be a string.');let J=Y4(this),X=Q.type,Y=J.get(X);if(Y==null)return!0;let $=L2(this,Q),G=null;while(Y!=null){if(Y.once)if(G!==null)G.next=Y.next;else if(Y.next!==null)J.set(X,Y.next);else J.delete(X);else G=Y;if(n6($,Y.passive?Y.listener:null),typeof Y.listener==="function")try{Y.listener.call(this,$)}catch(H){if(typeof console!=="undefined"&&typeof console.error==="function")console.error(H)}else if(Y.listenerType!==K9&&typeof Y.listener.handleEvent==="function")Y.listener.handleEvent($);if(C2($))break;Y=Y.next}return n6($,null),P2($,0),w2($,null),!$.defaultPrevented}};Object.defineProperty(Y1.prototype,"constructor",{value:Y1,configurable:!0,writable:!0});if(typeof window!=="undefined"&&typeof window.EventTarget!=="undefined")Object.setPrototypeOf(Y1.prototype,window.EventTarget.prototype);QY.defineEventAttribute=cJ;QY.EventTarget=Y1;QY.default=Y1;$4.exports=Y1;$4.exports.EventTarget=$4.exports.default=Y1;$4.exports.defineEventAttribute=cJ});var qQ=D(($Y,G4)=>{Object.defineProperty($Y,"__esModule",{value:!0});var dJ=JY();class P8 extends dJ.EventTarget{constructor(){super();throw new TypeError("AbortSignal cannot be constructed directly")}get aborted(){let Q=z9.get(this);if(typeof Q!=="boolean")throw new TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${this===null?"null":typeof this}`);return Q}}dJ.defineEventAttribute(P8.prototype,"abort");function Z2(){let Q=Object.create(P8.prototype);return dJ.EventTarget.call(Q),z9.set(Q,!1),Q}function S2(Q){if(z9.get(Q)!==!1)return;z9.set(Q,!0),Q.dispatchEvent({type:"abort"})}var z9=new WeakMap;Object.defineProperties(P8.prototype,{aborted:{enumerable:!0}});if(typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol")Object.defineProperty(P8.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});class w8{constructor(){YY.set(this,Z2())}get signal(){return XY(this)}abort(){S2(XY(this))}}var YY=new WeakMap;function XY(Q){let J=YY.get(Q);if(J==null)throw new TypeError(`Expected 'this' to be an 'AbortController' object, but got ${Q===null?"null":typeof Q}`);return J}Object.defineProperties(w8.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});if(typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol")Object.defineProperty(w8.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"});$Y.AbortController=w8;$Y.AbortSignal=P8;$Y.default=w8;G4.exports=w8;G4.exports.AbortController=G4.exports.default=w8;G4.exports.AbortSignal=P8});var Z0=D((MR,nJ)=>{var v2=y("buffer"),{format:y2,inspect:g2}=uJ(),{codes:{ERR_INVALID_ARG_TYPE:pJ}}=P0(),{kResistStopPropagation:f2,AggregateError:k2,SymbolDispose:b2}=q0(),m2=globalThis.AbortSignal||qQ().AbortSignal,u2=globalThis.AbortController||qQ().AbortController,l2=Object.getPrototypeOf(async function(){}).constructor,GY=globalThis.Blob||v2.Blob,c2=typeof GY!=="undefined"?function Q(J){return J instanceof GY}:function Q(J){return!1},HY=(Q,J)=>{if(Q!==void 0&&(Q===null||typeof Q!=="object"||!("aborted"in Q)))throw new pJ(J,"AbortSignal",Q)},d2=(Q,J)=>{if(typeof Q!=="function")throw new pJ(J,"Function",Q)};nJ.exports={AggregateError:k2,kEmptyObject:Object.freeze({}),once(Q){let J=!1;return function(...X){if(J)return;J=!0,Q.apply(this,X)}},createDeferredPromise:function(){let Q,J;return{promise:new Promise((Y,$)=>{Q=Y,J=$}),resolve:Q,reject:J}},promisify(Q){return new Promise((J,X)=>{Q((Y,...$)=>{if(Y)return X(Y);return J(...$)})})},debuglog(){return function(){}},format:y2,inspect:g2,types:{isAsyncFunction(Q){return Q instanceof l2},isArrayBufferView(Q){return ArrayBuffer.isView(Q)}},isBlob:c2,deprecate(Q,J){return Q},addAbortListener:y("events").addAbortListener||function Q(J,X){if(J===void 0)throw new pJ("signal","AbortSignal",J);HY(J,"signal"),d2(X,"listener");let Y;if(J.aborted)queueMicrotask(()=>X());else J.addEventListener("abort",X,{__proto__:null,once:!0,[f2]:!0}),Y=()=>{J.removeEventListener("abort",X)};return{__proto__:null,[b2](){var $;($=Y)===null||$===void 0||$()}}},AbortSignalAny:m2.any||function Q(J){if(J.length===1)return J[0];let X=new u2,Y=()=>X.abort();return J.forEach(($)=>{HY($,"signals"),$.addEventListener("abort",Y,{once:!0})}),X.signal.addEventListener("abort",()=>{J.forEach(($)=>$.removeEventListener("abort",Y))},{once:!0}),X.signal}};nJ.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var WQ=D((UR,NY)=>{var{ArrayIsArray:oJ,ArrayPrototypeIncludes:zY,ArrayPrototypeJoin:VY,ArrayPrototypeMap:p2,NumberIsInteger:rJ,NumberIsNaN:n2,NumberMAX_SAFE_INTEGER:i2,NumberMIN_SAFE_INTEGER:o2,NumberParseInt:r2,ObjectPrototypeHasOwnProperty:a2,RegExpPrototypeExec:MY,String:s2,StringPrototypeToUpperCase:t2,StringPrototypeTrim:e2}=q0(),{hideStackFrames:p0,codes:{ERR_SOCKET_BAD_PORT:QM,ERR_INVALID_ARG_TYPE:w0,ERR_INVALID_ARG_VALUE:KQ,ERR_OUT_OF_RANGE:E8,ERR_UNKNOWN_SIGNAL:qY}}=P0(),{normalizeEncoding:JM}=Z0(),{isAsyncFunction:XM,isArrayBufferView:YM}=Z0().types,KY={};function $M(Q){return Q===(Q|0)}function GM(Q){return Q===Q>>>0}var HM=/^[0-7]+$/,qM="must be a 32-bit unsigned integer or an octal string";function KM(Q,J,X){if(typeof Q==="undefined")Q=X;if(typeof Q==="string"){if(MY(HM,Q)===null)throw new KQ(J,Q,qM);Q=r2(Q,8)}return UY(Q,J),Q}var WM=p0((Q,J,X=o2,Y=i2)=>{if(typeof Q!=="number")throw new w0(J,"number",Q);if(!rJ(Q))throw new E8(J,"an integer",Q);if(Q<X||Q>Y)throw new E8(J,`>= ${X} && <= ${Y}`,Q)}),zM=p0((Q,J,X=-2147483648,Y=2147483647)=>{if(typeof Q!=="number")throw new w0(J,"number",Q);if(!rJ(Q))throw new E8(J,"an integer",Q);if(Q<X||Q>Y)throw new E8(J,`>= ${X} && <= ${Y}`,Q)}),UY=p0((Q,J,X=!1)=>{if(typeof Q!=="number")throw new w0(J,"number",Q);if(!rJ(Q))throw new E8(J,"an integer",Q);let Y=X?1:0,$=4294967295;if(Q<Y||Q>$)throw new E8(J,`>= ${Y} && <= ${$}`,Q)});function aJ(Q,J){if(typeof Q!=="string")throw new w0(J,"string",Q)}function VM(Q,J,X=void 0,Y){if(typeof Q!=="number")throw new w0(J,"number",Q);if(X!=null&&Q<X||Y!=null&&Q>Y||(X!=null||Y!=null)&&n2(Q))throw new E8(J,`${X!=null?`>= ${X}`:""}${X!=null&&Y!=null?" && ":""}${Y!=null?`<= ${Y}`:""}`,Q)}var MM=p0((Q,J,X)=>{if(!zY(X,Q)){let $="must be one of: "+VY(p2(X,(G)=>typeof G==="string"?`'${G}'`:s2(G)),", ");throw new KQ(J,Q,$)}});function FY(Q,J){if(typeof Q!=="boolean")throw new w0(J,"boolean",Q)}function iJ(Q,J,X){return Q==null||!a2(Q,J)?X:Q[J]}var UM=p0((Q,J,X=null)=>{let Y=iJ(X,"allowArray",!1),$=iJ(X,"allowFunction",!1);if(!iJ(X,"nullable",!1)&&Q===null||!Y&&oJ(Q)||typeof Q!=="object"&&(!$||typeof Q!=="function"))throw new w0(J,"Object",Q)}),FM=p0((Q,J)=>{if(Q!=null&&typeof Q!=="object"&&typeof Q!=="function")throw new w0(J,"a dictionary",Q)}),V9=p0((Q,J,X=0)=>{if(!oJ(Q))throw new w0(J,"Array",Q);if(Q.length<X){let Y=`must be longer than ${X}`;throw new KQ(J,Q,Y)}});function OM(Q,J){V9(Q,J);for(let X=0;X<Q.length;X++)aJ(Q[X],`${J}[${X}]`)}function NM(Q,J){V9(Q,J);for(let X=0;X<Q.length;X++)FY(Q[X],`${J}[${X}]`)}function jM(Q,J){V9(Q,J);for(let X=0;X<Q.length;X++){let Y=Q[X],$=`${J}[${X}]`;if(Y==null)throw new w0($,"AbortSignal",Y);OY(Y,$)}}function BM(Q,J="signal"){if(aJ(Q,J),KY[Q]===void 0){if(KY[t2(Q)]!==void 0)throw new qY(Q+" (signals must use all capital letters)");throw new qY(Q)}}var AM=p0((Q,J="buffer")=>{if(!YM(Q))throw new w0(J,["Buffer","TypedArray","DataView"],Q)});function DM(Q,J){let X=JM(J),Y=Q.length;if(X==="hex"&&Y%2!==0)throw new KQ("encoding",J,`is invalid for data of length ${Y}`)}function LM(Q,J="Port",X=!0){if(typeof Q!=="number"&&typeof Q!=="string"||typeof Q==="string"&&e2(Q).length===0||+Q!==+Q>>>0||Q>65535||Q===0&&!X)throw new QM(J,Q,X);return Q|0}var OY=p0((Q,J)=>{if(Q!==void 0&&(Q===null||typeof Q!=="object"||!("aborted"in Q)))throw new w0(J,"AbortSignal",Q)}),CM=p0((Q,J)=>{if(typeof Q!=="function")throw new w0(J,"Function",Q)}),PM=p0((Q,J)=>{if(typeof Q!=="function"||XM(Q))throw new w0(J,"Function",Q)}),wM=p0((Q,J)=>{if(Q!==void 0)throw new w0(J,"undefined",Q)});function EM(Q,J,X){if(!zY(X,Q))throw new w0(J,`('${VY(X,"|")}')`,Q)}var RM=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function WY(Q,J){if(typeof Q==="undefined"||!MY(RM,Q))throw new KQ(J,Q,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function TM(Q){if(typeof Q==="string")return WY(Q,"hints"),Q;else if(oJ(Q)){let J=Q.length,X="";if(J===0)return X;for(let Y=0;Y<J;Y++){let $=Q[Y];if(WY($,"hints"),X+=$,Y!==J-1)X+=", "}return X}throw new KQ("hints",Q,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}NY.exports={isInt32:$M,isUint32:GM,parseFileMode:KM,validateArray:V9,validateStringArray:OM,validateBooleanArray:NM,validateAbortSignalArray:jM,validateBoolean:FY,validateBuffer:AM,validateDictionary:FM,validateEncoding:DM,validateFunction:CM,validateInt32:zM,validateInteger:WM,validateNumber:VM,validateObject:UM,validateOneOf:MM,validatePlainFunction:PM,validatePort:LM,validateSignalName:BM,validateString:aJ,validateUint32:UY,validateUndefined:wM,validateUnion:EM,validateAbortSignal:OY,validateLinkHeaderValue:TM}});var e1=D((FR,jY)=>{jY.exports=global.process});var D1=D((OR,xY)=>{var{SymbolAsyncIterator:BY,SymbolIterator:AY,SymbolFor:R8}=q0(),DY=R8("nodejs.stream.destroyed"),LY=R8("nodejs.stream.errored"),sJ=R8("nodejs.stream.readable"),tJ=R8("nodejs.stream.writable"),CY=R8("nodejs.stream.disturbed"),IM=R8("nodejs.webstream.isClosedPromise"),ZM=R8("nodejs.webstream.controllerErrorFunction");function M9(Q,J=!1){var X;return!!(Q&&typeof Q.pipe==="function"&&typeof Q.on==="function"&&(!J||typeof Q.pause==="function"&&typeof Q.resume==="function")&&(!Q._writableState||((X=Q._readableState)===null||X===void 0?void 0:X.readable)!==!1)&&(!Q._writableState||Q._readableState))}function U9(Q){var J;return!!(Q&&typeof Q.write==="function"&&typeof Q.on==="function"&&(!Q._readableState||((J=Q._writableState)===null||J===void 0?void 0:J.writable)!==!1))}function SM(Q){return!!(Q&&typeof Q.pipe==="function"&&Q._readableState&&typeof Q.on==="function"&&typeof Q.write==="function")}function A1(Q){return Q&&(Q._readableState||Q._writableState||typeof Q.write==="function"&&typeof Q.on==="function"||typeof Q.pipe==="function"&&typeof Q.on==="function")}function PY(Q){return!!(Q&&!A1(Q)&&typeof Q.pipeThrough==="function"&&typeof Q.getReader==="function"&&typeof Q.cancel==="function")}function wY(Q){return!!(Q&&!A1(Q)&&typeof Q.getWriter==="function"&&typeof Q.abort==="function")}function EY(Q){return!!(Q&&!A1(Q)&&typeof Q.readable==="object"&&typeof Q.writable==="object")}function _M(Q){return PY(Q)||wY(Q)||EY(Q)}function xM(Q,J){if(Q==null)return!1;if(J===!0)return typeof Q[BY]==="function";if(J===!1)return typeof Q[AY]==="function";return typeof Q[BY]==="function"||typeof Q[AY]==="function"}function F9(Q){if(!A1(Q))return null;let{_writableState:J,_readableState:X}=Q,Y=J||X;return!!(Q.destroyed||Q[DY]||Y!==null&&Y!==void 0&&Y.destroyed)}function RY(Q){if(!U9(Q))return null;if(Q.writableEnded===!0)return!0;let J=Q._writableState;if(J!==null&&J!==void 0&&J.errored)return!1;if(typeof(J===null||J===void 0?void 0:J.ended)!=="boolean")return null;return J.ended}function hM(Q,J){if(!U9(Q))return null;if(Q.writableFinished===!0)return!0;let X=Q._writableState;if(X!==null&&X!==void 0&&X.errored)return!1;if(typeof(X===null||X===void 0?void 0:X.finished)!=="boolean")return null;return!!(X.finished||J===!1&&X.ended===!0&&X.length===0)}function vM(Q){if(!M9(Q))return null;if(Q.readableEnded===!0)return!0;let J=Q._readableState;if(!J||J.errored)return!1;if(typeof(J===null||J===void 0?void 0:J.ended)!=="boolean")return null;return J.ended}function TY(Q,J){if(!M9(Q))return null;let X=Q._readableState;if(X!==null&&X!==void 0&&X.errored)return!1;if(typeof(X===null||X===void 0?void 0:X.endEmitted)!=="boolean")return null;return!!(X.endEmitted||J===!1&&X.ended===!0&&X.length===0)}function IY(Q){if(Q&&Q[sJ]!=null)return Q[sJ];if(typeof(Q===null||Q===void 0?void 0:Q.readable)!=="boolean")return null;if(F9(Q))return!1;return M9(Q)&&Q.readable&&!TY(Q)}function ZY(Q){if(Q&&Q[tJ]!=null)return Q[tJ];if(typeof(Q===null||Q===void 0?void 0:Q.writable)!=="boolean")return null;if(F9(Q))return!1;return U9(Q)&&Q.writable&&!RY(Q)}function yM(Q,J){if(!A1(Q))return null;if(F9(Q))return!0;if((J===null||J===void 0?void 0:J.readable)!==!1&&IY(Q))return!1;if((J===null||J===void 0?void 0:J.writable)!==!1&&ZY(Q))return!1;return!0}function gM(Q){var J,X;if(!A1(Q))return null;if(Q.writableErrored)return Q.writableErrored;return(J=(X=Q._writableState)===null||X===void 0?void 0:X.errored)!==null&&J!==void 0?J:null}function fM(Q){var J,X;if(!A1(Q))return null;if(Q.readableErrored)return Q.readableErrored;return(J=(X=Q._readableState)===null||X===void 0?void 0:X.errored)!==null&&J!==void 0?J:null}function kM(Q){if(!A1(Q))return null;if(typeof Q.closed==="boolean")return Q.closed;let{_writableState:J,_readableState:X}=Q;if(typeof(J===null||J===void 0?void 0:J.closed)==="boolean"||typeof(X===null||X===void 0?void 0:X.closed)==="boolean")return(J===null||J===void 0?void 0:J.closed)||(X===null||X===void 0?void 0:X.closed);if(typeof Q._closed==="boolean"&&SY(Q))return Q._closed;return null}function SY(Q){return typeof Q._closed==="boolean"&&typeof Q._defaultKeepAlive==="boolean"&&typeof Q._removedConnection==="boolean"&&typeof Q._removedContLen==="boolean"}function _Y(Q){return typeof Q._sent100==="boolean"&&SY(Q)}function bM(Q){var J;return typeof Q._consuming==="boolean"&&typeof Q._dumped==="boolean"&&((J=Q.req)===null||J===void 0?void 0:J.upgradeOrConnect)===void 0}function mM(Q){if(!A1(Q))return null;let{_writableState:J,_readableState:X}=Q,Y=J||X;return!Y&&_Y(Q)||!!(Y&&Y.autoDestroy&&Y.emitClose&&Y.closed===!1)}function uM(Q){var J;return!!(Q&&((J=Q[CY])!==null&&J!==void 0?J:Q.readableDidRead||Q.readableAborted))}function lM(Q){var J,X,Y,$,G,H,q,K,z,V;return!!(Q&&((J=(X=(Y=($=(G=(H=Q[LY])!==null&&H!==void 0?H:Q.readableErrored)!==null&&G!==void 0?G:Q.writableErrored)!==null&&$!==void 0?$:(q=Q._readableState)===null||q===void 0?void 0:q.errorEmitted)!==null&&Y!==void 0?Y:(K=Q._writableState)===null||K===void 0?void 0:K.errorEmitted)!==null&&X!==void 0?X:(z=Q._readableState)===null||z===void 0?void 0:z.errored)!==null&&J!==void 0?J:(V=Q._writableState)===null||V===void 0?void 0:V.errored))}xY.exports={isDestroyed:F9,kIsDestroyed:DY,isDisturbed:uM,kIsDisturbed:CY,isErrored:lM,kIsErrored:LY,isReadable:IY,kIsReadable:sJ,kIsClosedPromise:IM,kControllerErrorFunction:ZM,kIsWritable:tJ,isClosed:kM,isDuplexNodeStream:SM,isFinished:yM,isIterable:xM,isReadableNodeStream:M9,isReadableStream:PY,isReadableEnded:vM,isReadableFinished:TY,isReadableErrored:fM,isNodeStream:A1,isWebStream:_M,isWritable:ZY,isWritableNodeStream:U9,isWritableStream:wY,isWritableEnded:RY,isWritableFinished:hM,isWritableErrored:gM,isServerRequest:bM,isServerResponse:_Y,willEmitClose:mM,isTransformStream:EY}});var f1=D((NR,YX)=>{var Q8=e1(),{AbortError:uY,codes:cM}=P0(),{ERR_INVALID_ARG_TYPE:dM,ERR_STREAM_PREMATURE_CLOSE:hY}=cM,{kEmptyObject:QX,once:JX}=Z0(),{validateAbortSignal:pM,validateFunction:nM,validateObject:iM,validateBoolean:oM}=WQ(),{Promise:rM,PromisePrototypeThen:aM,SymbolDispose:lY}=q0(),{isClosed:sM,isReadable:vY,isReadableNodeStream:eJ,isReadableStream:tM,isReadableFinished:yY,isReadableErrored:gY,isWritable:fY,isWritableNodeStream:kY,isWritableStream:eM,isWritableFinished:bY,isWritableErrored:mY,isNodeStream:QU,willEmitClose:JU,kIsClosedPromise:XU}=D1(),zQ;function YU(Q){return Q.setHeader&&typeof Q.abort==="function"}var XX=()=>{};function cY(Q,J,X){var Y,$;if(arguments.length===2)X=J,J=QX;else if(J==null)J=QX;else iM(J,"options");if(nM(X,"callback"),pM(J.signal,"options.signal"),X=JX(X),tM(Q)||eM(Q))return $U(Q,J,X);if(!QU(Q))throw new dM("stream",["ReadableStream","WritableStream","Stream"],Q);let G=(Y=J.readable)!==null&&Y!==void 0?Y:eJ(Q),H=($=J.writable)!==null&&$!==void 0?$:kY(Q),q=Q._writableState,K=Q._readableState,z=()=>{if(!Q.writable)O()},V=JU(Q)&&eJ(Q)===G&&kY(Q)===H,F=bY(Q,!1),O=()=>{if(F=!0,Q.destroyed)V=!1;if(V&&(!Q.readable||G))return;if(!G||N)X.call(Q)},N=yY(Q,!1),A=()=>{if(N=!0,Q.destroyed)V=!1;if(V&&(!Q.writable||H))return;if(!H||F)X.call(Q)},B=(i)=>{X.call(Q,i)},L=sM(Q),C=()=>{L=!0;let i=mY(Q)||gY(Q);if(i&&typeof i!=="boolean")return X.call(Q,i);if(G&&!N&&eJ(Q,!0)){if(!yY(Q,!1))return X.call(Q,new hY)}if(H&&!F){if(!bY(Q,!1))return X.call(Q,new hY)}X.call(Q)},P=()=>{L=!0;let i=mY(Q)||gY(Q);if(i&&typeof i!=="boolean")return X.call(Q,i);X.call(Q)},_=()=>{Q.req.on("finish",O)};if(YU(Q)){if(Q.on("complete",O),!V)Q.on("abort",C);if(Q.req)_();else Q.on("request",_)}else if(H&&!q)Q.on("end",z),Q.on("close",z);if(!V&&typeof Q.aborted==="boolean")Q.on("aborted",C);if(Q.on("end",A),Q.on("finish",O),J.error!==!1)Q.on("error",B);if(Q.on("close",C),L)Q8.nextTick(C);else if(q!==null&&q!==void 0&&q.errorEmitted||K!==null&&K!==void 0&&K.errorEmitted){if(!V)Q8.nextTick(P)}else if(!G&&(!V||vY(Q))&&(F||fY(Q)===!1))Q8.nextTick(P);else if(!H&&(!V||fY(Q))&&(N||vY(Q)===!1))Q8.nextTick(P);else if(K&&Q.req&&Q.aborted)Q8.nextTick(P);let x=()=>{if(X=XX,Q.removeListener("aborted",C),Q.removeListener("complete",O),Q.removeListener("abort",C),Q.removeListener("request",_),Q.req)Q.req.removeListener("finish",O);Q.removeListener("end",z),Q.removeListener("close",z),Q.removeListener("finish",O),Q.removeListener("end",A),Q.removeListener("error",B),Q.removeListener("close",C)};if(J.signal&&!L){let i=()=>{let J0=X;x(),J0.call(Q,new uY(void 0,{cause:J.signal.reason}))};if(J.signal.aborted)Q8.nextTick(i);else{zQ=zQ||Z0().addAbortListener;let J0=zQ(J.signal,i),X0=X;X=JX((...z0)=>{J0[lY](),X0.apply(Q,z0)})}}return x}function $U(Q,J,X){let Y=!1,$=XX;if(J.signal)if($=()=>{Y=!0,X.call(Q,new uY(void 0,{cause:J.signal.reason}))},J.signal.aborted)Q8.nextTick($);else{zQ=zQ||Z0().addAbortListener;let H=zQ(J.signal,$),q=X;X=JX((...K)=>{H[lY](),q.apply(Q,K)})}let G=(...H)=>{if(!Y)Q8.nextTick(()=>X.apply(Q,H))};return aM(Q[XU].promise,G,G),XX}function GU(Q,J){var X;let Y=!1;if(J===null)J=QX;if((X=J)!==null&&X!==void 0&&X.cleanup)oM(J.cleanup,"cleanup"),Y=J.cleanup;return new rM(($,G)=>{let H=cY(Q,J,(q)=>{if(Y)H();if(q)G(q);else $()})})}YX.exports=cY;YX.exports.finished=GU});var T8=D((jR,sY)=>{var L1=e1(),{aggregateTwoErrors:HU,codes:{ERR_MULTIPLE_CALLBACK:qU},AbortError:KU}=P0(),{Symbol:nY}=q0(),{kIsDestroyed:WU,isDestroyed:zU,isFinished:VU,isServerRequest:MU}=D1(),iY=nY("kDestroy"),$X=nY("kConstruct");function oY(Q,J,X){if(Q){if(Q.stack,J&&!J.errored)J.errored=Q;if(X&&!X.errored)X.errored=Q}}function UU(Q,J){let X=this._readableState,Y=this._writableState,$=Y||X;if(Y!==null&&Y!==void 0&&Y.destroyed||X!==null&&X!==void 0&&X.destroyed){if(typeof J==="function")J();return this}if(oY(Q,Y,X),Y)Y.destroyed=!0;if(X)X.destroyed=!0;if(!$.constructed)this.once(iY,function(G){dY(this,HU(G,Q),J)});else dY(this,Q,J);return this}function dY(Q,J,X){let Y=!1;function $(G){if(Y)return;Y=!0;let{_readableState:H,_writableState:q}=Q;if(oY(G,q,H),q)q.closed=!0;if(H)H.closed=!0;if(typeof X==="function")X(G);if(G)L1.nextTick(FU,Q,G);else L1.nextTick(rY,Q)}try{Q._destroy(J||null,$)}catch(G){$(G)}}function FU(Q,J){GX(Q,J),rY(Q)}function rY(Q){let{_readableState:J,_writableState:X}=Q;if(X)X.closeEmitted=!0;if(J)J.closeEmitted=!0;if(X!==null&&X!==void 0&&X.emitClose||J!==null&&J!==void 0&&J.emitClose)Q.emit("close")}function GX(Q,J){let{_readableState:X,_writableState:Y}=Q;if(Y!==null&&Y!==void 0&&Y.errorEmitted||X!==null&&X!==void 0&&X.errorEmitted)return;if(Y)Y.errorEmitted=!0;if(X)X.errorEmitted=!0;Q.emit("error",J)}function OU(){let Q=this._readableState,J=this._writableState;if(Q)Q.constructed=!0,Q.closed=!1,Q.closeEmitted=!1,Q.destroyed=!1,Q.errored=null,Q.errorEmitted=!1,Q.reading=!1,Q.ended=Q.readable===!1,Q.endEmitted=Q.readable===!1;if(J)J.constructed=!0,J.destroyed=!1,J.closed=!1,J.closeEmitted=!1,J.errored=null,J.errorEmitted=!1,J.finalCalled=!1,J.prefinished=!1,J.ended=J.writable===!1,J.ending=J.writable===!1,J.finished=J.writable===!1}function HX(Q,J,X){let{_readableState:Y,_writableState:$}=Q;if($!==null&&$!==void 0&&$.destroyed||Y!==null&&Y!==void 0&&Y.destroyed)return this;if(Y!==null&&Y!==void 0&&Y.autoDestroy||$!==null&&$!==void 0&&$.autoDestroy)Q.destroy(J);else if(J){if(J.stack,$&&!$.errored)$.errored=J;if(Y&&!Y.errored)Y.errored=J;if(X)L1.nextTick(GX,Q,J);else GX(Q,J)}}function NU(Q,J){if(typeof Q._construct!=="function")return;let{_readableState:X,_writableState:Y}=Q;if(X)X.constructed=!1;if(Y)Y.constructed=!1;if(Q.once($X,J),Q.listenerCount($X)>1)return;L1.nextTick(jU,Q)}function jU(Q){let J=!1;function X(Y){if(J){HX(Q,Y!==null&&Y!==void 0?Y:new qU);return}J=!0;let{_readableState:$,_writableState:G}=Q,H=G||$;if($)$.constructed=!0;if(G)G.constructed=!0;if(H.destroyed)Q.emit(iY,Y);else if(Y)HX(Q,Y,!0);else L1.nextTick(BU,Q)}try{Q._construct((Y)=>{L1.nextTick(X,Y)})}catch(Y){L1.nextTick(X,Y)}}function BU(Q){Q.emit($X)}function pY(Q){return(Q===null||Q===void 0?void 0:Q.setHeader)&&typeof Q.abort==="function"}function aY(Q){Q.emit("close")}function AU(Q,J){Q.emit("error",J),L1.nextTick(aY,Q)}function DU(Q,J){if(!Q||zU(Q))return;if(!J&&!VU(Q))J=new KU;if(MU(Q))Q.socket=null,Q.destroy(J);else if(pY(Q))Q.abort();else if(pY(Q.req))Q.req.abort();else if(typeof Q.destroy==="function")Q.destroy(J);else if(typeof Q.close==="function")Q.close();else if(J)L1.nextTick(AU,Q,J);else L1.nextTick(aY,Q);if(!Q.destroyed)Q[WU]=!0}sY.exports={construct:NU,destroyer:DU,destroy:UU,undestroy:OU,errorOrDestroy:HX}});var j9=D((BR,eY)=>{var{ArrayIsArray:LU,ObjectSetPrototypeOf:tY}=q0(),{EventEmitter:O9}=y("events");function N9(Q){O9.call(this,Q)}tY(N9.prototype,O9.prototype);tY(N9,O9);N9.prototype.pipe=function(Q,J){let X=this;function Y(V){if(Q.writable&&Q.write(V)===!1&&X.pause)X.pause()}X.on("data",Y);function $(){if(X.readable&&X.resume)X.resume()}if(Q.on("drain",$),!Q._isStdio&&(!J||J.end!==!1))X.on("end",H),X.on("close",q);let G=!1;function H(){if(G)return;G=!0,Q.end()}function q(){if(G)return;if(G=!0,typeof Q.destroy==="function")Q.destroy()}function K(V){if(z(),O9.listenerCount(this,"error")===0)this.emit("error",V)}qX(X,"error",K),qX(Q,"error",K);function z(){X.removeListener("data",Y),Q.removeListener("drain",$),X.removeListener("end",H),X.removeListener("close",q),X.removeListener("error",K),Q.removeListener("error",K),X.removeListener("end",z),X.removeListener("close",z),Q.removeListener("close",z)}return X.on("end",z),X.on("close",z),Q.on("close",z),Q.emit("pipe",X),Q};function qX(Q,J,X){if(typeof Q.prependListener==="function")return Q.prependListener(J,X);if(!Q._events||!Q._events[J])Q.on(J,X);else if(LU(Q._events[J]))Q._events[J].unshift(X);else Q._events[J]=[X,Q._events[J]]}eY.exports={Stream:N9,prependListener:qX}});var H4=D((IU,B9)=>{var{SymbolDispose:CU}=q0(),{AbortError:Q7,codes:PU}=P0(),{isNodeStream:J7,isWebStream:wU,kControllerErrorFunction:EU}=D1(),RU=f1(),{ERR_INVALID_ARG_TYPE:X7}=PU,KX,TU=(Q,J)=>{if(typeof Q!=="object"||!("aborted"in Q))throw new X7(J,"AbortSignal",Q)};IU.addAbortSignal=function Q(J,X){if(TU(J,"signal"),!J7(X)&&!wU(X))throw new X7("stream",["ReadableStream","WritableStream","Stream"],X);return IU.addAbortSignalNoValidate(J,X)};IU.addAbortSignalNoValidate=function(Q,J){if(typeof Q!=="object"||!("aborted"in Q))return J;let X=J7(J)?()=>{J.destroy(new Q7(void 0,{cause:Q.reason}))}:()=>{J[EU](new Q7(void 0,{cause:Q.reason}))};if(Q.aborted)X();else{KX=KX||Z0().addAbortListener;let Y=KX(Q,X);RU(J,Y[CU])}return J}});var G7=D((AR,$7)=>{var{StringPrototypeSlice:Y7,SymbolIterator:_U,TypedArrayPrototypeSet:A9,Uint8Array:xU}=q0(),{Buffer:WX}=y("buffer"),{inspect:hU}=Z0();$7.exports=class Q{constructor(){this.head=null,this.tail=null,this.length=0}push(J){let X={data:J,next:null};if(this.length>0)this.tail.next=X;else this.head=X;this.tail=X,++this.length}unshift(J){let X={data:J,next:this.head};if(this.length===0)this.tail=X;this.head=X,++this.length}shift(){if(this.length===0)return;let J=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;return--this.length,J}clear(){this.head=this.tail=null,this.length=0}join(J){if(this.length===0)return"";let X=this.head,Y=""+X.data;while((X=X.next)!==null)Y+=J+X.data;return Y}concat(J){if(this.length===0)return WX.alloc(0);let X=WX.allocUnsafe(J>>>0),Y=this.head,$=0;while(Y)A9(X,Y.data,$),$+=Y.data.length,Y=Y.next;return X}consume(J,X){let Y=this.head.data;if(J<Y.length){let $=Y.slice(0,J);return this.head.data=Y.slice(J),$}if(J===Y.length)return this.shift();return X?this._getString(J):this._getBuffer(J)}first(){return this.head.data}*[_U](){for(let J=this.head;J;J=J.next)yield J.data}_getString(J){let X="",Y=this.head,$=0;do{let G=Y.data;if(J>G.length)X+=G,J-=G.length;else{if(J===G.length)if(X+=G,++$,Y.next)this.head=Y.next;else this.head=this.tail=null;else X+=Y7(G,0,J),this.head=Y,Y.data=Y7(G,J);break}++$}while((Y=Y.next)!==null);return this.length-=$,X}_getBuffer(J){let X=WX.allocUnsafe(J),Y=J,$=this.head,G=0;do{let H=$.data;if(J>H.length)A9(X,H,Y-J),J-=H.length;else{if(J===H.length)if(A9(X,H,Y-J),++G,$.next)this.head=$.next;else this.head=this.tail=null;else A9(X,new xU(H.buffer,H.byteOffset,J),Y-J),this.head=$,$.data=H.slice(J);break}++G}while(($=$.next)!==null);return this.length-=G,X}[Symbol.for("nodejs.util.inspect.custom")](J,X){return hU(this,{...X,depth:0,customInspect:!1})}}});var q4=D((DR,W7)=>{var{MathFloor:vU,NumberIsInteger:yU}=q0(),{validateInteger:gU}=WQ(),{ERR_INVALID_ARG_VALUE:fU}=P0().codes,H7=16384,q7=16;function kU(Q,J,X){return Q.highWaterMark!=null?Q.highWaterMark:J?Q[X]:null}function K7(Q){return Q?q7:H7}function bU(Q,J){if(gU(J,"value",0),Q)q7=J;else H7=J}function mU(Q,J,X,Y){let $=kU(J,Y,X);if($!=null){if(!yU($)||$<0){let G=Y?`options.${X}`:"options.highWaterMark";throw new fU(G,$)}return vU($)}return K7(Q.objectMode)}W7.exports={getHighWaterMark:mU,getDefaultHighWaterMark:K7,setDefaultHighWaterMark:bU}});var M7=D((zX,V7)=>{/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var D9=y("buffer"),C1=D9.Buffer;function z7(Q,J){for(var X in Q)J[X]=Q[X]}if(C1.from&&C1.alloc&&C1.allocUnsafe&&C1.allocUnsafeSlow)V7.exports=D9;else z7(D9,zX),zX.Buffer=I8;function I8(Q,J,X){return C1(Q,J,X)}I8.prototype=Object.create(C1.prototype);z7(C1,I8);I8.from=function(Q,J,X){if(typeof Q==="number")throw new TypeError("Argument must not be a number");return C1(Q,J,X)};I8.alloc=function(Q,J,X){if(typeof Q!=="number")throw new TypeError("Argument must be a number");var Y=C1(Q);if(J!==void 0)if(typeof X==="string")Y.fill(J,X);else Y.fill(J);else Y.fill(0);return Y};I8.allocUnsafe=function(Q){if(typeof Q!=="number")throw new TypeError("Argument must be a number");return C1(Q)};I8.allocUnsafeSlow=function(Q){if(typeof Q!=="number")throw new TypeError("Argument must be a number");return D9.SlowBuffer(Q)}});var F7=D((QF)=>{var MX=M7().Buffer,U7=MX.isEncoding||function(Q){switch(Q=""+Q,Q&&Q.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function uU(Q){if(!Q)return"utf8";var J;while(!0)switch(Q){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return Q;default:if(J)return;Q=(""+Q).toLowerCase(),J=!0}}function lU(Q){var J=uU(Q);if(typeof J!=="string"&&(MX.isEncoding===U7||!U7(Q)))throw new Error("Unknown encoding: "+Q);return J||Q}QF.StringDecoder=K4;function K4(Q){this.encoding=lU(Q);var J;switch(this.encoding){case"utf16le":this.text=oU,this.end=rU,J=4;break;case"utf8":this.fillLast=pU,J=4;break;case"base64":this.text=aU,this.end=sU,J=3;break;default:this.write=tU,this.end=eU;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=MX.allocUnsafe(J)}K4.prototype.write=function(Q){if(Q.length===0)return"";var J,X;if(this.lastNeed){if(J=this.fillLast(Q),J===void 0)return"";X=this.lastNeed,this.lastNeed=0}else X=0;if(X<Q.length)return J?J+this.text(Q,X):this.text(Q,X);return J||""};K4.prototype.end=iU;K4.prototype.text=nU;K4.prototype.fillLast=function(Q){if(this.lastNeed<=Q.length)return Q.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);Q.copy(this.lastChar,this.lastTotal-this.lastNeed,0,Q.length),this.lastNeed-=Q.length};function VX(Q){if(Q<=127)return 0;else if(Q>>5===6)return 2;else if(Q>>4===14)return 3;else if(Q>>3===30)return 4;return Q>>6===2?-1:-2}function cU(Q,J,X){var Y=J.length-1;if(Y<X)return 0;var $=VX(J[Y]);if($>=0){if($>0)Q.lastNeed=$-1;return $}if(--Y<X||$===-2)return 0;if($=VX(J[Y]),$>=0){if($>0)Q.lastNeed=$-2;return $}if(--Y<X||$===-2)return 0;if($=VX(J[Y]),$>=0){if($>0)if($===2)$=0;else Q.lastNeed=$-3;return $}return 0}function dU(Q,J,X){if((J[0]&192)!==128)return Q.lastNeed=0,"�";if(Q.lastNeed>1&&J.length>1){if((J[1]&192)!==128)return Q.lastNeed=1,"�";if(Q.lastNeed>2&&J.length>2){if((J[2]&192)!==128)return Q.lastNeed=2,"�"}}}function pU(Q){var J=this.lastTotal-this.lastNeed,X=dU(this,Q,J);if(X!==void 0)return X;if(this.lastNeed<=Q.length)return Q.copy(this.lastChar,J,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);Q.copy(this.lastChar,J,0,Q.length),this.lastNeed-=Q.length}function nU(Q,J){var X=cU(this,Q,J);if(!this.lastNeed)return Q.toString("utf8",J);this.lastTotal=X;var Y=Q.length-(X-this.lastNeed);return Q.copy(this.lastChar,0,Y),Q.toString("utf8",J,Y)}function iU(Q){var J=Q&&Q.length?this.write(Q):"";if(this.lastNeed)return J+"�";return J}function oU(Q,J){if((Q.length-J)%2===0){var X=Q.toString("utf16le",J);if(X){var Y=X.charCodeAt(X.length-1);if(Y>=55296&&Y<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=Q[Q.length-2],this.lastChar[1]=Q[Q.length-1],X.slice(0,-1)}return X}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=Q[Q.length-1],Q.toString("utf16le",J,Q.length-1)}function rU(Q){var J=Q&&Q.length?this.write(Q):"";if(this.lastNeed){var X=this.lastTotal-this.lastNeed;return J+this.lastChar.toString("utf16le",0,X)}return J}function aU(Q,J){var X=(Q.length-J)%3;if(X===0)return Q.toString("base64",J);if(this.lastNeed=3-X,this.lastTotal=3,X===1)this.lastChar[0]=Q[Q.length-1];else this.lastChar[0]=Q[Q.length-2],this.lastChar[1]=Q[Q.length-1];return Q.toString("base64",J,Q.length-X)}function sU(Q){var J=Q&&Q.length?this.write(Q):"";if(this.lastNeed)return J+this.lastChar.toString("base64",0,3-this.lastNeed);return J}function tU(Q){return Q.toString(this.encoding)}function eU(Q){return Q&&Q.length?this.write(Q):""}});var UX=D((CR,B7)=>{var O7=e1(),{PromisePrototypeThen:XF,SymbolAsyncIterator:N7,SymbolIterator:j7}=q0(),{Buffer:YF}=y("buffer"),{ERR_INVALID_ARG_TYPE:$F,ERR_STREAM_NULL_VALUES:GF}=P0().codes;function HF(Q,J,X){let Y;if(typeof J==="string"||J instanceof YF)return new Q({objectMode:!0,...X,read(){this.push(J),this.push(null)}});let $;if(J&&J[N7])$=!0,Y=J[N7]();else if(J&&J[j7])$=!1,Y=J[j7]();else throw new $F("iterable",["Iterable"],J);let G=new Q({objectMode:!0,highWaterMark:1,...X}),H=!1;G._read=function(){if(!H)H=!0,K()},G._destroy=function(z,V){XF(q(z),()=>O7.nextTick(V,z),(F)=>O7.nextTick(V,F||z))};async function q(z){let V=z!==void 0&&z!==null,F=typeof Y.throw==="function";if(V&&F){let{value:O,done:N}=await Y.throw(z);if(await O,N)return}if(typeof Y.return==="function"){let{value:O}=await Y.return();await O}}async function K(){for(;;){try{let{value:z,done:V}=$?await Y.next():Y.next();if(V)G.push(null);else{let F=z&&typeof z.then==="function"?await z:z;if(F===null)throw H=!1,new GF;else if(G.push(F))continue;else H=!1}}catch(z){G.destroy(z)}break}}return G}B7.exports=HF});var z4=D((PR,g7)=>{var $1=e1(),{ArrayPrototypeIndexOf:qF,NumberIsInteger:KF,NumberIsNaN:WF,NumberParseInt:zF,ObjectDefineProperties:LX,ObjectKeys:VF,ObjectSetPrototypeOf:L7,Promise:C7,SafeSet:MF,SymbolAsyncDispose:UF,SymbolAsyncIterator:FF,Symbol:OF}=q0();g7.exports=p;p.ReadableState=w9;var{EventEmitter:NF}=y("events"),{Stream:J8,prependListener:jF}=j9(),{Buffer:FX}=y("buffer"),{addAbortSignal:BF}=H4(),P7=f1(),r=Z0().debuglog("stream",(Q)=>{r=Q}),AF=G7(),UQ=T8(),{getHighWaterMark:DF,getDefaultHighWaterMark:LF}=q4(),{aggregateTwoErrors:A7,codes:{ERR_INVALID_ARG_TYPE:CF,ERR_METHOD_NOT_IMPLEMENTED:PF,ERR_OUT_OF_RANGE:wF,ERR_STREAM_PUSH_AFTER_EOF:EF,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:RF},AbortError:TF}=P0(),{validateObject:IF}=WQ(),Z8=OF("kPaused"),{StringDecoder:w7}=F7(),ZF=UX();L7(p.prototype,J8.prototype);L7(p,J8);var OX=()=>{},{errorOrDestroy:VQ}=UQ,MQ=1,SF=2,E7=4,W4=8,R7=16,L9=32,C9=64,T7=128,_F=256,xF=512,hF=1024,AX=2048,DX=4096,vF=8192,yF=16384,gF=32768,I7=65536,fF=131072,kF=262144;function M0(Q){return{enumerable:!1,get(){return(this.state&Q)!==0},set(J){if(J)this.state|=Q;else this.state&=~Q}}}LX(w9.prototype,{objectMode:M0(MQ),ended:M0(SF),endEmitted:M0(E7),reading:M0(W4),constructed:M0(R7),sync:M0(L9),needReadable:M0(C9),emittedReadable:M0(T7),readableListening:M0(_F),resumeScheduled:M0(xF),errorEmitted:M0(hF),emitClose:M0(AX),autoDestroy:M0(DX),destroyed:M0(vF),closed:M0(yF),closeEmitted:M0(gF),multiAwaitDrain:M0(I7),readingMore:M0(fF),dataEmitted:M0(kF)});function w9(Q,J,X){if(typeof X!=="boolean")X=J instanceof P1();if(this.state=AX|DX|R7|L9,Q&&Q.objectMode)this.state|=MQ;if(X&&Q&&Q.readableObjectMode)this.state|=MQ;if(this.highWaterMark=Q?DF(this,Q,"readableHighWaterMark",X):LF(!1),this.buffer=new AF,this.length=0,this.pipes=[],this.flowing=null,this[Z8]=null,Q&&Q.emitClose===!1)this.state&=~AX;if(Q&&Q.autoDestroy===!1)this.state&=~DX;if(this.errored=null,this.defaultEncoding=Q&&Q.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,Q&&Q.encoding)this.decoder=new w7(Q.encoding),this.encoding=Q.encoding}function p(Q){if(!(this instanceof p))return new p(Q);let J=this instanceof P1();if(this._readableState=new w9(Q,this,J),Q){if(typeof Q.read==="function")this._read=Q.read;if(typeof Q.destroy==="function")this._destroy=Q.destroy;if(typeof Q.construct==="function")this._construct=Q.construct;if(Q.signal&&!J)BF(Q.signal,this)}J8.call(this,Q),UQ.construct(this,()=>{if(this._readableState.needReadable)P9(this,this._readableState)})}p.prototype.destroy=UQ.destroy;p.prototype._undestroy=UQ.undestroy;p.prototype._destroy=function(Q,J){J(Q)};p.prototype[NF.captureRejectionSymbol]=function(Q){this.destroy(Q)};p.prototype[UF]=function(){let Q;if(!this.destroyed)Q=this.readableEnded?null:new TF,this.destroy(Q);return new C7((J,X)=>P7(this,(Y)=>Y&&Y!==Q?X(Y):J(null)))};p.prototype.push=function(Q,J){return Z7(this,Q,J,!1)};p.prototype.unshift=function(Q,J){return Z7(this,Q,J,!0)};function Z7(Q,J,X,Y){r("readableAddChunk",J);let $=Q._readableState,G;if(($.state&MQ)===0){if(typeof J==="string"){if(X=X||$.defaultEncoding,$.encoding!==X)if(Y&&$.encoding)J=FX.from(J,X).toString($.encoding);else J=FX.from(J,X),X=""}else if(J instanceof FX)X="";else if(J8._isUint8Array(J))J=J8._uint8ArrayToBuffer(J),X="";else if(J!=null)G=new CF("chunk",["string","Buffer","Uint8Array"],J)}if(G)VQ(Q,G);else if(J===null)$.state&=~W4,uF(Q,$);else if(($.state&MQ)!==0||J&&J.length>0)if(Y)if(($.state&E7)!==0)VQ(Q,new RF);else if($.destroyed||$.errored)return!1;else NX(Q,$,J,!0);else if($.ended)VQ(Q,new EF);else if($.destroyed||$.errored)return!1;else if($.state&=~W4,$.decoder&&!X)if(J=$.decoder.write(J),$.objectMode||J.length!==0)NX(Q,$,J,!1);else P9(Q,$);else NX(Q,$,J,!1);else if(!Y)$.state&=~W4,P9(Q,$);return!$.ended&&($.length<$.highWaterMark||$.length===0)}function NX(Q,J,X,Y){if(J.flowing&&J.length===0&&!J.sync&&Q.listenerCount("data")>0){if((J.state&I7)!==0)J.awaitDrainWriters.clear();else J.awaitDrainWriters=null;J.dataEmitted=!0,Q.emit("data",X)}else{if(J.length+=J.objectMode?1:X.length,Y)J.buffer.unshift(X);else J.buffer.push(X);if((J.state&C9)!==0)E9(Q)}P9(Q,J)}p.prototype.isPaused=function(){let Q=this._readableState;return Q[Z8]===!0||Q.flowing===!1};p.prototype.setEncoding=function(Q){let J=new w7(Q);this._readableState.decoder=J,this._readableState.encoding=this._readableState.decoder.encoding;let X=this._readableState.buffer,Y="";for(let $ of X)Y+=J.write($);if(X.clear(),Y!=="")X.push(Y);return this._readableState.length=Y.length,this};var bF=1073741824;function mF(Q){if(Q>bF)throw new wF("size","<= 1GiB",Q);else Q--,Q|=Q>>>1,Q|=Q>>>2,Q|=Q>>>4,Q|=Q>>>8,Q|=Q>>>16,Q++;return Q}function D7(Q,J){if(Q<=0||J.length===0&&J.ended)return 0;if((J.state&MQ)!==0)return 1;if(WF(Q)){if(J.flowing&&J.length)return J.buffer.first().length;return J.length}if(Q<=J.length)return Q;return J.ended?J.length:0}p.prototype.read=function(Q){if(r("read",Q),Q===void 0)Q=NaN;else if(!KF(Q))Q=zF(Q,10);let J=this._readableState,X=Q;if(Q>J.highWaterMark)J.highWaterMark=mF(Q);if(Q!==0)J.state&=~T7;if(Q===0&&J.needReadable&&((J.highWaterMark!==0?J.length>=J.highWaterMark:J.length>0)||J.ended)){if(r("read: emitReadable",J.length,J.ended),J.length===0&&J.ended)jX(this);else E9(this);return null}if(Q=D7(Q,J),Q===0&&J.ended){if(J.length===0)jX(this);return null}let Y=(J.state&C9)!==0;if(r("need readable",Y),J.length===0||J.length-Q<J.highWaterMark)Y=!0,r("length less than watermark",Y);if(J.ended||J.reading||J.destroyed||J.errored||!J.constructed)Y=!1,r("reading, ended or constructing",Y);else if(Y){if(r("do read"),J.state|=W4|L9,J.length===0)J.state|=C9;try{this._read(J.highWaterMark)}catch(G){VQ(this,G)}if(J.state&=~L9,!J.reading)Q=D7(X,J)}let $;if(Q>0)$=v7(Q,J);else $=null;if($===null)J.needReadable=J.length<=J.highWaterMark,Q=0;else if(J.length-=Q,J.multiAwaitDrain)J.awaitDrainWriters.clear();else J.awaitDrainWriters=null;if(J.length===0){if(!J.ended)J.needReadable=!0;if(X!==Q&&J.ended)jX(this)}if($!==null&&!J.errorEmitted&&!J.closeEmitted)J.dataEmitted=!0,this.emit("data",$);return $};function uF(Q,J){if(r("onEofChunk"),J.ended)return;if(J.decoder){let X=J.decoder.end();if(X&&X.length)J.buffer.push(X),J.length+=J.objectMode?1:X.length}if(J.ended=!0,J.sync)E9(Q);else J.needReadable=!1,J.emittedReadable=!0,S7(Q)}function E9(Q){let J=Q._readableState;if(r("emitReadable",J.needReadable,J.emittedReadable),J.needReadable=!1,!J.emittedReadable)r("emitReadable",J.flowing),J.emittedReadable=!0,$1.nextTick(S7,Q)}function S7(Q){let J=Q._readableState;if(r("emitReadable_",J.destroyed,J.length,J.ended),!J.destroyed&&!J.errored&&(J.length||J.ended))Q.emit("readable"),J.emittedReadable=!1;J.needReadable=!J.flowing&&!J.ended&&J.length<=J.highWaterMark,x7(Q)}function P9(Q,J){if(!J.readingMore&&J.constructed)J.readingMore=!0,$1.nextTick(lF,Q,J)}function lF(Q,J){while(!J.reading&&!J.ended&&(J.length<J.highWaterMark||J.flowing&&J.length===0)){let X=J.length;if(r("maybeReadMore read 0"),Q.read(0),X===J.length)break}J.readingMore=!1}p.prototype._read=function(Q){throw new PF("_read()")};p.prototype.pipe=function(Q,J){let X=this,Y=this._readableState;if(Y.pipes.length===1){if(!Y.multiAwaitDrain)Y.multiAwaitDrain=!0,Y.awaitDrainWriters=new MF(Y.awaitDrainWriters?[Y.awaitDrainWriters]:[])}Y.pipes.push(Q),r("pipe count=%d opts=%j",Y.pipes.length,J);let G=(!J||J.end!==!1)&&Q!==$1.stdout&&Q!==$1.stderr?q:L;if(Y.endEmitted)$1.nextTick(G);else X.once("end",G);Q.on("unpipe",H);function H(C,P){if(r("onunpipe"),C===X){if(P&&P.hasUnpiped===!1)P.hasUnpiped=!0,V()}}function q(){r("onend"),Q.end()}let K,z=!1;function V(){if(r("cleanup"),Q.removeListener("close",A),Q.removeListener("finish",B),K)Q.removeListener("drain",K);if(Q.removeListener("error",N),Q.removeListener("unpipe",H),X.removeListener("end",q),X.removeListener("end",L),X.removeListener("data",O),z=!0,K&&Y.awaitDrainWriters&&(!Q._writableState||Q._writableState.needDrain))K()}function F(){if(!z){if(Y.pipes.length===1&&Y.pipes[0]===Q)r("false write response, pause",0),Y.awaitDrainWriters=Q,Y.multiAwaitDrain=!1;else if(Y.pipes.length>1&&Y.pipes.includes(Q))r("false write response, pause",Y.awaitDrainWriters.size),Y.awaitDrainWriters.add(Q);X.pause()}if(!K)K=cF(X,Q),Q.on("drain",K)}X.on("data",O);function O(C){r("ondata");let P=Q.write(C);if(r("dest.write",P),P===!1)F()}function N(C){if(r("onerror",C),L(),Q.removeListener("error",N),Q.listenerCount("error")===0){let P=Q._writableState||Q._readableState;if(P&&!P.errorEmitted)VQ(Q,C);else Q.emit("error",C)}}jF(Q,"error",N);function A(){Q.removeListener("finish",B),L()}Q.once("close",A);function B(){r("onfinish"),Q.removeListener("close",A),L()}Q.once("finish",B);function L(){r("unpipe"),X.unpipe(Q)}if(Q.emit("pipe",X),Q.writableNeedDrain===!0)F();else if(!Y.flowing)r("pipe resume"),X.resume();return Q};function cF(Q,J){return function X(){let Y=Q._readableState;if(Y.awaitDrainWriters===J)r("pipeOnDrain",1),Y.awaitDrainWriters=null;else if(Y.multiAwaitDrain)r("pipeOnDrain",Y.awaitDrainWriters.size),Y.awaitDrainWriters.delete(J);if((!Y.awaitDrainWriters||Y.awaitDrainWriters.size===0)&&Q.listenerCount("data"))Q.resume()}}p.prototype.unpipe=function(Q){let J=this._readableState,X={hasUnpiped:!1};if(J.pipes.length===0)return this;if(!Q){let $=J.pipes;J.pipes=[],this.pause();for(let G=0;G<$.length;G++)$[G].emit("unpipe",this,{hasUnpiped:!1});return this}let Y=qF(J.pipes,Q);if(Y===-1)return this;if(J.pipes.splice(Y,1),J.pipes.length===0)this.pause();return Q.emit("unpipe",this,X),this};p.prototype.on=function(Q,J){let X=J8.prototype.on.call(this,Q,J),Y=this._readableState;if(Q==="data"){if(Y.readableListening=this.listenerCount("readable")>0,Y.flowing!==!1)this.resume()}else if(Q==="readable"){if(!Y.endEmitted&&!Y.readableListening){if(Y.readableListening=Y.needReadable=!0,Y.flowing=!1,Y.emittedReadable=!1,r("on readable",Y.length,Y.reading),Y.length)E9(this);else if(!Y.reading)$1.nextTick(dF,this)}}return X};p.prototype.addListener=p.prototype.on;p.prototype.removeListener=function(Q,J){let X=J8.prototype.removeListener.call(this,Q,J);if(Q==="readable")$1.nextTick(_7,this);return X};p.prototype.off=p.prototype.removeListener;p.prototype.removeAllListeners=function(Q){let J=J8.prototype.removeAllListeners.apply(this,arguments);if(Q==="readable"||Q===void 0)$1.nextTick(_7,this);return J};function _7(Q){let J=Q._readableState;if(J.readableListening=Q.listenerCount("readable")>0,J.resumeScheduled&&J[Z8]===!1)J.flowing=!0;else if(Q.listenerCount("data")>0)Q.resume();else if(!J.readableListening)J.flowing=null}function dF(Q){r("readable nexttick read 0"),Q.read(0)}p.prototype.resume=function(){let Q=this._readableState;if(!Q.flowing)r("resume"),Q.flowing=!Q.readableListening,pF(this,Q);return Q[Z8]=!1,this};function pF(Q,J){if(!J.resumeScheduled)J.resumeScheduled=!0,$1.nextTick(nF,Q,J)}function nF(Q,J){if(r("resume",J.reading),!J.reading)Q.read(0);if(J.resumeScheduled=!1,Q.emit("resume"),x7(Q),J.flowing&&!J.reading)Q.read(0)}p.prototype.pause=function(){if(r("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1)r("pause"),this._readableState.flowing=!1,this.emit("pause");return this._readableState[Z8]=!0,this};function x7(Q){let J=Q._readableState;r("flow",J.flowing);while(J.flowing&&Q.read()!==null);}p.prototype.wrap=function(Q){let J=!1;Q.on("data",(Y)=>{if(!this.push(Y)&&Q.pause)J=!0,Q.pause()}),Q.on("end",()=>{this.push(null)}),Q.on("error",(Y)=>{VQ(this,Y)}),Q.on("close",()=>{this.destroy()}),Q.on("destroy",()=>{this.destroy()}),this._read=()=>{if(J&&Q.resume)J=!1,Q.resume()};let X=VF(Q);for(let Y=1;Y<X.length;Y++){let $=X[Y];if(this[$]===void 0&&typeof Q[$]==="function")this[$]=Q[$].bind(Q)}return this};p.prototype[FF]=function(){return h7(this)};p.prototype.iterator=function(Q){if(Q!==void 0)IF(Q,"options");return h7(this,Q)};function h7(Q,J){if(typeof Q.read!=="function")Q=p.wrap(Q,{objectMode:!0});let X=iF(Q,J);return X.stream=Q,X}async function*iF(Q,J){let X=OX;function Y(H){if(this===Q)X(),X=OX;else X=H}Q.on("readable",Y);let $,G=P7(Q,{writable:!1},(H)=>{$=H?A7($,H):null,X(),X=OX});try{while(!0){let H=Q.destroyed?null:Q.read();if(H!==null)yield H;else if($)throw $;else if($===null)return;else await new C7(Y)}}catch(H){throw $=A7($,H),$}finally{if(($||(J===null||J===void 0?void 0:J.destroyOnReturn)!==!1)&&($===void 0||Q._readableState.autoDestroy))UQ.destroyer(Q,null);else Q.off("readable",Y),G()}}LX(p.prototype,{readable:{__proto__:null,get(){let Q=this._readableState;return!!Q&&Q.readable!==!1&&!Q.destroyed&&!Q.errorEmitted&&!Q.endEmitted},set(Q){if(this._readableState)this._readableState.readable=!!Q}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(Q){if(this._readableState)this._readableState.flowing=Q}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(Q){if(!this._readableState)return;this._readableState.destroyed=Q}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});LX(w9.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Z8]!==!1},set(Q){this[Z8]=!!Q}}});p._fromList=v7;function v7(Q,J){if(J.length===0)return null;let X;if(J.objectMode)X=J.buffer.shift();else if(!Q||Q>=J.length){if(J.decoder)X=J.buffer.join("");else if(J.buffer.length===1)X=J.buffer.first();else X=J.buffer.concat(J.length);J.buffer.clear()}else X=J.buffer.consume(Q,J.decoder);return X}function jX(Q){let J=Q._readableState;if(r("endReadable",J.endEmitted),!J.endEmitted)J.ended=!0,$1.nextTick(oF,J,Q)}function oF(Q,J){if(r("endReadableNT",Q.endEmitted,Q.length),!Q.errored&&!Q.closeEmitted&&!Q.endEmitted&&Q.length===0){if(Q.endEmitted=!0,J.emit("end"),J.writable&&J.allowHalfOpen===!1)$1.nextTick(rF,J);else if(Q.autoDestroy){let X=J._writableState;if(!X||X.autoDestroy&&(X.finished||X.writable===!1))J.destroy()}}}function rF(Q){if(Q.writable&&!Q.writableEnded&&!Q.destroyed)Q.end()}p.from=function(Q,J){return ZF(p,Q,J)};var BX;function y7(){if(BX===void 0)BX={};return BX}p.fromWeb=function(Q,J){return y7().newStreamReadableFromReadableStream(Q,J)};p.toWeb=function(Q,J){return y7().newReadableStreamFromStreamReadable(Q,J)};p.wrap=function(Q,J){var X,Y;return new p({objectMode:(X=(Y=Q.readableObjectMode)!==null&&Y!==void 0?Y:Q.objectMode)!==null&&X!==void 0?X:!0,...J,destroy($,G){UQ.destroyer(Q,$),G($)}}).wrap(Q)}});var S9=D((wR,o7)=>{var S8=e1(),{ArrayPrototypeSlice:b7,Error:aF,FunctionPrototypeSymbolHasInstance:m7,ObjectDefineProperty:u7,ObjectDefineProperties:sF,ObjectSetPrototypeOf:l7,StringPrototypeToLowerCase:tF,Symbol:eF,SymbolHasInstance:QO}=q0();o7.exports=K0;K0.WritableState=U4;var{EventEmitter:JO}=y("events"),V4=j9().Stream,{Buffer:R9}=y("buffer"),Z9=T8(),{addAbortSignal:XO}=H4(),{getHighWaterMark:YO,getDefaultHighWaterMark:$O}=q4(),{ERR_INVALID_ARG_TYPE:GO,ERR_METHOD_NOT_IMPLEMENTED:HO,ERR_MULTIPLE_CALLBACK:c7,ERR_STREAM_CANNOT_PIPE:qO,ERR_STREAM_DESTROYED:M4,ERR_STREAM_ALREADY_FINISHED:KO,ERR_STREAM_NULL_VALUES:WO,ERR_STREAM_WRITE_AFTER_END:zO,ERR_UNKNOWN_ENCODING:d7}=P0().codes,{errorOrDestroy:FQ}=Z9;l7(K0.prototype,V4.prototype);l7(K0,V4);function wX(){}var OQ=eF("kOnFinished");function U4(Q,J,X){if(typeof X!=="boolean")X=J instanceof P1();if(this.objectMode=!!(Q&&Q.objectMode),X)this.objectMode=this.objectMode||!!(Q&&Q.writableObjectMode);this.highWaterMark=Q?YO(this,Q,"writableHighWaterMark",X):$O(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let Y=!!(Q&&Q.decodeStrings===!1);this.decodeStrings=!Y,this.defaultEncoding=Q&&Q.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=MO.bind(void 0,J),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,I9(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!Q||Q.emitClose!==!1,this.autoDestroy=!Q||Q.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[OQ]=[]}function I9(Q){Q.buffered=[],Q.bufferedIndex=0,Q.allBuffers=!0,Q.allNoop=!0}U4.prototype.getBuffer=function Q(){return b7(this.buffered,this.bufferedIndex)};u7(U4.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function K0(Q){let J=this instanceof P1();if(!J&&!m7(K0,this))return new K0(Q);if(this._writableState=new U4(Q,this,J),Q){if(typeof Q.write==="function")this._write=Q.write;if(typeof Q.writev==="function")this._writev=Q.writev;if(typeof Q.destroy==="function")this._destroy=Q.destroy;if(typeof Q.final==="function")this._final=Q.final;if(typeof Q.construct==="function")this._construct=Q.construct;if(Q.signal)XO(Q.signal,this)}V4.call(this,Q),Z9.construct(this,()=>{let X=this._writableState;if(!X.writing)RX(this,X);TX(this,X)})}u7(K0,QO,{__proto__:null,value:function(Q){if(m7(this,Q))return!0;if(this!==K0)return!1;return Q&&Q._writableState instanceof U4}});K0.prototype.pipe=function(){FQ(this,new qO)};function p7(Q,J,X,Y){let $=Q._writableState;if(typeof X==="function")Y=X,X=$.defaultEncoding;else{if(!X)X=$.defaultEncoding;else if(X!=="buffer"&&!R9.isEncoding(X))throw new d7(X);if(typeof Y!=="function")Y=wX}if(J===null)throw new WO;else if(!$.objectMode)if(typeof J==="string"){if($.decodeStrings!==!1)J=R9.from(J,X),X="buffer"}else if(J instanceof R9)X="buffer";else if(V4._isUint8Array(J))J=V4._uint8ArrayToBuffer(J),X="buffer";else throw new GO("chunk",["string","Buffer","Uint8Array"],J);let G;if($.ending)G=new zO;else if($.destroyed)G=new M4("write");if(G)return S8.nextTick(Y,G),FQ(Q,G,!0),G;return $.pendingcb++,VO(Q,$,J,X,Y)}K0.prototype.write=function(Q,J,X){return p7(this,Q,J,X)===!0};K0.prototype.cork=function(){this._writableState.corked++};K0.prototype.uncork=function(){let Q=this._writableState;if(Q.corked){if(Q.corked--,!Q.writing)RX(this,Q)}};K0.prototype.setDefaultEncoding=function Q(J){if(typeof J==="string")J=tF(J);if(!R9.isEncoding(J))throw new d7(J);return this._writableState.defaultEncoding=J,this};function VO(Q,J,X,Y,$){let G=J.objectMode?1:X.length;J.length+=G;let H=J.length<J.highWaterMark;if(!H)J.needDrain=!0;if(J.writing||J.corked||J.errored||!J.constructed){if(J.buffered.push({chunk:X,encoding:Y,callback:$}),J.allBuffers&&Y!=="buffer")J.allBuffers=!1;if(J.allNoop&&$!==wX)J.allNoop=!1}else J.writelen=G,J.writecb=$,J.writing=!0,J.sync=!0,Q._write(X,Y,J.onwrite),J.sync=!1;return H&&!J.errored&&!J.destroyed}function f7(Q,J,X,Y,$,G,H){if(J.writelen=Y,J.writecb=H,J.writing=!0,J.sync=!0,J.destroyed)J.onwrite(new M4("write"));else if(X)Q._writev($,J.onwrite);else Q._write($,G,J.onwrite);J.sync=!1}function k7(Q,J,X,Y){--J.pendingcb,Y(X),EX(J),FQ(Q,X)}function MO(Q,J){let X=Q._writableState,Y=X.sync,$=X.writecb;if(typeof $!=="function"){FQ(Q,new c7);return}if(X.writing=!1,X.writecb=null,X.length-=X.writelen,X.writelen=0,J){if(J.stack,!X.errored)X.errored=J;if(Q._readableState&&!Q._readableState.errored)Q._readableState.errored=J;if(Y)S8.nextTick(k7,Q,X,J,$);else k7(Q,X,J,$)}else{if(X.buffered.length>X.bufferedIndex)RX(Q,X);if(Y)if(X.afterWriteTickInfo!==null&&X.afterWriteTickInfo.cb===$)X.afterWriteTickInfo.count++;else X.afterWriteTickInfo={count:1,cb:$,stream:Q,state:X},S8.nextTick(UO,X.afterWriteTickInfo);else n7(Q,X,1,$)}}function UO({stream:Q,state:J,count:X,cb:Y}){return J.afterWriteTickInfo=null,n7(Q,J,X,Y)}function n7(Q,J,X,Y){if(!J.ending&&!Q.destroyed&&J.length===0&&J.needDrain)J.needDrain=!1,Q.emit("drain");while(X-- >0)J.pendingcb--,Y();if(J.destroyed)EX(J);TX(Q,J)}function EX(Q){if(Q.writing)return;for(let $=Q.bufferedIndex;$<Q.buffered.length;++$){var J;let{chunk:G,callback:H}=Q.buffered[$],q=Q.objectMode?1:G.length;Q.length-=q,H((J=Q.errored)!==null&&J!==void 0?J:new M4("write"))}let X=Q[OQ].splice(0);for(let $=0;$<X.length;$++){var Y;X[$]((Y=Q.errored)!==null&&Y!==void 0?Y:new M4("end"))}I9(Q)}function RX(Q,J){if(J.corked||J.bufferProcessing||J.destroyed||!J.constructed)return;let{buffered:X,bufferedIndex:Y,objectMode:$}=J,G=X.length-Y;if(!G)return;let H=Y;if(J.bufferProcessing=!0,G>1&&Q._writev){J.pendingcb-=G-1;let q=J.allNoop?wX:(z)=>{for(let V=H;V<X.length;++V)X[V].callback(z)},K=J.allNoop&&H===0?X:b7(X,H);K.allBuffers=J.allBuffers,f7(Q,J,!0,J.length,K,"",q),I9(J)}else{do{let{chunk:q,encoding:K,callback:z}=X[H];X[H++]=null;let V=$?1:q.length;f7(Q,J,!1,V,q,K,z)}while(H<X.length&&!J.writing);if(H===X.length)I9(J);else if(H>256)X.splice(0,H),J.bufferedIndex=0;else J.bufferedIndex=H}J.bufferProcessing=!1}K0.prototype._write=function(Q,J,X){if(this._writev)this._writev([{chunk:Q,encoding:J}],X);else throw new HO("_write()")};K0.prototype._writev=null;K0.prototype.end=function(Q,J,X){let Y=this._writableState;if(typeof Q==="function")X=Q,Q=null,J=null;else if(typeof J==="function")X=J,J=null;let $;if(Q!==null&&Q!==void 0){let G=p7(this,Q,J);if(G instanceof aF)$=G}if(Y.corked)Y.corked=1,this.uncork();if($);else if(!Y.errored&&!Y.ending)Y.ending=!0,TX(this,Y,!0),Y.ended=!0;else if(Y.finished)$=new KO("end");else if(Y.destroyed)$=new M4("end");if(typeof X==="function")if($||Y.finished)S8.nextTick(X,$);else Y[OQ].push(X);return this};function T9(Q){return Q.ending&&!Q.destroyed&&Q.constructed&&Q.length===0&&!Q.errored&&Q.buffered.length===0&&!Q.finished&&!Q.writing&&!Q.errorEmitted&&!Q.closeEmitted}function FO(Q,J){let X=!1;function Y($){if(X){FQ(Q,$!==null&&$!==void 0?$:c7());return}if(X=!0,J.pendingcb--,$){let G=J[OQ].splice(0);for(let H=0;H<G.length;H++)G[H]($);FQ(Q,$,J.sync)}else if(T9(J))J.prefinished=!0,Q.emit("prefinish"),J.pendingcb++,S8.nextTick(PX,Q,J)}J.sync=!0,J.pendingcb++;try{Q._final(Y)}catch($){Y($)}J.sync=!1}function OO(Q,J){if(!J.prefinished&&!J.finalCalled)if(typeof Q._final==="function"&&!J.destroyed)J.finalCalled=!0,FO(Q,J);else J.prefinished=!0,Q.emit("prefinish")}function TX(Q,J,X){if(T9(J)){if(OO(Q,J),J.pendingcb===0){if(X)J.pendingcb++,S8.nextTick((Y,$)=>{if(T9($))PX(Y,$);else $.pendingcb--},Q,J);else if(T9(J))J.pendingcb++,PX(Q,J)}}}function PX(Q,J){J.pendingcb--,J.finished=!0;let X=J[OQ].splice(0);for(let Y=0;Y<X.length;Y++)X[Y]();if(Q.emit("finish"),J.autoDestroy){let Y=Q._readableState;if(!Y||Y.autoDestroy&&(Y.endEmitted||Y.readable===!1))Q.destroy()}}sF(K0.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(Q){if(this._writableState)this._writableState.destroyed=Q}},writable:{__proto__:null,get(){let Q=this._writableState;return!!Q&&Q.writable!==!1&&!Q.destroyed&&!Q.errored&&!Q.ending&&!Q.ended},set(Q){if(this._writableState)this._writableState.writable=!!Q}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let Q=this._writableState;if(!Q)return!1;return!Q.destroyed&&!Q.ending&&Q.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var NO=Z9.destroy;K0.prototype.destroy=function(Q,J){let X=this._writableState;if(!X.destroyed&&(X.bufferedIndex<X.buffered.length||X[OQ].length))S8.nextTick(EX,X);return NO.call(this,Q,J),this};K0.prototype._undestroy=Z9.undestroy;K0.prototype._destroy=function(Q,J){J(Q)};K0.prototype[JO.captureRejectionSymbol]=function(Q){this.destroy(Q)};var CX;function i7(){if(CX===void 0)CX={};return CX}K0.fromWeb=function(Q,J){return i7().newStreamWritableFromWritableStream(Q,J)};K0.toWeb=function(Q){return i7().newWritableStreamFromStreamWritable(Q)}});var W$=D((ER,K$)=>{var IX=e1(),jO=y("buffer"),{isReadable:BO,isWritable:AO,isIterable:r7,isNodeStream:DO,isReadableNodeStream:a7,isWritableNodeStream:s7,isDuplexNodeStream:LO,isReadableStream:t7,isWritableStream:e7}=D1(),Q$=f1(),{AbortError:H$,codes:{ERR_INVALID_ARG_TYPE:CO,ERR_INVALID_RETURN_VALUE:J$}}=P0(),{destroyer:jQ}=T8(),PO=P1(),q$=z4(),wO=S9(),{createDeferredPromise:X$}=Z0(),Y$=UX(),$$=globalThis.Blob||jO.Blob,EO=typeof $$!=="undefined"?function Q(J){return J instanceof $$}:function Q(J){return!1},RO=globalThis.AbortController||qQ().AbortController,{FunctionPrototypeCall:G$}=q0();class _8 extends PO{constructor(Q){super(Q);if((Q===null||Q===void 0?void 0:Q.readable)===!1)this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0;if((Q===null||Q===void 0?void 0:Q.writable)===!1)this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0}}K$.exports=function Q(J,X){if(LO(J))return J;if(a7(J))return NQ({readable:J});if(s7(J))return NQ({writable:J});if(DO(J))return NQ({writable:!1,readable:!1});if(t7(J))return NQ({readable:q$.fromWeb(J)});if(e7(J))return NQ({writable:wO.fromWeb(J)});if(typeof J==="function"){let{value:$,write:G,final:H,destroy:q}=TO(J);if(r7($))return Y$(_8,$,{objectMode:!0,write:G,final:H,destroy:q});let K=$===null||$===void 0?void 0:$.then;if(typeof K==="function"){let z,V=G$(K,$,(F)=>{if(F!=null)throw new J$("nully","body",F)},(F)=>{jQ(z,F)});return z=new _8({objectMode:!0,readable:!1,write:G,final(F){H(async()=>{try{await V,IX.nextTick(F,null)}catch(O){IX.nextTick(F,O)}})},destroy:q})}throw new J$("Iterable, AsyncIterable or AsyncFunction",X,$)}if(EO(J))return Q(J.arrayBuffer());if(r7(J))return Y$(_8,J,{objectMode:!0,writable:!1});if(t7(J===null||J===void 0?void 0:J.readable)&&e7(J===null||J===void 0?void 0:J.writable))return _8.fromWeb(J);if(typeof(J===null||J===void 0?void 0:J.writable)==="object"||typeof(J===null||J===void 0?void 0:J.readable)==="object"){let $=J!==null&&J!==void 0&&J.readable?a7(J===null||J===void 0?void 0:J.readable)?J===null||J===void 0?void 0:J.readable:Q(J.readable):void 0,G=J!==null&&J!==void 0&&J.writable?s7(J===null||J===void 0?void 0:J.writable)?J===null||J===void 0?void 0:J.writable:Q(J.writable):void 0;return NQ({readable:$,writable:G})}let Y=J===null||J===void 0?void 0:J.then;if(typeof Y==="function"){let $;return G$(Y,J,(G)=>{if(G!=null)$.push(G);$.push(null)},(G)=>{jQ($,G)}),$=new _8({objectMode:!0,writable:!1,read(){}})}throw new CO(X,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],J)};function TO(Q){let{promise:J,resolve:X}=X$(),Y=new RO,$=Y.signal;return{value:Q(async function*(){while(!0){let H=J;J=null;let{chunk:q,done:K,cb:z}=await H;if(IX.nextTick(z),K)return;if($.aborted)throw new H$(void 0,{cause:$.reason});({promise:J,resolve:X}=X$()),yield q}}(),{signal:$}),write(H,q,K){let z=X;X=null,z({chunk:H,done:!1,cb:K})},final(H){let q=X;X=null,q({done:!0,cb:H})},destroy(H,q){Y.abort(),q(H)}}}function NQ(Q){let J=Q.readable&&typeof Q.readable.read!=="function"?q$.wrap(Q.readable):Q.readable,X=Q.writable,Y=!!BO(J),$=!!AO(X),G,H,q,K,z;function V(F){let O=K;if(K=null,O)O(F);else if(F)z.destroy(F)}if(z=new _8({readableObjectMode:!!(J!==null&&J!==void 0&&J.readableObjectMode),writableObjectMode:!!(X!==null&&X!==void 0&&X.writableObjectMode),readable:Y,writable:$}),$)Q$(X,(F)=>{if($=!1,F)jQ(J,F);V(F)}),z._write=function(F,O,N){if(X.write(F,O))N();else G=N},z._final=function(F){X.end(),H=F},X.on("drain",function(){if(G){let F=G;G=null,F()}}),X.on("finish",function(){if(H){let F=H;H=null,F()}});if(Y)Q$(J,(F)=>{if(Y=!1,F)jQ(J,F);V(F)}),J.on("readable",function(){if(q){let F=q;q=null,F()}}),J.on("end",function(){z.push(null)}),z._read=function(){while(!0){let F=J.read();if(F===null){q=z._read;return}if(!z.push(F))return}};return z._destroy=function(F,O){if(!F&&K!==null)F=new H$;if(q=null,G=null,H=null,K===null)O(F);else K=O,jQ(X,F),jQ(J,F)},z}});var P1=D((RR,M$)=>{var{ObjectDefineProperties:IO,ObjectGetOwnPropertyDescriptor:k1,ObjectKeys:ZO,ObjectSetPrototypeOf:z$}=q0();M$.exports=G1;var _X=z4(),n0=S9();z$(G1.prototype,_X.prototype);z$(G1,_X);{let Q=ZO(n0.prototype);for(let J=0;J<Q.length;J++){let X=Q[J];if(!G1.prototype[X])G1.prototype[X]=n0.prototype[X]}}function G1(Q){if(!(this instanceof G1))return new G1(Q);if(_X.call(this,Q),n0.call(this,Q),Q){if(this.allowHalfOpen=Q.allowHalfOpen!==!1,Q.readable===!1)this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0;if(Q.writable===!1)this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0}else this.allowHalfOpen=!0}IO(G1.prototype,{writable:{__proto__:null,...k1(n0.prototype,"writable")},writableHighWaterMark:{__proto__:null,...k1(n0.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...k1(n0.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...k1(n0.prototype,"writableBuffer")},writableLength:{__proto__:null,...k1(n0.prototype,"writableLength")},writableFinished:{__proto__:null,...k1(n0.prototype,"writableFinished")},writableCorked:{__proto__:null,...k1(n0.prototype,"writableCorked")},writableEnded:{__proto__:null,...k1(n0.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...k1(n0.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){if(this._readableState===void 0||this._writableState===void 0)return!1;return this._readableState.destroyed&&this._writableState.destroyed},set(Q){if(this._readableState&&this._writableState)this._readableState.destroyed=Q,this._writableState.destroyed=Q}}});var ZX;function V$(){if(ZX===void 0)ZX={};return ZX}G1.fromWeb=function(Q,J){return V$().newStreamDuplexFromReadableWritablePair(Q,J)};G1.toWeb=function(Q){return V$().newReadableWritablePairFromDuplex(Q)};var SX;G1.from=function(Q){if(!SX)SX=W$();return SX(Q,"body")}});var vX=D((TR,F$)=>{var{ObjectSetPrototypeOf:U$,Symbol:SO}=q0();F$.exports=b1;var{ERR_METHOD_NOT_IMPLEMENTED:_O}=P0().codes,hX=P1(),{getHighWaterMark:xO}=q4();U$(b1.prototype,hX.prototype);U$(b1,hX);var F4=SO("kCallback");function b1(Q){if(!(this instanceof b1))return new b1(Q);let J=Q?xO(this,Q,"readableHighWaterMark",!0):null;if(J===0)Q={...Q,highWaterMark:null,readableHighWaterMark:J,writableHighWaterMark:Q.writableHighWaterMark||0};if(hX.call(this,Q),this._readableState.sync=!1,this[F4]=null,Q){if(typeof Q.transform==="function")this._transform=Q.transform;if(typeof Q.flush==="function")this._flush=Q.flush}this.on("prefinish",hO)}function xX(Q){if(typeof this._flush==="function"&&!this.destroyed)this._flush((J,X)=>{if(J){if(Q)Q(J);else this.destroy(J);return}if(X!=null)this.push(X);if(this.push(null),Q)Q()});else if(this.push(null),Q)Q()}function hO(){if(this._final!==xX)xX.call(this)}b1.prototype._final=xX;b1.prototype._transform=function(Q,J,X){throw new _O("_transform()")};b1.prototype._write=function(Q,J,X){let Y=this._readableState,$=this._writableState,G=Y.length;this._transform(Q,J,(H,q)=>{if(H){X(H);return}if(q!=null)this.push(q);if($.ended||G===Y.length||Y.length<Y.highWaterMark)X();else this[F4]=X})};b1.prototype._read=function(){if(this[F4]){let Q=this[F4];this[F4]=null,Q()}}});var gX=D((IR,N$)=>{var{ObjectSetPrototypeOf:O$}=q0();N$.exports=BQ;var yX=vX();O$(BQ.prototype,yX.prototype);O$(BQ,yX);function BQ(Q){if(!(this instanceof BQ))return new BQ(Q);yX.call(this,Q)}BQ.prototype._transform=function(Q,J,X){X(null,Q)}});var v9=D((ZR,L$)=>{var O4=e1(),{ArrayIsArray:vO,Promise:yO,SymbolAsyncIterator:gO,SymbolDispose:fO}=q0(),h9=f1(),{once:kO}=Z0(),bO=T8(),j$=P1(),{aggregateTwoErrors:mO,codes:{ERR_INVALID_ARG_TYPE:pX,ERR_INVALID_RETURN_VALUE:fX,ERR_MISSING_ARGS:uO,ERR_STREAM_DESTROYED:lO,ERR_STREAM_PREMATURE_CLOSE:cO},AbortError:dO}=P0(),{validateFunction:pO,validateAbortSignal:nO}=WQ(),{isIterable:x8,isReadable:kX,isReadableNodeStream:x9,isNodeStream:B$,isTransformStream:AQ,isWebStream:iO,isReadableStream:bX,isReadableFinished:oO}=D1(),rO=globalThis.AbortController||qQ().AbortController,mX,uX,lX;function A$(Q,J,X){let Y=!1;Q.on("close",()=>{Y=!0});let $=h9(Q,{readable:J,writable:X},(G)=>{Y=!G});return{destroy:(G)=>{if(Y)return;Y=!0,bO.destroyer(Q,G||new lO("pipe"))},cleanup:$}}function aO(Q){return pO(Q[Q.length-1],"streams[stream.length - 1]"),Q.pop()}function cX(Q){if(x8(Q))return Q;else if(x9(Q))return sO(Q);throw new pX("val",["Readable","Iterable","AsyncIterable"],Q)}async function*sO(Q){if(!uX)uX=z4();yield*uX.prototype[gO].call(Q)}async function _9(Q,J,X,{end:Y}){let $,G=null,H=(z)=>{if(z)$=z;if(G){let V=G;G=null,V()}},q=()=>new yO((z,V)=>{if($)V($);else G=()=>{if($)V($);else z()}});J.on("drain",H);let K=h9(J,{readable:!1},H);try{if(J.writableNeedDrain)await q();for await(let z of Q)if(!J.write(z))await q();if(Y)J.end(),await q();X()}catch(z){X($!==z?mO($,z):z)}finally{K(),J.off("drain",H)}}async function dX(Q,J,X,{end:Y}){if(AQ(J))J=J.writable;let $=J.getWriter();try{for await(let G of Q)await $.ready,$.write(G).catch(()=>{});if(await $.ready,Y)await $.close();X()}catch(G){try{await $.abort(G),X(G)}catch(H){X(H)}}}function tO(...Q){return D$(Q,kO(aO(Q)))}function D$(Q,J,X){if(Q.length===1&&vO(Q[0]))Q=Q[0];if(Q.length<2)throw new uO("streams");let Y=new rO,$=Y.signal,G=X===null||X===void 0?void 0:X.signal,H=[];nO(G,"options.signal");function q(){A(new dO)}lX=lX||Z0().addAbortListener;let K;if(G)K=lX(G,q);let z,V,F=[],O=0;function N(_){A(_,--O===0)}function A(_,x){var i;if(_&&(!z||z.code==="ERR_STREAM_PREMATURE_CLOSE"))z=_;if(!z&&!x)return;while(F.length)F.shift()(z);if((i=K)===null||i===void 0||i[fO](),Y.abort(),x){if(!z)H.forEach((J0)=>J0());O4.nextTick(J,z,V)}}let B;for(let _=0;_<Q.length;_++){let x=Q[_],i=_<Q.length-1,J0=_>0,X0=i||(X===null||X===void 0?void 0:X.end)!==!1,z0=_===Q.length-1;if(B$(x)){let t=function(C0){if(C0&&C0.name!=="AbortError"&&C0.code!=="ERR_STREAM_PREMATURE_CLOSE")N(C0)};var P=t;if(X0){let{destroy:C0,cleanup:B8}=A$(x,i,J0);if(F.push(C0),kX(x)&&z0)H.push(B8)}if(x.on("error",t),kX(x)&&z0)H.push(()=>{x.removeListener("error",t)})}if(_===0)if(typeof x==="function"){if(B=x({signal:$}),!x8(B))throw new fX("Iterable, AsyncIterable or Stream","source",B)}else if(x8(x)||x9(x)||AQ(x))B=x;else B=j$.from(x);else if(typeof x==="function"){if(AQ(B)){var L;B=cX((L=B)===null||L===void 0?void 0:L.readable)}else B=cX(B);if(B=x(B,{signal:$}),i){if(!x8(B,!0))throw new fX("AsyncIterable",`transform[${_-1}]`,B)}else{var C;if(!mX)mX=gX();let t=new mX({objectMode:!0}),C0=(C=B)===null||C===void 0?void 0:C.then;if(typeof C0==="function")O++,C0.call(B,(B1)=>{if(V=B1,B1!=null)t.write(B1);if(X0)t.end();O4.nextTick(N)},(B1)=>{t.destroy(B1),O4.nextTick(N,B1)});else if(x8(B,!0))O++,_9(B,t,N,{end:X0});else if(bX(B)||AQ(B)){let B1=B.readable||B;O++,_9(B1,t,N,{end:X0})}else throw new fX("AsyncIterable or Promise","destination",B);B=t;let{destroy:B8,cleanup:J4}=A$(B,!1,!0);if(F.push(B8),z0)H.push(J4)}}else if(B$(x)){if(x9(B)){O+=2;let t=eO(B,x,N,{end:X0});if(kX(x)&&z0)H.push(t)}else if(AQ(B)||bX(B)){let t=B.readable||B;O++,_9(t,x,N,{end:X0})}else if(x8(B))O++,_9(B,x,N,{end:X0});else throw new pX("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],B);B=x}else if(iO(x)){if(x9(B))O++,dX(cX(B),x,N,{end:X0});else if(bX(B)||x8(B))O++,dX(B,x,N,{end:X0});else if(AQ(B))O++,dX(B.readable,x,N,{end:X0});else throw new pX("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],B);B=x}else B=j$.from(x)}if($!==null&&$!==void 0&&$.aborted||G!==null&&G!==void 0&&G.aborted)O4.nextTick(q);return B}function eO(Q,J,X,{end:Y}){let $=!1;if(J.on("close",()=>{if(!$)X(new cO)}),Q.pipe(J,{end:!1}),Y){let H=function(){$=!0,J.end()};var G=H;if(oO(Q))O4.nextTick(H);else Q.once("end",H)}else X();return h9(Q,{readable:!0,writable:!1},(H)=>{let q=Q._readableState;if(H&&H.code==="ERR_STREAM_PREMATURE_CLOSE"&&q&&q.ended&&!q.errored&&!q.errorEmitted)Q.once("end",X).once("error",X);else X(H)}),h9(J,{readable:!1,writable:!0},X)}L$.exports={pipelineImpl:D$,pipeline:tO}});var iX=D((SR,T$)=>{var{pipeline:QN}=v9(),y9=P1(),{destroyer:JN}=T8(),{isNodeStream:g9,isReadable:C$,isWritable:P$,isWebStream:nX,isTransformStream:h8,isWritableStream:w$,isReadableStream:E$}=D1(),{AbortError:XN,codes:{ERR_INVALID_ARG_VALUE:R$,ERR_MISSING_ARGS:YN}}=P0(),$N=f1();T$.exports=function Q(...J){if(J.length===0)throw new YN("streams");if(J.length===1)return y9.from(J[0]);let X=[...J];if(typeof J[0]==="function")J[0]=y9.from(J[0]);if(typeof J[J.length-1]==="function"){let N=J.length-1;J[N]=y9.from(J[N])}for(let N=0;N<J.length;++N){if(!g9(J[N])&&!nX(J[N]))continue;if(N<J.length-1&&!(C$(J[N])||E$(J[N])||h8(J[N])))throw new R$(`streams[${N}]`,X[N],"must be readable");if(N>0&&!(P$(J[N])||w$(J[N])||h8(J[N])))throw new R$(`streams[${N}]`,X[N],"must be writable")}let Y,$,G,H,q;function K(N){let A=H;if(H=null,A)A(N);else if(N)q.destroy(N);else if(!O&&!F)q.destroy()}let z=J[0],V=QN(J,K),F=!!(P$(z)||w$(z)||h8(z)),O=!!(C$(V)||E$(V)||h8(V));if(q=new y9({writableObjectMode:!!(z!==null&&z!==void 0&&z.writableObjectMode),readableObjectMode:!!(V!==null&&V!==void 0&&V.readableObjectMode),writable:F,readable:O}),F){if(g9(z))q._write=function(A,B,L){if(z.write(A,B))L();else Y=L},q._final=function(A){z.end(),$=A},z.on("drain",function(){if(Y){let A=Y;Y=null,A()}});else if(nX(z)){let B=(h8(z)?z.writable:z).getWriter();q._write=async function(L,C,P){try{await B.ready,B.write(L).catch(()=>{}),P()}catch(_){P(_)}},q._final=async function(L){try{await B.ready,B.close().catch(()=>{}),$=L}catch(C){L(C)}}}let N=h8(V)?V.readable:V;$N(N,()=>{if($){let A=$;$=null,A()}})}if(O){if(g9(V))V.on("readable",function(){if(G){let N=G;G=null,N()}}),V.on("end",function(){q.push(null)}),q._read=function(){while(!0){let N=V.read();if(N===null){G=q._read;return}if(!q.push(N))return}};else if(nX(V)){let A=(h8(V)?V.readable:V).getReader();q._read=async function(){while(!0)try{let{value:B,done:L}=await A.read();if(!q.push(B))return;if(L){q.push(null);return}}catch{return}}}}return q._destroy=function(N,A){if(!N&&H!==null)N=new XN;if(G=null,Y=null,$=null,H===null)A(N);else if(H=A,g9(V))JN(V,N)},q}});var k$=D((xN,rX)=>{var GN=globalThis.AbortController||qQ().AbortController,{codes:{ERR_INVALID_ARG_VALUE:HN,ERR_INVALID_ARG_TYPE:N4,ERR_MISSING_ARGS:qN,ERR_OUT_OF_RANGE:KN},AbortError:w1}=P0(),{validateAbortSignal:v8,validateInteger:I$,validateObject:y8}=WQ(),WN=q0().Symbol("kWeak"),zN=q0().Symbol("kResistStopPropagation"),{finished:VN}=f1(),MN=iX(),{addAbortSignalNoValidate:UN}=H4(),{isWritable:FN,isNodeStream:ON}=D1(),{deprecate:NN}=Z0(),{ArrayPrototypePush:jN,Boolean:BN,MathFloor:Z$,Number:AN,NumberIsNaN:DN,Promise:S$,PromiseReject:_$,PromiseResolve:LN,PromisePrototypeThen:x$,Symbol:v$}=q0(),f9=v$("kEmpty"),h$=v$("kEof");function CN(Q,J){if(J!=null)y8(J,"options");if((J===null||J===void 0?void 0:J.signal)!=null)v8(J.signal,"options.signal");if(ON(Q)&&!FN(Q))throw new HN("stream",Q,"must be writable");let X=MN(this,Q);if(J!==null&&J!==void 0&&J.signal)UN(J.signal,X);return X}function k9(Q,J){if(typeof Q!=="function")throw new N4("fn",["Function","AsyncFunction"],Q);if(J!=null)y8(J,"options");if((J===null||J===void 0?void 0:J.signal)!=null)v8(J.signal,"options.signal");let X=1;if((J===null||J===void 0?void 0:J.concurrency)!=null)X=Z$(J.concurrency);let Y=X-1;if((J===null||J===void 0?void 0:J.highWaterMark)!=null)Y=Z$(J.highWaterMark);return I$(X,"options.concurrency",1),I$(Y,"options.highWaterMark",0),Y+=X,async function*$(){let G=Z0().AbortSignalAny([J===null||J===void 0?void 0:J.signal].filter(BN)),H=this,q=[],K={signal:G},z,V,F=!1,O=0;function N(){F=!0,A()}function A(){O-=1,B()}function B(){if(V&&!F&&O<X&&q.length<Y)V(),V=null}async function L(){try{for await(let C of H){if(F)return;if(G.aborted)throw new w1;try{if(C=Q(C,K),C===f9)continue;C=LN(C)}catch(P){C=_$(P)}if(O+=1,x$(C,A,N),q.push(C),z)z(),z=null;if(!F&&(q.length>=Y||O>=X))await new S$((P)=>{V=P})}q.push(h$)}catch(C){let P=_$(C);x$(P,A,N),q.push(P)}finally{if(F=!0,z)z(),z=null}}L();try{while(!0){while(q.length>0){let C=await q[0];if(C===h$)return;if(G.aborted)throw new w1;if(C!==f9)yield C;q.shift(),B()}await new S$((C)=>{z=C})}}finally{if(F=!0,V)V(),V=null}}.call(this)}function PN(Q=void 0){if(Q!=null)y8(Q,"options");if((Q===null||Q===void 0?void 0:Q.signal)!=null)v8(Q.signal,"options.signal");return async function*J(){let X=0;for await(let $ of this){var Y;if(Q!==null&&Q!==void 0&&(Y=Q.signal)!==null&&Y!==void 0&&Y.aborted)throw new w1({cause:Q.signal.reason});yield[X++,$]}}.call(this)}async function y$(Q,J=void 0){for await(let X of oX.call(this,Q,J))return!0;return!1}async function wN(Q,J=void 0){if(typeof Q!=="function")throw new N4("fn",["Function","AsyncFunction"],Q);return!await y$.call(this,async(...X)=>{return!await Q(...X)},J)}async function EN(Q,J){for await(let X of oX.call(this,Q,J))return X;return}async function RN(Q,J){if(typeof Q!=="function")throw new N4("fn",["Function","AsyncFunction"],Q);async function X(Y,$){return await Q(Y,$),f9}for await(let Y of k9.call(this,X,J));}function oX(Q,J){if(typeof Q!=="function")throw new N4("fn",["Function","AsyncFunction"],Q);async function X(Y,$){if(await Q(Y,$))return Y;return f9}return k9.call(this,X,J)}class g$ extends qN{constructor(){super("reduce");this.message="Reduce of an empty stream requires an initial value"}}async function TN(Q,J,X){var Y;if(typeof Q!=="function")throw new N4("reducer",["Function","AsyncFunction"],Q);if(X!=null)y8(X,"options");if((X===null||X===void 0?void 0:X.signal)!=null)v8(X.signal,"options.signal");let $=arguments.length>1;if(X!==null&&X!==void 0&&(Y=X.signal)!==null&&Y!==void 0&&Y.aborted){let z=new w1(void 0,{cause:X.signal.reason});throw this.once("error",()=>{}),await VN(this.destroy(z)),z}let G=new GN,H=G.signal;if(X!==null&&X!==void 0&&X.signal){let z={once:!0,[WN]:this,[zN]:!0};X.signal.addEventListener("abort",()=>G.abort(),z)}let q=!1;try{for await(let z of this){var K;if(q=!0,X!==null&&X!==void 0&&(K=X.signal)!==null&&K!==void 0&&K.aborted)throw new w1;if(!$)J=z,$=!0;else J=await Q(J,z,{signal:H})}if(!q&&!$)throw new g$}finally{G.abort()}return J}async function IN(Q){if(Q!=null)y8(Q,"options");if((Q===null||Q===void 0?void 0:Q.signal)!=null)v8(Q.signal,"options.signal");let J=[];for await(let Y of this){var X;if(Q!==null&&Q!==void 0&&(X=Q.signal)!==null&&X!==void 0&&X.aborted)throw new w1(void 0,{cause:Q.signal.reason});jN(J,Y)}return J}function ZN(Q,J){let X=k9.call(this,Q,J);return async function*Y(){for await(let $ of X)yield*$}.call(this)}function f$(Q){if(Q=AN(Q),DN(Q))return 0;if(Q<0)throw new KN("number",">= 0",Q);return Q}function SN(Q,J=void 0){if(J!=null)y8(J,"options");if((J===null||J===void 0?void 0:J.signal)!=null)v8(J.signal,"options.signal");return Q=f$(Q),async function*X(){var Y;if(J!==null&&J!==void 0&&(Y=J.signal)!==null&&Y!==void 0&&Y.aborted)throw new w1;for await(let G of this){var $;if(J!==null&&J!==void 0&&($=J.signal)!==null&&$!==void 0&&$.aborted)throw new w1;if(Q--<=0)yield G}}.call(this)}function _N(Q,J=void 0){if(J!=null)y8(J,"options");if((J===null||J===void 0?void 0:J.signal)!=null)v8(J.signal,"options.signal");return Q=f$(Q),async function*X(){var Y;if(J!==null&&J!==void 0&&(Y=J.signal)!==null&&Y!==void 0&&Y.aborted)throw new w1;for await(let G of this){var $;if(J!==null&&J!==void 0&&($=J.signal)!==null&&$!==void 0&&$.aborted)throw new w1;if(Q-- >0)yield G;if(Q<=0)return}}.call(this)}xN.streamReturningOperators={asIndexedPairs:NN(PN,"readable.asIndexedPairs will be removed in a future version."),drop:SN,filter:oX,flatMap:ZN,map:k9,take:_N,compose:CN};xN.promiseReturningOperators={every:wN,forEach:RN,reduce:TN,toArray:IN,some:y$,find:EN}});var aX=D((_R,b$)=>{var{ArrayPrototypePop:yN,Promise:gN}=q0(),{isIterable:fN,isNodeStream:kN,isWebStream:bN}=D1(),{pipelineImpl:mN}=v9(),{finished:uN}=f1();sX();function lN(...Q){return new gN((J,X)=>{let Y,$,G=Q[Q.length-1];if(G&&typeof G==="object"&&!kN(G)&&!fN(G)&&!bN(G)){let H=yN(Q);Y=H.signal,$=H.end}mN(Q,(H,q)=>{if(H)X(H);else J(q)},{signal:Y,end:$})})}b$.exports={finished:uN,pipeline:lN}});var sX=D((xR,o$)=>{var{Buffer:cN}=y("buffer"),{ObjectDefineProperty:m1,ObjectKeys:l$,ReflectApply:c$}=q0(),{promisify:{custom:d$}}=Z0(),{streamReturningOperators:m$,promiseReturningOperators:u$}=k$(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:p$}}=P0(),dN=iX(),{setDefaultHighWaterMark:pN,getDefaultHighWaterMark:nN}=q4(),{pipeline:n$}=v9(),{destroyer:iN}=T8(),i$=f1(),tX=aX(),j4=D1(),H0=o$.exports=j9().Stream;H0.isDestroyed=j4.isDestroyed;H0.isDisturbed=j4.isDisturbed;H0.isErrored=j4.isErrored;H0.isReadable=j4.isReadable;H0.isWritable=j4.isWritable;H0.Readable=z4();for(let Q of l$(m$)){let X=function(...Y){if(new.target)throw p$();return H0.Readable.from(c$(J,this,Y))},J=m$[Q];m1(X,"name",{__proto__:null,value:J.name}),m1(X,"length",{__proto__:null,value:J.length}),m1(H0.Readable.prototype,Q,{__proto__:null,value:X,enumerable:!1,configurable:!0,writable:!0})}for(let Q of l$(u$)){let X=function(...Y){if(new.target)throw p$();return c$(J,this,Y)},J=u$[Q];m1(X,"name",{__proto__:null,value:J.name}),m1(X,"length",{__proto__:null,value:J.length}),m1(H0.Readable.prototype,Q,{__proto__:null,value:X,enumerable:!1,configurable:!0,writable:!0})}H0.Writable=S9();H0.Duplex=P1();H0.Transform=vX();H0.PassThrough=gX();H0.pipeline=n$;var{addAbortSignal:oN}=H4();H0.addAbortSignal=oN;H0.finished=i$;H0.destroy=iN;H0.compose=dN;H0.setDefaultHighWaterMark=pN;H0.getDefaultHighWaterMark=nN;m1(H0,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return tX}});m1(n$,d$,{__proto__:null,enumerable:!0,get(){return tX.pipeline}});m1(i$,d$,{__proto__:null,enumerable:!0,get(){return tX.finished}});H0.Stream=H0;H0._isUint8Array=function Q(J){return J instanceof Uint8Array};H0._uint8ArrayToBuffer=function Q(J){return cN.from(J.buffer,J.byteOffset,J.byteLength)}});var X8=D((hR,o)=>{var U0=y("stream");if(U0&&process.env.READABLE_STREAM==="disable"){let Q=U0.promises;o.exports._uint8ArrayToBuffer=U0._uint8ArrayToBuffer,o.exports._isUint8Array=U0._isUint8Array,o.exports.isDisturbed=U0.isDisturbed,o.exports.isErrored=U0.isErrored,o.exports.isReadable=U0.isReadable,o.exports.Readable=U0.Readable,o.exports.Writable=U0.Writable,o.exports.Duplex=U0.Duplex,o.exports.Transform=U0.Transform,o.exports.PassThrough=U0.PassThrough,o.exports.addAbortSignal=U0.addAbortSignal,o.exports.finished=U0.finished,o.exports.destroy=U0.destroy,o.exports.pipeline=U0.pipeline,o.exports.compose=U0.compose,Object.defineProperty(U0,"promises",{configurable:!0,enumerable:!0,get(){return Q}}),o.exports.Stream=U0.Stream}else{let Q=sX(),J=aX(),X=Q.Readable.destroy;o.exports=Q.Readable,o.exports._uint8ArrayToBuffer=Q._uint8ArrayToBuffer,o.exports._isUint8Array=Q._isUint8Array,o.exports.isDisturbed=Q.isDisturbed,o.exports.isErrored=Q.isErrored,o.exports.isReadable=Q.isReadable,o.exports.Readable=Q.Readable,o.exports.Writable=Q.Writable,o.exports.Duplex=Q.Duplex,o.exports.Transform=Q.Transform,o.exports.PassThrough=Q.PassThrough,o.exports.addAbortSignal=Q.addAbortSignal,o.exports.finished=Q.finished,o.exports.destroy=Q.destroy,o.exports.destroy=X,o.exports.pipeline=Q.pipeline,o.exports.compose=Q.compose,Object.defineProperty(Q,"promises",{configurable:!0,enumerable:!0,get(){return J}}),o.exports.Stream=Q.Stream}o.exports.default=o.exports});var r$=D((aR,eX)=>{if(typeof Object.create==="function")eX.exports=function Q(J,X){if(X)J.super_=X,J.prototype=Object.create(X.prototype,{constructor:{value:J,enumerable:!1,writable:!0,configurable:!0}})};else eX.exports=function Q(J,X){if(X){J.super_=X;var Y=function(){};Y.prototype=X.prototype,J.prototype=new Y,J.prototype.constructor=J}}});var a$=D((sR,Q5)=>{try{if(b9=y("util"),typeof b9.inherits!=="function")throw"";Q5.exports=b9.inherits}catch(Q){Q5.exports=r$()}var b9});var e$=D((tR,t$)=>{var{Buffer:H1}=y("buffer"),s$=Symbol.for("BufferList");function e(Q){if(!(this instanceof e))return new e(Q);e._init.call(this,Q)}e._init=function Q(J){if(Object.defineProperty(this,s$,{value:!0}),this._bufs=[],this.length=0,J)this.append(J)};e.prototype._new=function Q(J){return new e(J)};e.prototype._offset=function Q(J){if(J===0)return[0,0];let X=0;for(let Y=0;Y<this._bufs.length;Y++){let $=X+this._bufs[Y].length;if(J<$||Y===this._bufs.length-1)return[Y,J-X];X=$}};e.prototype._reverseOffset=function(Q){let J=Q[0],X=Q[1];for(let Y=0;Y<J;Y++)X+=this._bufs[Y].length;return X};e.prototype.getBuffers=function Q(){return this._bufs};e.prototype.get=function Q(J){if(J>this.length||J<0)return;let X=this._offset(J);return this._bufs[X[0]][X[1]]};e.prototype.slice=function Q(J,X){if(typeof J==="number"&&J<0)J+=this.length;if(typeof X==="number"&&X<0)X+=this.length;return this.copy(null,0,J,X)};e.prototype.copy=function Q(J,X,Y,$){if(typeof Y!=="number"||Y<0)Y=0;if(typeof $!=="number"||$>this.length)$=this.length;if(Y>=this.length)return J||H1.alloc(0);if($<=0)return J||H1.alloc(0);let G=!!J,H=this._offset(Y),q=$-Y,K=q,z=G&&X||0,V=H[1];if(Y===0&&$===this.length){if(!G)return this._bufs.length===1?this._bufs[0]:H1.concat(this._bufs,this.length);for(let F=0;F<this._bufs.length;F++)this._bufs[F].copy(J,z),z+=this._bufs[F].length;return J}if(K<=this._bufs[H[0]].length-V)return G?this._bufs[H[0]].copy(J,X,V,V+K):this._bufs[H[0]].slice(V,V+K);if(!G)J=H1.allocUnsafe(q);for(let F=H[0];F<this._bufs.length;F++){let O=this._bufs[F].length-V;if(K>O)this._bufs[F].copy(J,z,V),z+=O;else{this._bufs[F].copy(J,z,V,V+K),z+=O;break}if(K-=O,V)V=0}if(J.length>z)return J.slice(0,z);return J};e.prototype.shallowSlice=function Q(J,X){if(J=J||0,X=typeof X!=="number"?this.length:X,J<0)J+=this.length;if(X<0)X+=this.length;if(J===X)return this._new();let Y=this._offset(J),$=this._offset(X),G=this._bufs.slice(Y[0],$[0]+1);if($[1]===0)G.pop();else G[G.length-1]=G[G.length-1].slice(0,$[1]);if(Y[1]!==0)G[0]=G[0].slice(Y[1]);return this._new(G)};e.prototype.toString=function Q(J,X,Y){return this.slice(X,Y).toString(J)};e.prototype.consume=function Q(J){if(J=Math.trunc(J),Number.isNaN(J)||J<=0)return this;while(this._bufs.length)if(J>=this._bufs[0].length)J-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(J),this.length-=J;break}return this};e.prototype.duplicate=function Q(){let J=this._new();for(let X=0;X<this._bufs.length;X++)J.append(this._bufs[X]);return J};e.prototype.append=function Q(J){return this._attach(J,e.prototype._appendBuffer)};e.prototype.prepend=function Q(J){return this._attach(J,e.prototype._prependBuffer,!0)};e.prototype._attach=function Q(J,X,Y){if(J==null)return this;if(J.buffer)X.call(this,H1.from(J.buffer,J.byteOffset,J.byteLength));else if(Array.isArray(J)){let[$,G]=Y?[J.length-1,-1]:[0,1];for(let H=$;H>=0&&H<J.length;H+=G)this._attach(J[H],X,Y)}else if(this._isBufferList(J)){let[$,G]=Y?[J._bufs.length-1,-1]:[0,1];for(let H=$;H>=0&&H<J._bufs.length;H+=G)this._attach(J._bufs[H],X,Y)}else{if(typeof J==="number")J=J.toString();X.call(this,H1.from(J))}return this};e.prototype._appendBuffer=function Q(J){this._bufs.push(J),this.length+=J.length};e.prototype._prependBuffer=function Q(J){this._bufs.unshift(J),this.length+=J.length};e.prototype.indexOf=function(Q,J,X){if(X===void 0&&typeof J==="string")X=J,J=void 0;if(typeof Q==="function"||Array.isArray(Q))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');else if(typeof Q==="number")Q=H1.from([Q]);else if(typeof Q==="string")Q=H1.from(Q,X);else if(this._isBufferList(Q))Q=Q.slice();else if(Array.isArray(Q.buffer))Q=H1.from(Q.buffer,Q.byteOffset,Q.byteLength);else if(!H1.isBuffer(Q))Q=H1.from(Q);if(J=Number(J||0),isNaN(J))J=0;if(J<0)J=this.length+J;if(J<0)J=0;if(Q.length===0)return J>this.length?this.length:J;let Y=this._offset(J),$=Y[0],G=Y[1];for(;$<this._bufs.length;$++){let H=this._bufs[$];while(G<H.length)if(H.length-G>=Q.length){let K=H.indexOf(Q,G);if(K!==-1)return this._reverseOffset([$,K]);G=H.length-Q.length+1}else{let K=this._reverseOffset([$,G]);if(this._match(K,Q))return K;G++}G=0}return-1};e.prototype._match=function(Q,J){if(this.length-Q<J.length)return!1;for(let X=0;X<J.length;X++)if(this.get(Q+X)!==J[X])return!1;return!0};(function(){let Q={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let J in Q)(function(X){if(Q[X]===null)e.prototype[X]=function(Y,$){return this.slice(Y,Y+$)[X](0,$)};else e.prototype[X]=function(Y=0){return this.slice(Y,Y+Q[X])[X](0)}})(J)})();e.prototype._isBufferList=function Q(J){return J instanceof e||e.isBufferList(J)};e.isBufferList=function Q(J){return J!=null&&J[s$]};t$.exports=e});var QG=D((eR,m9)=>{var J5=X8().Duplex,rN=a$(),B4=e$();function E0(Q){if(!(this instanceof E0))return new E0(Q);if(typeof Q==="function"){this._callback=Q;let J=function X(Y){if(this._callback)this._callback(Y),this._callback=null}.bind(this);this.on("pipe",function X(Y){Y.on("error",J)}),this.on("unpipe",function X(Y){Y.removeListener("error",J)}),Q=null}B4._init.call(this,Q),J5.call(this)}rN(E0,J5);Object.assign(E0.prototype,B4.prototype);E0.prototype._new=function Q(J){return new E0(J)};E0.prototype._write=function Q(J,X,Y){if(this._appendBuffer(J),typeof Y==="function")Y()};E0.prototype._read=function Q(J){if(!this.length)return this.push(null);J=Math.min(J,this.length),this.push(this.slice(0,J)),this.consume(J)};E0.prototype.end=function Q(J){if(J5.prototype.end.call(this,J),this._callback)this._callback(null,this.slice()),this._callback=null};E0.prototype._destroy=function Q(J,X){this._bufs.length=0,this.length=0,X(J)};E0.prototype._isBufferList=function Q(J){return J instanceof E0||J instanceof B4||E0.isBufferList(J)};E0.isBufferList=B4.isBufferList;m9.exports=E0;m9.exports.BufferListStream=E0;m9.exports.BufferList=B4});var YG=D((QT,XG)=>{class JG{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}XG.exports=JG});var X5=D((JT,$G)=>{var I=JT,{Buffer:g0}=y("buffer");I.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"};I.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0};I.requiredHeaderFlagsErrors={};for(let Q in I.requiredHeaderFlags){let J=I.requiredHeaderFlags[Q];I.requiredHeaderFlagsErrors[Q]="Invalid header flag bits, must be 0x"+J.toString(16)+" for "+I.types[Q]+" packet"}I.codes={};for(let Q in I.types){let J=I.types[Q];I.codes[J]=Q}I.CMD_SHIFT=4;I.CMD_MASK=240;I.DUP_MASK=8;I.QOS_MASK=3;I.QOS_SHIFT=1;I.RETAIN_MASK=1;I.VARBYTEINT_MASK=127;I.VARBYTEINT_FIN_MASK=128;I.VARBYTEINT_MAX=268435455;I.SESSIONPRESENT_MASK=1;I.SESSIONPRESENT_HEADER=g0.from([I.SESSIONPRESENT_MASK]);I.CONNACK_HEADER=g0.from([I.codes.connack<<I.CMD_SHIFT]);I.USERNAME_MASK=128;I.PASSWORD_MASK=64;I.WILL_RETAIN_MASK=32;I.WILL_QOS_MASK=24;I.WILL_QOS_SHIFT=3;I.WILL_FLAG_MASK=4;I.CLEAN_SESSION_MASK=2;I.CONNECT_HEADER=g0.from([I.codes.connect<<I.CMD_SHIFT]);I.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11};I.propertiesCodes={};for(let Q in I.properties){let J=I.properties[Q];I.propertiesCodes[J]=Q}I.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function Y8(Q){return[0,1,2].map((J)=>{return[0,1].map((X)=>{return[0,1].map((Y)=>{let $=g0.alloc(1);return $.writeUInt8(I.codes[Q]<<I.CMD_SHIFT|(X?I.DUP_MASK:0)|J<<I.QOS_SHIFT|Y,0,!0),$})})})}I.PUBLISH_HEADER=Y8("publish");I.SUBSCRIBE_HEADER=Y8("subscribe");I.SUBSCRIBE_OPTIONS_QOS_MASK=3;I.SUBSCRIBE_OPTIONS_NL_MASK=1;I.SUBSCRIBE_OPTIONS_NL_SHIFT=2;I.SUBSCRIBE_OPTIONS_RAP_MASK=1;I.SUBSCRIBE_OPTIONS_RAP_SHIFT=3;I.SUBSCRIBE_OPTIONS_RH_MASK=3;I.SUBSCRIBE_OPTIONS_RH_SHIFT=4;I.SUBSCRIBE_OPTIONS_RH=[0,16,32];I.SUBSCRIBE_OPTIONS_NL=4;I.SUBSCRIBE_OPTIONS_RAP=8;I.SUBSCRIBE_OPTIONS_QOS=[0,1,2];I.UNSUBSCRIBE_HEADER=Y8("unsubscribe");I.ACKS={unsuback:Y8("unsuback"),puback:Y8("puback"),pubcomp:Y8("pubcomp"),pubrel:Y8("pubrel"),pubrec:Y8("pubrec")};I.SUBACK_HEADER=g0.from([I.codes.suback<<I.CMD_SHIFT]);I.VERSION3=g0.from([3]);I.VERSION4=g0.from([4]);I.VERSION5=g0.from([5]);I.VERSION131=g0.from([131]);I.VERSION132=g0.from([132]);I.QOS=[0,1,2].map((Q)=>{return g0.from([Q])});I.EMPTY={pingreq:g0.from([I.codes.pingreq<<4,0]),pingresp:g0.from([I.codes.pingresp<<4,0]),disconnect:g0.from([I.codes.disconnect<<4,0])};I.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"};I.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"};I.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};I.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"};I.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};I.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}});var HG=D((XT,GG)=>{var DQ=1000,LQ=DQ*60,CQ=LQ*60,g8=CQ*24,aN=g8*7,sN=g8*365.25;GG.exports=function(Q,J){J=J||{};var X=typeof Q;if(X==="string"&&Q.length>0)return tN(Q);else if(X==="number"&&isFinite(Q))return J.long?Qj(Q):eN(Q);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(Q))};function tN(Q){if(Q=String(Q),Q.length>100)return;var J=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(Q);if(!J)return;var X=parseFloat(J[1]),Y=(J[2]||"ms").toLowerCase();switch(Y){case"years":case"year":case"yrs":case"yr":case"y":return X*sN;case"weeks":case"week":case"w":return X*aN;case"days":case"day":case"d":return X*g8;case"hours":case"hour":case"hrs":case"hr":case"h":return X*CQ;case"minutes":case"minute":case"mins":case"min":case"m":return X*LQ;case"seconds":case"second":case"secs":case"sec":case"s":return X*DQ;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return X;default:return}}function eN(Q){var J=Math.abs(Q);if(J>=g8)return Math.round(Q/g8)+"d";if(J>=CQ)return Math.round(Q/CQ)+"h";if(J>=LQ)return Math.round(Q/LQ)+"m";if(J>=DQ)return Math.round(Q/DQ)+"s";return Q+"ms"}function Qj(Q){var J=Math.abs(Q);if(J>=g8)return u9(Q,J,g8,"day");if(J>=CQ)return u9(Q,J,CQ,"hour");if(J>=LQ)return u9(Q,J,LQ,"minute");if(J>=DQ)return u9(Q,J,DQ,"second");return Q+" ms"}function u9(Q,J,X,Y){var $=J>=X*1.5;return Math.round(Q/X)+" "+Y+($?"s":"")}});var Y5=D((YT,qG)=>{function Jj(Q){X.debug=X,X.default=X,X.coerce=K,X.disable=H,X.enable=$,X.enabled=q,X.humanize=HG(),X.destroy=z,Object.keys(Q).forEach((V)=>{X[V]=Q[V]}),X.names=[],X.skips=[],X.formatters={};function J(V){let F=0;for(let O=0;O<V.length;O++)F=(F<<5)-F+V.charCodeAt(O),F|=0;return X.colors[Math.abs(F)%X.colors.length]}X.selectColor=J;function X(V){let F,O=null,N,A;function B(...L){if(!B.enabled)return;let C=B,P=Number(new Date),_=P-(F||P);if(C.diff=_,C.prev=F,C.curr=P,F=P,L[0]=X.coerce(L[0]),typeof L[0]!=="string")L.unshift("%O");let x=0;L[0]=L[0].replace(/%([a-zA-Z%])/g,(J0,X0)=>{if(J0==="%%")return"%";x++;let z0=X.formatters[X0];if(typeof z0==="function"){let t=L[x];J0=z0.call(C,t),L.splice(x,1),x--}return J0}),X.formatArgs.call(C,L),(C.log||X.log).apply(C,L)}if(B.namespace=V,B.useColors=X.useColors(),B.color=X.selectColor(V),B.extend=Y,B.destroy=X.destroy,Object.defineProperty(B,"enabled",{enumerable:!0,configurable:!1,get:()=>{if(O!==null)return O;if(N!==X.namespaces)N=X.namespaces,A=X.enabled(V);return A},set:(L)=>{O=L}}),typeof X.init==="function")X.init(B);return B}function Y(V,F){let O=X(this.namespace+(typeof F==="undefined"?":":F)+V);return O.log=this.log,O}function $(V){X.save(V),X.namespaces=V,X.names=[],X.skips=[];let F=(typeof V==="string"?V:"").trim().replace(" ",",").split(",").filter(Boolean);for(let O of F)if(O[0]==="-")X.skips.push(O.slice(1));else X.names.push(O)}function G(V,F){let O=0,N=0,A=-1,B=0;while(O<V.length)if(N<F.length&&(F[N]===V[O]||F[N]==="*"))if(F[N]==="*")A=N,B=O,N++;else O++,N++;else if(A!==-1)N=A+1,B++,O=B;else return!1;while(N<F.length&&F[N]==="*")N++;return N===F.length}function H(){let V=[...X.names,...X.skips.map((F)=>"-"+F)].join(",");return X.enable(""),V}function q(V){for(let F of X.skips)if(G(V,F))return!1;for(let F of X.names)if(G(V,F))return!0;return!1}function K(V){if(V instanceof Error)return V.stack||V.message;return V}function z(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return X.enable(X.load()),X}qG.exports=Jj});var WG=D((KG,c9)=>{KG.formatArgs=Yj;KG.save=$j;KG.load=Gj;KG.useColors=Xj;KG.storage=Hj();KG.destroy=(()=>{let Q=!1;return()=>{if(!Q)Q=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}})();KG.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Xj(){if(typeof window!=="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let Q;return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&(Q=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(Q[1],10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Yj(Q){if(Q[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+Q[0]+(this.useColors?"%c ":" ")+"+"+c9.exports.humanize(this.diff),!this.useColors)return;let J="color: "+this.color;Q.splice(1,0,J,"color: inherit");let X=0,Y=0;Q[0].replace(/%[a-zA-Z%]/g,($)=>{if($==="%%")return;if(X++,$==="%c")Y=X}),Q.splice(Y,0,J)}KG.log=console.debug||console.log||(()=>{});function $j(Q){try{if(Q)KG.storage.setItem("debug",Q);else KG.storage.removeItem("debug")}catch(J){}}function Gj(){let Q;try{Q=KG.storage.getItem("debug")}catch(J){}if(!Q&&typeof process!=="undefined"&&"env"in process)Q=process.env.DEBUG;return Q}function Hj(){try{return localStorage}catch(Q){}}c9.exports=Y5()(KG);var{formatters:qj}=c9.exports;qj.j=function(Q){try{return JSON.stringify(Q)}catch(J){return"[UnexpectedJSONParseError]: "+J.message}}});var UG=D((VG,p9)=>{var Oj=y("tty"),d9=y("util");VG.init=Cj;VG.log=Aj;VG.formatArgs=jj;VG.save=Dj;VG.load=Lj;VG.useColors=Nj;VG.destroy=d9.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");VG.colors=[6,2,3,4,5,1];try{let Q=(()=>{throw new Error("Cannot require module "+"supports-color");})();if(Q&&(Q.stderr||Q).level>=2)VG.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}catch(Q){}VG.inspectOpts=Object.keys(process.env).filter((Q)=>{return/^debug_/i.test(Q)}).reduce((Q,J)=>{let X=J.substring(6).toLowerCase().replace(/_([a-z])/g,($,G)=>{return G.toUpperCase()}),Y=process.env[J];if(/^(yes|on|true|enabled)$/i.test(Y))Y=!0;else if(/^(no|off|false|disabled)$/i.test(Y))Y=!1;else if(Y==="null")Y=null;else Y=Number(Y);return Q[X]=Y,Q},{});function Nj(){return"colors"in VG.inspectOpts?Boolean(VG.inspectOpts.colors):Oj.isatty(process.stderr.fd)}function jj(Q){let{namespace:J,useColors:X}=this;if(X){let Y=this.color,$="\x1B[3"+(Y<8?Y:"8;5;"+Y),G=`  ${$};1m${J} \x1B[0m`;Q[0]=G+Q[0].split(`
`).join(`
`+G),Q.push($+"m+"+p9.exports.humanize(this.diff)+"\x1B[0m")}else Q[0]=Bj()+J+" "+Q[0]}function Bj(){if(VG.inspectOpts.hideDate)return"";return new Date().toISOString()+" "}function Aj(...Q){return process.stderr.write(d9.formatWithOptions(VG.inspectOpts,...Q)+`
`)}function Dj(Q){if(Q)process.env.DEBUG=Q;else delete process.env.DEBUG}function Lj(){return process.env.DEBUG}function Cj(Q){Q.inspectOpts={};let J=Object.keys(VG.inspectOpts);for(let X=0;X<J.length;X++)Q.inspectOpts[J[X]]=VG.inspectOpts[J[X]]}p9.exports=Y5()(VG);var{formatters:zG}=p9.exports;zG.o=function(Q){return this.inspectOpts.colors=this.useColors,d9.inspect(Q,this.inspectOpts).split(`
`).map((J)=>J.trim()).join(" ")};zG.O=function(Q){return this.inspectOpts.colors=this.useColors,d9.inspect(Q,this.inspectOpts)}});var q1=D((HT,$5)=>{if(typeof process==="undefined"||process.type==="renderer"||!1||process.__nwjs)$5.exports=WG();else $5.exports=UG()});var NG=D((qT,OG)=>{var Sj=QG(),{EventEmitter:_j}=y("events"),FG=YG(),a=X5(),m=q1()("mqtt-packet:parser");class n9 extends _j{constructor(){super();this.parser=this.constructor.parser}static parser(Q){if(!(this instanceof n9))return new n9().parser(Q);return this.settings=Q||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this}_resetState(){m("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new FG,this.error=null,this._list=Sj(),this._stateCounter=0}parse(Q){if(this.error)this._resetState();this._list.append(Q),m("parse: current state: %s",this._states[this._stateCounter]);while((this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error)if(this._stateCounter++,m("parse: state complete. _stateCounter is now: %d",this._stateCounter),m("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length)this._stateCounter=0;return m("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let Q=this._list.readUInt8(0),J=Q>>a.CMD_SHIFT;this.packet.cmd=a.types[J];let X=Q&15,Y=a.requiredHeaderFlags[J];if(Y!=null&&X!==Y)return this._emitError(new Error(a.requiredHeaderFlagsErrors[J]));if(this.packet.retain=(Q&a.RETAIN_MASK)!==0,this.packet.qos=Q>>a.QOS_SHIFT&a.QOS_MASK,this.packet.qos>2)return this._emitError(new Error("Packet must not have both QoS bits set to 1"));return this.packet.dup=(Q&a.DUP_MASK)!==0,m("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0}_parseLength(){let Q=this._parseVarByteNum(!0);if(Q)this.packet.length=Q.value,this._list.consume(Q.bytes);return m("_parseLength %d",Q.value),!!Q}_parsePayload(){m("_parsePayload: payload %O",this._list);let Q=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}Q=!0}return m("_parsePayload complete result: %s",Q),Q}_parseConnect(){m("_parseConnect");let Q,J,X,Y,$={},G=this.packet,H=this._parseString();if(H===null)return this._emitError(new Error("Cannot parse protocolId"));if(H!=="MQTT"&&H!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(G.protocolId=H,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(G.protocolVersion=this._list.readUInt8(this._pos),G.protocolVersion>=128)G.bridgeMode=!0,G.protocolVersion=G.protocolVersion-128;if(G.protocolVersion!==3&&G.protocolVersion!==4&&G.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));$.username=this._list.readUInt8(this._pos)&a.USERNAME_MASK,$.password=this._list.readUInt8(this._pos)&a.PASSWORD_MASK,$.will=this._list.readUInt8(this._pos)&a.WILL_FLAG_MASK;let q=!!(this._list.readUInt8(this._pos)&a.WILL_RETAIN_MASK),K=(this._list.readUInt8(this._pos)&a.WILL_QOS_MASK)>>a.WILL_QOS_SHIFT;if($.will)G.will={},G.will.retain=q,G.will.qos=K;else{if(q)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(K)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(G.clean=(this._list.readUInt8(this._pos)&a.CLEAN_SESSION_MASK)!==0,this._pos++,G.keepalive=this._parseNum(),G.keepalive===-1)return this._emitError(new Error("Packet too short"));if(G.protocolVersion===5){let V=this._parseProperties();if(Object.getOwnPropertyNames(V).length)G.properties=V}let z=this._parseString();if(z===null)return this._emitError(new Error("Packet too short"));if(G.clientId=z,m("_parseConnect: packet.clientId: %s",G.clientId),$.will){if(G.protocolVersion===5){let V=this._parseProperties();if(Object.getOwnPropertyNames(V).length)G.will.properties=V}if(Q=this._parseString(),Q===null)return this._emitError(new Error("Cannot parse will topic"));if(G.will.topic=Q,m("_parseConnect: packet.will.topic: %s",G.will.topic),J=this._parseBuffer(),J===null)return this._emitError(new Error("Cannot parse will payload"));G.will.payload=J,m("_parseConnect: packet.will.paylaod: %s",G.will.payload)}if($.username){if(Y=this._parseString(),Y===null)return this._emitError(new Error("Cannot parse username"));G.username=Y,m("_parseConnect: packet.username: %s",G.username)}if($.password){if(X=this._parseBuffer(),X===null)return this._emitError(new Error("Cannot parse password"));G.password=X}return this.settings=G,m("_parseConnect: complete"),G}_parseConnack(){m("_parseConnack");let Q=this.packet;if(this._list.length<1)return null;let J=this._list.readUInt8(this._pos++);if(J>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(Q.sessionPresent=!!(J&a.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)if(this._list.length>=2)Q.reasonCode=this._list.readUInt8(this._pos++);else Q.reasonCode=0;else{if(this._list.length<2)return null;Q.returnCode=this._list.readUInt8(this._pos++)}if(Q.returnCode===-1||Q.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let X=this._parseProperties();if(Object.getOwnPropertyNames(X).length)Q.properties=X}m("_parseConnack: complete")}_parsePublish(){m("_parsePublish");let Q=this.packet;if(Q.topic=this._parseString(),Q.topic===null)return this._emitError(new Error("Cannot parse topic"));if(Q.qos>0){if(!this._parseMessageId())return}if(this.settings.protocolVersion===5){let J=this._parseProperties();if(Object.getOwnPropertyNames(J).length)Q.properties=J}Q.payload=this._list.slice(this._pos,Q.length),m("_parsePublish: payload from buffer list: %o",Q.payload)}_parseSubscribe(){m("_parseSubscribe");let Q=this.packet,J,X,Y,$,G,H,q;if(Q.subscriptions=[],!this._parseMessageId())return;if(this.settings.protocolVersion===5){let K=this._parseProperties();if(Object.getOwnPropertyNames(K).length)Q.properties=K}if(Q.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));while(this._pos<Q.length){if(J=this._parseString(),J===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=Q.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(X=this._parseByte(),this.settings.protocolVersion===5){if(X&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(X&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(Y=X&a.SUBSCRIBE_OPTIONS_QOS_MASK,Y>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(H=(X>>a.SUBSCRIBE_OPTIONS_NL_SHIFT&a.SUBSCRIBE_OPTIONS_NL_MASK)!==0,G=(X>>a.SUBSCRIBE_OPTIONS_RAP_SHIFT&a.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,$=X>>a.SUBSCRIBE_OPTIONS_RH_SHIFT&a.SUBSCRIBE_OPTIONS_RH_MASK,$>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));if(q={topic:J,qos:Y},this.settings.protocolVersion===5)q.nl=H,q.rap=G,q.rh=$;else if(this.settings.bridgeMode)q.rh=0,q.rap=!0,q.nl=!0;m("_parseSubscribe: push subscription `%s` to subscription",q),Q.subscriptions.push(q)}}_parseSuback(){m("_parseSuback");let Q=this.packet;if(this.packet.granted=[],!this._parseMessageId())return;if(this.settings.protocolVersion===5){let J=this._parseProperties();if(Object.getOwnPropertyNames(J).length)Q.properties=J}if(Q.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));while(this._pos<this.packet.length){let J=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!a.MQTT5_SUBACK_CODES[J])return this._emitError(new Error("Invalid suback code"))}else if(J>2&&J!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(J)}}_parseUnsubscribe(){m("_parseUnsubscribe");let Q=this.packet;if(Q.unsubscriptions=[],!this._parseMessageId())return;if(this.settings.protocolVersion===5){let J=this._parseProperties();if(Object.getOwnPropertyNames(J).length)Q.properties=J}if(Q.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));while(this._pos<Q.length){let J=this._parseString();if(J===null)return this._emitError(new Error("Cannot parse topic"));m("_parseUnsubscribe: push topic `%s` to unsubscriptions",J),Q.unsubscriptions.push(J)}}_parseUnsuback(){m("_parseUnsuback");let Q=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&Q.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(Q.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let J=this._parseProperties();if(Object.getOwnPropertyNames(J).length)Q.properties=J;Q.granted=[];while(this._pos<this.packet.length){let X=this._list.readUInt8(this._pos++);if(!a.MQTT5_UNSUBACK_CODES[X])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(X)}}}_parseConfirmation(){m("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let Q=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(Q.length>2){switch(Q.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!a.MQTT5_PUBACK_PUBREC_CODES[Q.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!a.MQTT5_PUBREL_PUBCOMP_CODES[Q.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}m("_parseConfirmation: packet.reasonCode `%d`",Q.reasonCode)}else Q.reasonCode=0;if(Q.length>3){let J=this._parseProperties();if(Object.getOwnPropertyNames(J).length)Q.properties=J}}return!0}_parseDisconnect(){let Q=this.packet;if(m("_parseDisconnect"),this.settings.protocolVersion===5){if(this._list.length>0){if(Q.reasonCode=this._parseByte(),!a.MQTT5_DISCONNECT_CODES[Q.reasonCode])this._emitError(new Error("Invalid disconnect reason code"))}else Q.reasonCode=0;let J=this._parseProperties();if(Object.getOwnPropertyNames(J).length)Q.properties=J}return m("_parseDisconnect result: true"),!0}_parseAuth(){m("_parseAuth");let Q=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(Q.reasonCode=this._parseByte(),!a.MQTT5_AUTH_CODES[Q.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let J=this._parseProperties();if(Object.getOwnPropertyNames(J).length)Q.properties=J;return m("_parseAuth: result: true"),!0}_parseMessageId(){let Q=this.packet;if(Q.messageId=this._parseNum(),Q.messageId===null)return this._emitError(new Error("Cannot parse messageId")),!1;return m("_parseMessageId: packet.messageId %d",Q.messageId),!0}_parseString(Q){let J=this._parseNum(),X=J+this._pos;if(J===-1||X>this._list.length||X>this.packet.length)return null;let Y=this._list.toString("utf8",this._pos,X);return this._pos+=J,m("_parseString: result: %s",Y),Y}_parseStringPair(){return m("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let Q=this._parseNum(),J=Q+this._pos;if(Q===-1||J>this._list.length||J>this.packet.length)return null;let X=this._list.slice(this._pos,J);return this._pos+=Q,m("_parseBuffer: result: %o",X),X}_parseNum(){if(this._list.length-this._pos<2)return-1;let Q=this._list.readUInt16BE(this._pos);return this._pos+=2,m("_parseNum: result: %s",Q),Q}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let Q=this._list.readUInt32BE(this._pos);return this._pos+=4,m("_parse4ByteNum: result: %s",Q),Q}_parseVarByteNum(Q){m("_parseVarByteNum");let J=4,X=0,Y=1,$=0,G=!1,H,q=this._pos?this._pos:0;while(X<J&&q+X<this._list.length){if(H=this._list.readUInt8(q+X++),$+=Y*(H&a.VARBYTEINT_MASK),Y*=128,(H&a.VARBYTEINT_FIN_MASK)===0){G=!0;break}if(this._list.length<=X)break}if(!G&&X===J&&this._list.length>=X)this._emitError(new Error("Invalid variable byte integer"));if(q)this._pos+=X;if(G)if(Q)G={bytes:X,value:$};else G=$;else G=!1;return m("_parseVarByteNum: result: %o",G),G}_parseByte(){let Q;if(this._pos<this._list.length)Q=this._list.readUInt8(this._pos),this._pos++;return m("_parseByte: result: %o",Q),Q}_parseByType(Q){switch(m("_parseByType: type: %s",Q),Q){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){m("_parseProperties");let Q=this._parseVarByteNum(),X=this._pos+Q,Y={};while(this._pos<X){let $=this._parseByte();if(!$)return this._emitError(new Error("Cannot parse property code type")),!1;let G=a.propertiesCodes[$];if(!G)return this._emitError(new Error("Unknown property")),!1;if(G==="userProperties"){if(!Y[G])Y[G]=Object.create(null);let H=this._parseByType(a.propertiesTypes[G]);if(Y[G][H.name])if(Array.isArray(Y[G][H.name]))Y[G][H.name].push(H.value);else{let q=Y[G][H.name];Y[G][H.name]=[q],Y[G][H.name].push(H.value)}else Y[G][H.name]=H.value;continue}if(Y[G])if(Array.isArray(Y[G]))Y[G].push(this._parseByType(a.propertiesTypes[G]));else Y[G]=[Y[G]],Y[G].push(this._parseByType(a.propertiesTypes[G]));else Y[G]=this._parseByType(a.propertiesTypes[G])}return Y}_newPacket(){if(m("_newPacket"),this.packet)this._list.consume(this.packet.length),m("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet);return m("_newPacket: new packet"),this.packet=new FG,this._pos=0,!0}_emitError(Q){m("_emitError",Q),this.error=Q,this.emit("error",Q)}}OG.exports=n9});var DG=D((KT,AG)=>{var{Buffer:A4}=y("buffer"),jG={},xj=A4.isBuffer(A4.from([1,2]).subarray(0,1));function BG(Q){let J=A4.allocUnsafe(2);return J.writeUInt8(Q>>8,0),J.writeUInt8(Q&255,1),J}function hj(){for(let Q=0;Q<65536;Q++)jG[Q]=BG(Q)}function vj(Q){let X=0,Y=0,$=A4.allocUnsafe(4);do{if(X=Q%128|0,Q=Q/128|0,Q>0)X=X|128;$.writeUInt8(X,Y++)}while(Q>0&&Y<4);if(Q>0)Y=0;return xj?$.subarray(0,Y):$.slice(0,Y)}function yj(Q){let J=A4.allocUnsafe(4);return J.writeUInt32BE(Q,0),J}AG.exports={cache:jG,generateCache:hj,generateNumber:BG,genBufVariableByteInt:vj,generate4ByteBuffer:yj}});var LG=D((WT,G5)=>{if(typeof process==="undefined"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0)G5.exports={nextTick:gj};else G5.exports=process;function gj(Q,J,X,Y){if(typeof Q!=="function")throw new TypeError('"callback" argument must be a function');var $=arguments.length,G,H;switch($){case 0:case 1:return process.nextTick(Q);case 2:return process.nextTick(function q(){Q.call(null,J)});case 3:return process.nextTick(function q(){Q.call(null,J,X)});case 4:return process.nextTick(function q(){Q.call(null,J,X,Y)});default:G=new Array($-1),H=0;while(H<G.length)G[H++]=arguments[H];return process.nextTick(function q(){Q.apply(null,G)})}}});var K5=D((zT,ZG)=>{var u=X5(),{Buffer:k}=y("buffer"),fj=k.allocUnsafe(0),kj=k.from([0]),D4=DG(),bj=LG().nextTick,i0=q1()("mqtt-packet:writeToStream"),i9=D4.cache,mj=D4.generateNumber,uj=D4.generateCache,H5=D4.genBufVariableByteInt,lj=D4.generate4ByteBuffer,S0=q5,o9=!0;function TG(Q,J,X){if(i0("generate called"),J.cork)J.cork(),bj(cj,J);if(o9)o9=!1,uj();switch(i0("generate: packet.cmd: %s",Q.cmd),Q.cmd){case"connect":return dj(Q,J,X);case"connack":return pj(Q,J,X);case"publish":return nj(Q,J,X);case"puback":case"pubrec":case"pubrel":case"pubcomp":return ij(Q,J,X);case"subscribe":return oj(Q,J,X);case"suback":return rj(Q,J,X);case"unsubscribe":return aj(Q,J,X);case"unsuback":return sj(Q,J,X);case"pingreq":case"pingresp":return tj(Q,J,X);case"disconnect":return ej(Q,J,X);case"auth":return QB(Q,J,X);default:return J.destroy(new Error("Unknown command")),!1}}Object.defineProperty(TG,"cacheNumbers",{get(){return S0===q5},set(Q){if(Q){if(!i9||Object.keys(i9).length===0)o9=!0;S0=q5}else o9=!1,S0=JB}});function cj(Q){Q.uncork()}function dj(Q,J,X){let Y=Q||{},$=Y.protocolId||"MQTT",G=Y.protocolVersion||4,H=Y.will,q=Y.clean,K=Y.keepalive||0,z=Y.clientId||"",V=Y.username,F=Y.password,O=Y.properties;if(q===void 0)q=!0;let N=0;if(!$||typeof $!=="string"&&!k.isBuffer($))return J.destroy(new Error("Invalid protocolId")),!1;else N+=$.length+2;if(G!==3&&G!==4&&G!==5)return J.destroy(new Error("Invalid protocol version")),!1;else N+=1;if((typeof z==="string"||k.isBuffer(z))&&(z||G>=4)&&(z||q))N+=k.byteLength(z)+2;else{if(G<4)return J.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(q*1===0)return J.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof K!=="number"||K<0||K>65535||K%1!==0)return J.destroy(new Error("Invalid keepalive")),!1;else N+=2;N+=1;let A,B;if(G===5){if(A=$8(J,O),!A)return!1;N+=A.length}if(H){if(typeof H!=="object")return J.destroy(new Error("Invalid will")),!1;if(!H.topic||typeof H.topic!=="string")return J.destroy(new Error("Invalid will topic")),!1;else N+=k.byteLength(H.topic)+2;if(N+=2,H.payload)if(H.payload.length>=0)if(typeof H.payload==="string")N+=k.byteLength(H.payload);else N+=H.payload.length;else return J.destroy(new Error("Invalid will payload")),!1;if(B={},G===5){if(B=$8(J,H.properties),!B)return!1;N+=B.length}}let L=!1;if(V!=null)if(RG(V))L=!0,N+=k.byteLength(V)+2;else return J.destroy(new Error("Invalid username")),!1;if(F!=null){if(!L)return J.destroy(new Error("Username is required to use password")),!1;if(RG(F))N+=IG(F)+2;else return J.destroy(new Error("Invalid password")),!1}if(J.write(u.CONNECT_HEADER),o0(J,N),PQ(J,$),Y.bridgeMode)G+=128;J.write(G===131?u.VERSION131:G===132?u.VERSION132:G===4?u.VERSION4:G===5?u.VERSION5:u.VERSION3);let C=0;if(C|=V!=null?u.USERNAME_MASK:0,C|=F!=null?u.PASSWORD_MASK:0,C|=H&&H.retain?u.WILL_RETAIN_MASK:0,C|=H&&H.qos?H.qos<<u.WILL_QOS_SHIFT:0,C|=H?u.WILL_FLAG_MASK:0,C|=q?u.CLEAN_SESSION_MASK:0,J.write(k.from([C])),S0(J,K),G===5)A.write();if(PQ(J,z),H){if(G===5)B.write();k8(J,H.topic),PQ(J,H.payload)}if(V!=null)PQ(J,V);if(F!=null)PQ(J,F);return!0}function pj(Q,J,X){let Y=X?X.protocolVersion:4,$=Q||{},G=Y===5?$.reasonCode:$.returnCode,H=$.properties,q=2;if(typeof G!=="number")return J.destroy(new Error("Invalid return code")),!1;let K=null;if(Y===5){if(K=$8(J,H),!K)return!1;q+=K.length}if(J.write(u.CONNACK_HEADER),o0(J,q),J.write($.sessionPresent?u.SESSIONPRESENT_HEADER:kj),J.write(k.from([G])),K!=null)K.write();return!0}function nj(Q,J,X){i0("publish: packet: %o",Q);let Y=X?X.protocolVersion:4,$=Q||{},G=$.qos||0,H=$.retain?u.RETAIN_MASK:0,q=$.topic,K=$.payload||fj,z=$.messageId,V=$.properties,F=0;if(typeof q==="string")F+=k.byteLength(q)+2;else if(k.isBuffer(q))F+=q.length+2;else return J.destroy(new Error("Invalid topic")),!1;if(!k.isBuffer(K))F+=k.byteLength(K);else F+=K.length;if(G&&typeof z!=="number")return J.destroy(new Error("Invalid messageId")),!1;else if(G)F+=2;let O=null;if(Y===5){if(O=$8(J,V),!O)return!1;F+=O.length}if(J.write(u.PUBLISH_HEADER[G][$.dup?1:0][H?1:0]),o0(J,F),S0(J,IG(q)),J.write(q),G>0)S0(J,z);if(O!=null)O.write();return i0("publish: payload: %o",K),J.write(K)}function ij(Q,J,X){let Y=X?X.protocolVersion:4,$=Q||{},G=$.cmd||"puback",H=$.messageId,q=$.dup&&G==="pubrel"?u.DUP_MASK:0,K=0,z=$.reasonCode,V=$.properties,F=Y===5?3:2;if(G==="pubrel")K=1;if(typeof H!=="number")return J.destroy(new Error("Invalid messageId")),!1;let O=null;if(Y===5){if(typeof V==="object"){if(O=L4(J,V,X,F),!O)return!1;F+=O.length}}if(J.write(u.ACKS[G][K][q][0]),F===3)F+=z!==0?1:-1;if(o0(J,F),S0(J,H),Y===5&&F!==2)J.write(k.from([z]));if(O!==null)O.write();else if(F===4)J.write(k.from([0]));return!0}function oj(Q,J,X){i0("subscribe: packet: ");let Y=X?X.protocolVersion:4,$=Q||{},G=$.dup?u.DUP_MASK:0,H=$.messageId,q=$.subscriptions,K=$.properties,z=0;if(typeof H!=="number")return J.destroy(new Error("Invalid messageId")),!1;else z+=2;let V=null;if(Y===5){if(V=$8(J,K),!V)return!1;z+=V.length}if(typeof q==="object"&&q.length)for(let O=0;O<q.length;O+=1){let N=q[O].topic,A=q[O].qos;if(typeof N!=="string")return J.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof A!=="number")return J.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(Y===5){if(typeof(q[O].nl||!1)!=="boolean")return J.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(q[O].rap||!1)!=="boolean")return J.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let C=q[O].rh||0;if(typeof C!=="number"||C>2)return J.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}z+=k.byteLength(N)+2+1}else return J.destroy(new Error("Invalid subscriptions")),!1;if(i0("subscribe: writing to stream: %o",u.SUBSCRIBE_HEADER),J.write(u.SUBSCRIBE_HEADER[1][G?1:0][0]),o0(J,z),S0(J,H),V!==null)V.write();let F=!0;for(let O of q){let{topic:N,qos:A}=O,B=+O.nl,L=+O.rap,C=O.rh,P;if(k8(J,N),P=u.SUBSCRIBE_OPTIONS_QOS[A],Y===5)P|=B?u.SUBSCRIBE_OPTIONS_NL:0,P|=L?u.SUBSCRIBE_OPTIONS_RAP:0,P|=C?u.SUBSCRIBE_OPTIONS_RH[C]:0;F=J.write(k.from([P]))}return F}function rj(Q,J,X){let Y=X?X.protocolVersion:4,$=Q||{},G=$.messageId,H=$.granted,q=$.properties,K=0;if(typeof G!=="number")return J.destroy(new Error("Invalid messageId")),!1;else K+=2;if(typeof H==="object"&&H.length)for(let V=0;V<H.length;V+=1){if(typeof H[V]!=="number")return J.destroy(new Error("Invalid qos vector")),!1;K+=1}else return J.destroy(new Error("Invalid qos vector")),!1;let z=null;if(Y===5){if(z=L4(J,q,X,K),!z)return!1;K+=z.length}if(J.write(u.SUBACK_HEADER),o0(J,K),S0(J,G),z!==null)z.write();return J.write(k.from(H))}function aj(Q,J,X){let Y=X?X.protocolVersion:4,$=Q||{},G=$.messageId,H=$.dup?u.DUP_MASK:0,q=$.unsubscriptions,K=$.properties,z=0;if(typeof G!=="number")return J.destroy(new Error("Invalid messageId")),!1;else z+=2;if(typeof q==="object"&&q.length)for(let O=0;O<q.length;O+=1){if(typeof q[O]!=="string")return J.destroy(new Error("Invalid unsubscriptions")),!1;z+=k.byteLength(q[O])+2}else return J.destroy(new Error("Invalid unsubscriptions")),!1;let V=null;if(Y===5){if(V=$8(J,K),!V)return!1;z+=V.length}if(J.write(u.UNSUBSCRIBE_HEADER[1][H?1:0][0]),o0(J,z),S0(J,G),V!==null)V.write();let F=!0;for(let O=0;O<q.length;O++)F=k8(J,q[O]);return F}function sj(Q,J,X){let Y=X?X.protocolVersion:4,$=Q||{},G=$.messageId,H=$.dup?u.DUP_MASK:0,q=$.granted,K=$.properties,z=$.cmd,V=0,F=2;if(typeof G!=="number")return J.destroy(new Error("Invalid messageId")),!1;if(Y===5)if(typeof q==="object"&&q.length)for(let N=0;N<q.length;N+=1){if(typeof q[N]!=="number")return J.destroy(new Error("Invalid qos vector")),!1;F+=1}else return J.destroy(new Error("Invalid qos vector")),!1;let O=null;if(Y===5){if(O=L4(J,K,X,F),!O)return!1;F+=O.length}if(J.write(u.ACKS[z][0][H][0]),o0(J,F),S0(J,G),O!==null)O.write();if(Y===5)J.write(k.from(q));return!0}function tj(Q,J,X){return J.write(u.EMPTY[Q.cmd])}function ej(Q,J,X){let Y=X?X.protocolVersion:4,$=Q||{},G=$.reasonCode,H=$.properties,q=Y===5?1:0,K=null;if(Y===5){if(K=L4(J,H,X,q),!K)return!1;q+=K.length}if(J.write(k.from([u.codes.disconnect<<4])),o0(J,q),Y===5)J.write(k.from([G]));if(K!==null)K.write();return!0}function QB(Q,J,X){let Y=X?X.protocolVersion:4,$=Q||{},G=$.reasonCode,H=$.properties,q=Y===5?1:0;if(Y!==5)J.destroy(new Error("Invalid mqtt version for auth packet"));let K=L4(J,H,X,q);if(!K)return!1;if(q+=K.length,J.write(k.from([u.codes.auth<<4])),o0(J,q),J.write(k.from([G])),K!==null)K.write();return!0}var CG={};function o0(Q,J){if(J>u.VARBYTEINT_MAX)return Q.destroy(new Error(`Invalid variable byte integer: ${J}`)),!1;let X=CG[J];if(!X){if(X=H5(J),J<16384)CG[J]=X}return i0("writeVarByteInt: writing to stream: %o",X),Q.write(X)}function k8(Q,J){let X=k.byteLength(J);return S0(Q,X),i0("writeString: %s",J),Q.write(J,"utf8")}function PG(Q,J,X){k8(Q,J),k8(Q,X)}function q5(Q,J){return i0("writeNumberCached: number: %d",J),i0("writeNumberCached: %o",i9[J]),Q.write(i9[J])}function JB(Q,J){let X=mj(J);return i0("writeNumberGenerated: %o",X),Q.write(X)}function XB(Q,J){let X=lj(J);return i0("write4ByteNumber: %o",X),Q.write(X)}function PQ(Q,J){if(typeof J==="string")k8(Q,J);else if(J)S0(Q,J.length),Q.write(J);else S0(Q,0)}function $8(Q,J){if(typeof J!=="object"||J.length!=null)return{length:1,write(){EG(Q,{},0)}};let X=0;function Y(G,H){let q=u.propertiesTypes[G],K=0;switch(q){case"byte":{if(typeof H!=="boolean")return Q.destroy(new Error(`Invalid ${G}: ${H}`)),!1;K+=2;break}case"int8":{if(typeof H!=="number"||H<0||H>255)return Q.destroy(new Error(`Invalid ${G}: ${H}`)),!1;K+=2;break}case"binary":{if(H&&H===null)return Q.destroy(new Error(`Invalid ${G}: ${H}`)),!1;K+=1+k.byteLength(H)+2;break}case"int16":{if(typeof H!=="number"||H<0||H>65535)return Q.destroy(new Error(`Invalid ${G}: ${H}`)),!1;K+=3;break}case"int32":{if(typeof H!=="number"||H<0||H>4294967295)return Q.destroy(new Error(`Invalid ${G}: ${H}`)),!1;K+=5;break}case"var":{if(typeof H!=="number"||H<0||H>268435455)return Q.destroy(new Error(`Invalid ${G}: ${H}`)),!1;K+=1+k.byteLength(H5(H));break}case"string":{if(typeof H!=="string")return Q.destroy(new Error(`Invalid ${G}: ${H}`)),!1;K+=3+k.byteLength(H.toString());break}case"pair":{if(typeof H!=="object")return Q.destroy(new Error(`Invalid ${G}: ${H}`)),!1;K+=Object.getOwnPropertyNames(H).reduce((z,V)=>{let F=H[V];if(Array.isArray(F))z+=F.reduce((O,N)=>{return O+=3+k.byteLength(V.toString())+2+k.byteLength(N.toString()),O},0);else z+=3+k.byteLength(V.toString())+2+k.byteLength(H[V].toString());return z},0);break}default:return Q.destroy(new Error(`Invalid property ${G}: ${H}`)),!1}return K}if(J)for(let G in J){let H=0,q=0,K=J[G];if(K===void 0)continue;else if(Array.isArray(K))for(let z=0;z<K.length;z++){if(q=Y(G,K[z]),!q)return!1;H+=q}else{if(q=Y(G,K),!q)return!1;H=q}if(!H)return!1;X+=H}return{length:k.byteLength(H5(X))+X,write(){EG(Q,J,X)}}}function L4(Q,J,X,Y){let $=["reasonString","userProperties"],G=X&&X.properties&&X.properties.maximumPacketSize?X.properties.maximumPacketSize:0,H=$8(Q,J);if(G)while(Y+H.length>G){let q=$.shift();if(q&&J[q])delete J[q],H=$8(Q,J);else return!1}return H}function wG(Q,J,X){switch(u.propertiesTypes[J]){case"byte":{Q.write(k.from([u.properties[J]])),Q.write(k.from([+X]));break}case"int8":{Q.write(k.from([u.properties[J]])),Q.write(k.from([X]));break}case"binary":{Q.write(k.from([u.properties[J]])),PQ(Q,X);break}case"int16":{Q.write(k.from([u.properties[J]])),S0(Q,X);break}case"int32":{Q.write(k.from([u.properties[J]])),XB(Q,X);break}case"var":{Q.write(k.from([u.properties[J]])),o0(Q,X);break}case"string":{Q.write(k.from([u.properties[J]])),k8(Q,X);break}case"pair":{Object.getOwnPropertyNames(X).forEach(($)=>{let G=X[$];if(Array.isArray(G))G.forEach((H)=>{Q.write(k.from([u.properties[J]])),PG(Q,$.toString(),H.toString())});else Q.write(k.from([u.properties[J]])),PG(Q,$.toString(),G.toString())});break}default:return Q.destroy(new Error(`Invalid property ${J} value: ${X}`)),!1}}function EG(Q,J,X){o0(Q,X);for(let Y in J)if(Object.prototype.hasOwnProperty.call(J,Y)&&J[Y]!=null){let $=J[Y];if(Array.isArray($))for(let G=0;G<$.length;G++)wG(Q,Y,$[G]);else wG(Q,Y,$)}}function IG(Q){if(!Q)return 0;else if(Q instanceof k)return Q.length;else return k.byteLength(Q)}function RG(Q){return typeof Q==="string"||Q instanceof k}ZG.exports=TG});var hG=D((VT,xG)=>{var YB=K5(),{EventEmitter:$B}=y("events"),{Buffer:SG}=y("buffer");function GB(Q,J){let X=new _G;return YB(Q,X,J),X.concat()}class _G extends $B{constructor(){super();this._array=new Array(20),this._i=0}write(Q){return this._array[this._i++]=Q,!0}concat(){let Q=0,J=new Array(this._array.length),X=this._array,Y=0,$;for($=0;$<X.length&&X[$]!==void 0;$++){if(typeof X[$]!=="string")J[$]=X[$].length;else J[$]=SG.byteLength(X[$]);Q+=J[$]}let G=SG.allocUnsafe(Q);for($=0;$<X.length&&X[$]!==void 0;$++)if(typeof X[$]!=="string")X[$].copy(G,Y),Y+=J[$];else G.write(X[$],Y),Y+=J[$];return G}destroy(Q){if(Q)this.emit("error",Q)}}xG.exports=GB});var vG=D((HB)=>{HB.parser=NG().parser;HB.generate=hG();HB.writeToStream=K5()});var W5=D((gG)=>{Object.defineProperty(gG,"__esModule",{value:!0});class yG{constructor(){this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let Q=this.nextId++;if(this.nextId===65536)this.nextId=1;return Q}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(Q){return!0}deallocate(Q){}clear(){}}gG.default=yG});var kG=D((FT,fG)=>{fG.exports=VB;function wQ(Q){if(Q instanceof Buffer)return Buffer.from(Q);return new Q.constructor(Q.buffer.slice(),Q.byteOffset,Q.length)}function VB(Q){if(Q=Q||{},Q.circles)return MB(Q);let J=new Map;if(J.set(Date,(H)=>new Date(H)),J.set(Map,(H,q)=>new Map(Y(Array.from(H),q))),J.set(Set,(H,q)=>new Set(Y(Array.from(H),q))),Q.constructorHandlers)for(let H of Q.constructorHandlers)J.set(H[0],H[1]);let X=null;return Q.proto?G:$;function Y(H,q){let K=Object.keys(H),z=new Array(K.length);for(let V=0;V<K.length;V++){let F=K[V],O=H[F];if(typeof O!=="object"||O===null)z[F]=O;else if(O.constructor!==Object&&(X=J.get(O.constructor)))z[F]=X(O,q);else if(ArrayBuffer.isView(O))z[F]=wQ(O);else z[F]=q(O)}return z}function $(H){if(typeof H!=="object"||H===null)return H;if(Array.isArray(H))return Y(H,$);if(H.constructor!==Object&&(X=J.get(H.constructor)))return X(H,$);let q={};for(let K in H){if(Object.hasOwnProperty.call(H,K)===!1)continue;let z=H[K];if(typeof z!=="object"||z===null)q[K]=z;else if(z.constructor!==Object&&(X=J.get(z.constructor)))q[K]=X(z,$);else if(ArrayBuffer.isView(z))q[K]=wQ(z);else q[K]=$(z)}return q}function G(H){if(typeof H!=="object"||H===null)return H;if(Array.isArray(H))return Y(H,G);if(H.constructor!==Object&&(X=J.get(H.constructor)))return X(H,G);let q={};for(let K in H){let z=H[K];if(typeof z!=="object"||z===null)q[K]=z;else if(z.constructor!==Object&&(X=J.get(z.constructor)))q[K]=X(z,G);else if(ArrayBuffer.isView(z))q[K]=wQ(z);else q[K]=G(z)}return q}}function MB(Q){let J=[],X=[],Y=new Map;if(Y.set(Date,(K)=>new Date(K)),Y.set(Map,(K,z)=>new Map(G(Array.from(K),z))),Y.set(Set,(K,z)=>new Set(G(Array.from(K),z))),Q.constructorHandlers)for(let K of Q.constructorHandlers)Y.set(K[0],K[1]);let $=null;return Q.proto?q:H;function G(K,z){let V=Object.keys(K),F=new Array(V.length);for(let O=0;O<V.length;O++){let N=V[O],A=K[N];if(typeof A!=="object"||A===null)F[N]=A;else if(A.constructor!==Object&&($=Y.get(A.constructor)))F[N]=$(A,z);else if(ArrayBuffer.isView(A))F[N]=wQ(A);else{let B=J.indexOf(A);if(B!==-1)F[N]=X[B];else F[N]=z(A)}}return F}function H(K){if(typeof K!=="object"||K===null)return K;if(Array.isArray(K))return G(K,H);if(K.constructor!==Object&&($=Y.get(K.constructor)))return $(K,H);let z={};J.push(K),X.push(z);for(let V in K){if(Object.hasOwnProperty.call(K,V)===!1)continue;let F=K[V];if(typeof F!=="object"||F===null)z[V]=F;else if(F.constructor!==Object&&($=Y.get(F.constructor)))z[V]=$(F,H);else if(ArrayBuffer.isView(F))z[V]=wQ(F);else{let O=J.indexOf(F);if(O!==-1)z[V]=X[O];else z[V]=H(F)}}return J.pop(),X.pop(),z}function q(K){if(typeof K!=="object"||K===null)return K;if(Array.isArray(K))return G(K,q);if(K.constructor!==Object&&($=Y.get(K.constructor)))return $(K,q);let z={};J.push(K),X.push(z);for(let V in K){let F=K[V];if(typeof F!=="object"||F===null)z[V]=F;else if(F.constructor!==Object&&($=Y.get(F.constructor)))z[V]=$(F,q);else if(ArrayBuffer.isView(F))z[V]=wQ(F);else{let O=J.indexOf(F);if(O!==-1)z[V]=X[O];else z[V]=q(F)}}return J.pop(),X.pop(),z}}});var mG=D((OT,bG)=>{bG.exports=kG()()});var cG=D((lG)=>{Object.defineProperty(lG,"__esModule",{value:!0});lG.validateTopic=uG;lG.validateTopics=UB;function uG(Q){let J=Q.split("/");for(let X=0;X<J.length;X++){if(J[X]==="+")continue;if(J[X]==="#")return X===J.length-1;if(J[X].indexOf("+")!==-1||J[X].indexOf("#")!==-1)return!1}return!0}function UB(Q){if(Q.length===0)return"empty_topic_list";for(let J=0;J<Q.length;J++)if(!uG(Q[J]))return Q[J];return null}});var z5=D((pG)=>{Object.defineProperty(pG,"__esModule",{value:!0});var NB=X8(),jB={objectMode:!0},BB={clean:!0};class dG{constructor(Q){this.options=Q||{},this.options=Object.assign(Object.assign({},BB),Q),this._inflights=new Map}put(Q,J){if(this._inflights.set(Q.messageId,Q),J)J();return this}createStream(){let Q=new NB.Readable(jB),J=[],X=!1,Y=0;return this._inflights.forEach(($,G)=>{J.push($)}),Q._read=()=>{if(!X&&Y<J.length)Q.push(J[Y++]);else Q.push(null)},Q.destroy=($)=>{if(X)return;return X=!0,setTimeout(()=>{Q.emit("close")},0),Q},Q}del(Q,J){let X=this._inflights.get(Q.messageId);if(X)this._inflights.delete(Q.messageId),J(null,X);else if(J)J(new Error("missing packet"));return this}get(Q,J){let X=this._inflights.get(Q.messageId);if(X)J(null,X);else if(J)J(new Error("missing packet"));return this}close(Q){if(this.options.clean)this._inflights=null;if(Q)Q()}}pG.default=dG});var oG=D((iG)=>{Object.defineProperty(iG,"__esModule",{value:!0});var nG=[0,16,128,131,135,144,145,151,153],DB=(Q,J,X)=>{Q.log("handlePublish: packet %o",J),X=typeof X!=="undefined"?X:Q.noop;let Y=J.topic.toString(),$=J.payload,{qos:G}=J,{messageId:H}=J,{options:q}=Q;if(Q.options.protocolVersion===5){let K;if(J.properties)K=J.properties.topicAlias;if(typeof K!=="undefined")if(Y.length===0)if(K>0&&K<=65535){let z=Q.topicAliasRecv.getTopicByAlias(K);if(z)Y=z,Q.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",Y,K);else{Q.log("handlePublish :: unregistered topic alias. alias: %d",K),Q.emit("error",new Error("Received unregistered Topic Alias"));return}}else{Q.log("handlePublish :: topic alias out of range. alias: %d",K),Q.emit("error",new Error("Received Topic Alias is out of range"));return}else if(Q.topicAliasRecv.put(Y,K))Q.log("handlePublish :: registered topic: %s - alias: %d",Y,K);else{Q.log("handlePublish :: topic alias out of range. alias: %d",K),Q.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(Q.log("handlePublish: qos %d",G),G){case 2:{q.customHandleAcks(Y,$,J,(K,z)=>{if(typeof K==="number")z=K,K=null;if(K)return Q.emit("error",K);if(nG.indexOf(z)===-1)return Q.emit("error",new Error("Wrong reason code for pubrec"));if(z)Q._sendPacket({cmd:"pubrec",messageId:H,reasonCode:z},X);else Q.incomingStore.put(J,()=>{Q._sendPacket({cmd:"pubrec",messageId:H},X)})});break}case 1:{q.customHandleAcks(Y,$,J,(K,z)=>{if(typeof K==="number")z=K,K=null;if(K)return Q.emit("error",K);if(nG.indexOf(z)===-1)return Q.emit("error",new Error("Wrong reason code for puback"));if(!z)Q.emit("message",Y,$,J);Q.handleMessage(J,(V)=>{if(V)return X&&X(V);Q._sendPacket({cmd:"puback",messageId:H,reasonCode:z},X)})});break}case 0:Q.emit("message",Y,$,J),Q.handleMessage(J,X);break;default:Q.log("handlePublish: unknown QoS. Doing nothing.");break}};iG.default=DB});var rG=D((AT,CB)=>{CB.exports={name:"mqtt",description:"A library for the MQTT protocol",version:"5.11.0",contributors:["Adam Rudd <adamvrr@gmail.com>","Matteo Collina <matteo.collina@gmail.com> (https://github.com/mcollina)","Siarhei Buntsevich <scarry0506@gmail.com> (https://github.com/scarry1992)","Yoseph Maguire <yomaguir@microsoft.com> (https://github.com/YoDaMa)","Daniel Lando <daniel.sorridi@gmail.com> (https://github.com/robertsLando)"],keywords:["mqtt","publish/subscribe","publish","subscribe"],license:"MIT",repository:{type:"git",url:"git://github.com/mqttjs/MQTT.js.git"},main:"./build/index.js",module:"./dist/mqtt.esm.js",bin:{mqtt_pub:"./build/bin/pub.js",mqtt_sub:"./build/bin/sub.js",mqtt:"./build/bin/mqtt.js"},files:["dist/","CONTRIBUTING.md","LICENSE.md","help/","build/","src/"],exports:{".":{browser:{import:"./dist/mqtt.esm.js",default:"./dist/mqtt.min.js"},default:"./build/index.js"},"./package.json":"./package.json","./*.map":"./build/*.js.map","./dist/*":"./dist/*.js","./*":"./build/*.js"},types:"build/index.d.ts",typesVersions:{"*":{"*":["./build/index.d.ts"]}},scripts:{lint:"eslint --ext .ts .","lint-fix":"eslint --fix --ext .ts .","build:ts":"rimraf build/ && tsc -p tsconfig.build.json","build:browser":"node esbuild.js",build:"npm run build:ts && npm run build:browser",prepare:"npm run build","unit-test:node":"node -r esbuild-register --test-concurrency 4 --test-reporter=junit --test-reporter-destination=junit.xml --test-reporter=spec --test-reporter-destination=stdout --test test/node/*.ts ","unit-test:browser":"wtr","test:node":"node_modules/.bin/nyc npm run unit-test:node","test:browser":"npm run build && npm run unit-test:browser",test:"npm run test:node",changelog:"conventional-changelog -p angular -i CHANGELOG.md -s && git add CHANGELOG.md","changelog-init":"conventional-changelog -p angular -i CHANGELOG.md -s -r 0",release:"read -p 'GITHUB_TOKEN: ' GITHUB_TOKEN && export GITHUB_TOKEN=$GITHUB_TOKEN && release-it"},"release-it":{github:{release:!0},git:{tagName:"v${version}",commitMessage:"chore(release): ${version}"},hooks:{"before:init":["npm run test"]},npm:{publish:!0},plugins:{"@release-it/conventional-changelog":{preset:"angular",infile:"CHANGELOG.md"}}},publishConfig:{provenance:!0},"pre-commit":["lint"],engines:{node:">=16.0.0"},browser:{"./mqtt.js":"./dist/mqtt.js",fs:!1,tls:!1,net:!1},dependencies:{"@types/readable-stream":"^4.0.18","@types/ws":"^8.5.14",commist:"^3.2.0","concat-stream":"^2.0.0",debug:"^4.4.0","help-me":"^5.0.0","lru-cache":"^10.4.3",minimist:"^1.2.8","mqtt-packet":"^9.0.2","number-allocator":"^1.0.14","readable-stream":"^4.7.0",reinterval:"^1.1.0",rfdc:"^1.4.1",socks:"^2.8.3",split2:"^4.2.0","worker-timers":"^7.1.8",ws:"^8.18.0"},devDependencies:{"@esm-bundle/chai":"^4.3.4","@release-it/conventional-changelog":"^7.0.2","@types/chai":"^4.3.20","@types/node":"^20.17.16","@types/sinon":"^17.0.3","@types/tape":"^5.8.1","@typescript-eslint/eslint-plugin":"^6.21.0","@typescript-eslint/parser":"^6.21.0","@web/test-runner":"^0.19.0","@web/test-runner-playwright":"^0.11.0","aedes-cli":"^0.8.0",chai:"^4.5.0",chokidar:"^3.6.0","conventional-changelog-cli":"^4.1.0","end-of-stream":"^1.4.4",esbuild:"^0.25.0","esbuild-plugin-polyfill-node":"^0.3.0","esbuild-register":"^3.6.0",eslint:"^8.57.1","eslint-config-airbnb-base":"^15.0.0","eslint-config-airbnb-typescript":"^17.1.0","eslint-config-prettier":"^9.1.0","eslint-plugin-import":"^2.31.0","eslint-plugin-prettier":"^5.2.3",global:"^4.4.0","leaked-handles":"^5.2.0",mkdirp:"^3.0.1","mqtt-connection":"^4.1.0","mqtt-level-store":"^3.1.0",nyc:"^15.1.0","pre-commit":"^1.2.2",prettier:"^3.4.2","release-it":"^16.3.0",rimraf:"^5.0.10",should:"^13.2.3",sinon:"^17.0.2",snazzy:"^9.0.0",tape:"^5.9.0","ts-node":"^10.9.2",typescript:"^5.7.3"}}});var b8=D((aG)=>{Object.defineProperty(aG,"__esModule",{value:!0});aG.MQTTJS_VERSION=aG.nextTick=aG.ErrorWithReasonCode=void 0;aG.applyMixin=PB;class V5 extends Error{constructor(Q,J){super(Q);this.code=J,Object.setPrototypeOf(this,V5.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}}aG.ErrorWithReasonCode=V5;function PB(Q,J,X=!1){var Y;let $=[J];while(!0){let G=$[0],H=Object.getPrototypeOf(G);if(H===null||H===void 0?void 0:H.prototype)$.unshift(H);else break}for(let G of $)for(let H of Object.getOwnPropertyNames(G.prototype))if(X||H!=="constructor")Object.defineProperty(Q.prototype,H,(Y=Object.getOwnPropertyDescriptor(G.prototype,H))!==null&&Y!==void 0?Y:Object.create(null))}aG.nextTick=typeof(process===null||process===void 0?void 0:process.nextTick)==="function"?process.nextTick:(Q)=>{setTimeout(Q,0)};aG.MQTTJS_VERSION=rG().version});var P4=D((eG)=>{Object.defineProperty(eG,"__esModule",{value:!0});eG.ReasonCodes=void 0;var tG=b8();eG.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var TB=(Q,J)=>{let{messageId:X}=J,Y=J.cmd,$=null,G=Q.outgoing[X]?Q.outgoing[X].cb:null,H=null;if(!G){Q.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(Q.log("_handleAck :: packet type",Y),Y){case"pubcomp":case"puback":{let q=J.reasonCode;if(q&&q>0&&q!==16)H=new tG.ErrorWithReasonCode(`Publish error: ${eG.ReasonCodes[q]}`,q),Q._removeOutgoingAndStoreMessage(X,()=>{G(H,J)});else Q._removeOutgoingAndStoreMessage(X,G);break}case"pubrec":{$={cmd:"pubrel",qos:2,messageId:X};let q=J.reasonCode;if(q&&q>0&&q!==16)H=new tG.ErrorWithReasonCode(`Publish error: ${eG.ReasonCodes[q]}`,q),Q._removeOutgoingAndStoreMessage(X,()=>{G(H,J)});else Q._sendPacket($);break}case"suback":{delete Q.outgoing[X],Q.messageIdProvider.deallocate(X);let q=J.granted;for(let K=0;K<q.length;K++){let z=q[K];if((z&128)!==0){H=new Error(`Subscribe error: ${eG.ReasonCodes[z]}`),H.code=z;let V=Q.messageIdToTopic[X];if(V)V.forEach((F)=>{delete Q._resubscribeTopics[F]})}}delete Q.messageIdToTopic[X],Q._invokeStoreProcessingQueue(),G(H,J);break}case"unsuback":{delete Q.outgoing[X],Q.messageIdProvider.deallocate(X),Q._invokeStoreProcessingQueue(),G(null,J);break}default:Q.emit("error",new Error("unrecognized packet type"))}if(Q.disconnecting&&Object.keys(Q.outgoing).length===0)Q.emit("outgoingEmpty")};eG.default=TB});var XH=D((JH)=>{Object.defineProperty(JH,"__esModule",{value:!0});var QH=b8(),ZB=P4(),SB=(Q,J)=>{let{options:X}=Q,Y=X.protocolVersion,$=Y===5?J.reasonCode:J.returnCode;if(Y!==5){let G=new QH.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${Y}`,$);Q.emit("error",G);return}Q.handleAuth(J,(G,H)=>{if(G){Q.emit("error",G);return}if($===24)Q.reconnecting=!1,Q._sendPacket(H);else{let q=new QH.ErrorWithReasonCode(`Connection refused: ${ZB.ReasonCodes[$]}`,$);Q.emit("error",q)}})};JH.default=SB});var WH=D((qH)=>{Object.defineProperty(qH,"__esModule",{value:!0});qH.LRUCache=void 0;var EQ=typeof performance==="object"&&performance&&typeof performance.now==="function"?performance:Date,$H=new Set,M5=typeof process==="object"&&!!process?process:{},GH=(Q,J,X,Y)=>{typeof M5.emitWarning==="function"?M5.emitWarning(Q,J,X,Y):console.error(`[${X}] ${J}: ${Q}`)},r9=globalThis.AbortController,YH=globalThis.AbortSignal;if(typeof r9==="undefined"){YH=class X{onabort;_onabort=[];reason;aborted=!1;addEventListener(Y,$){this._onabort.push($)}},r9=class X{constructor(){J()}signal=new YH;abort(Y){if(this.signal.aborted)return;this.signal.reason=Y,this.signal.aborted=!0;for(let $ of this.signal._onabort)$(Y);this.signal.onabort?.(Y)}};let Q=M5.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",J=()=>{if(!Q)return;Q=!1,GH("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",J)}}var xB=(Q)=>!$H.has(Q),PT=Symbol("type"),G8=(Q)=>Q&&Q===Math.floor(Q)&&Q>0&&isFinite(Q),HH=(Q)=>!G8(Q)?null:Q<=Math.pow(2,8)?Uint8Array:Q<=Math.pow(2,16)?Uint16Array:Q<=Math.pow(2,32)?Uint32Array:Q<=Number.MAX_SAFE_INTEGER?w4:null;class w4 extends Array{constructor(Q){super(Q);this.fill(0)}}class RQ{heap;length;static#K=!1;static create(Q){let J=HH(Q);if(!J)return[];RQ.#K=!0;let X=new RQ(Q,J);return RQ.#K=!1,X}constructor(Q,J){if(!RQ.#K)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new J(Q),this.length=0}push(Q){this.heap[this.length++]=Q}pop(){return this.heap[--this.length]}}class U5{#K;#V;#O;#N;#S;#_;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#$;#j;#Y;#X;#Q;#W;#M;#q;#G;#B;#H;#A;#D;#U;#L;#R;#z;static unsafeExposeInternals(Q){return{starts:Q.#D,ttls:Q.#U,sizes:Q.#A,keyMap:Q.#Y,keyList:Q.#X,valList:Q.#Q,next:Q.#W,prev:Q.#M,get head(){return Q.#q},get tail(){return Q.#G},free:Q.#B,isBackgroundFetch:(J)=>Q.#J(J),backgroundFetch:(J,X,Y,$)=>Q.#v(J,X,Y,$),moveToTail:(J)=>Q.#Z(J),indexes:(J)=>Q.#C(J),rindexes:(J)=>Q.#P(J),isStale:(J)=>Q.#F(J)}}get max(){return this.#K}get maxSize(){return this.#V}get calculatedSize(){return this.#j}get size(){return this.#$}get fetchMethod(){return this.#S}get memoMethod(){return this.#_}get dispose(){return this.#O}get disposeAfter(){return this.#N}constructor(Q){let{max:J=0,ttl:X,ttlResolution:Y=1,ttlAutopurge:$,updateAgeOnGet:G,updateAgeOnHas:H,allowStale:q,dispose:K,disposeAfter:z,noDisposeOnSet:V,noUpdateTTL:F,maxSize:O=0,maxEntrySize:N=0,sizeCalculation:A,fetchMethod:B,memoMethod:L,noDeleteOnFetchRejection:C,noDeleteOnStaleGet:P,allowStaleOnFetchRejection:_,allowStaleOnFetchAbort:x,ignoreFetchAbort:i}=Q;if(J!==0&&!G8(J))throw new TypeError("max option must be a nonnegative integer");let J0=J?HH(J):Array;if(!J0)throw new Error("invalid max value: "+J);if(this.#K=J,this.#V=O,this.maxEntrySize=N||this.#V,this.sizeCalculation=A,this.sizeCalculation){if(!this.#V&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!=="function")throw new TypeError("sizeCalculation set to non-function")}if(L!==void 0&&typeof L!=="function")throw new TypeError("memoMethod must be a function if defined");if(this.#_=L,B!==void 0&&typeof B!=="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#S=B,this.#R=!!B,this.#Y=new Map,this.#X=new Array(J).fill(void 0),this.#Q=new Array(J).fill(void 0),this.#W=new J0(J),this.#M=new J0(J),this.#q=0,this.#G=0,this.#B=RQ.create(J),this.#$=0,this.#j=0,typeof K==="function")this.#O=K;if(typeof z==="function")this.#N=z,this.#H=[];else this.#N=void 0,this.#H=void 0;if(this.#L=!!this.#O,this.#z=!!this.#N,this.noDisposeOnSet=!!V,this.noUpdateTTL=!!F,this.noDeleteOnFetchRejection=!!C,this.allowStaleOnFetchRejection=!!_,this.allowStaleOnFetchAbort=!!x,this.ignoreFetchAbort=!!i,this.maxEntrySize!==0){if(this.#V!==0){if(!G8(this.#V))throw new TypeError("maxSize must be a positive integer if specified")}if(!G8(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#u()}if(this.allowStale=!!q,this.noDeleteOnStaleGet=!!P,this.updateAgeOnGet=!!G,this.updateAgeOnHas=!!H,this.ttlResolution=G8(Y)||Y===0?Y:1,this.ttlAutopurge=!!$,this.ttl=X||0,this.ttl){if(!G8(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#y()}if(this.#K===0&&this.ttl===0&&this.#V===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#K&&!this.#V){if(xB("LRU_CACHE_UNBOUNDED"))$H.add("LRU_CACHE_UNBOUNDED"),GH("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning","LRU_CACHE_UNBOUNDED",U5)}}getRemainingTTL(Q){return this.#Y.has(Q)?1/0:0}#y(){let Q=new w4(this.#K),J=new w4(this.#K);this.#U=Q,this.#D=J,this.#g=($,G,H=EQ.now())=>{if(J[$]=G!==0?H:0,Q[$]=G,G!==0&&this.ttlAutopurge){let q=setTimeout(()=>{if(this.#F($))this.#w(this.#X[$],"expire")},G+1);if(q.unref)q.unref()}},this.#T=($)=>{J[$]=Q[$]!==0?EQ.now():0},this.#E=($,G)=>{if(Q[G]){let H=Q[G],q=J[G];if(!H||!q)return;$.ttl=H,$.start=q,$.now=X||Y();let K=$.now-q;$.remainingTTL=H-K}};let X=0,Y=()=>{let $=EQ.now();if(this.ttlResolution>0){X=$;let G=setTimeout(()=>X=0,this.ttlResolution);if(G.unref)G.unref()}return $};this.getRemainingTTL=($)=>{let G=this.#Y.get($);if(G===void 0)return 0;let H=Q[G],q=J[G];if(!H||!q)return 1/0;let K=(X||Y())-q;return H-K},this.#F=($)=>{let G=J[$],H=Q[$];return!!H&&!!G&&(X||Y())-G>H}}#T=()=>{};#E=()=>{};#g=()=>{};#F=()=>!1;#u(){let Q=new w4(this.#K);this.#j=0,this.#A=Q,this.#I=(J)=>{this.#j-=Q[J],Q[J]=0},this.#f=(J,X,Y,$)=>{if(this.#J(X))return 0;if(!G8(Y))if($){if(typeof $!=="function")throw new TypeError("sizeCalculation must be a function");if(Y=$(X,J),!G8(Y))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return Y},this.#x=(J,X,Y)=>{if(Q[J]=X,this.#V){let $=this.#V-Q[J];while(this.#j>$)this.#h(!0)}if(this.#j+=Q[J],Y)Y.entrySize=X,Y.totalCalculatedSize=this.#j}}#I=(Q)=>{};#x=(Q,J,X)=>{};#f=(Q,J,X,Y)=>{if(X||Y)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#C({allowStale:Q=this.allowStale}={}){if(this.#$)for(let J=this.#G;;){if(!this.#k(J))break;if(Q||!this.#F(J))yield J;if(J===this.#q)break;else J=this.#M[J]}}*#P({allowStale:Q=this.allowStale}={}){if(this.#$)for(let J=this.#q;;){if(!this.#k(J))break;if(Q||!this.#F(J))yield J;if(J===this.#G)break;else J=this.#W[J]}}#k(Q){return Q!==void 0&&this.#Y.get(this.#X[Q])===Q}*entries(){for(let Q of this.#C())if(this.#Q[Q]!==void 0&&this.#X[Q]!==void 0&&!this.#J(this.#Q[Q]))yield[this.#X[Q],this.#Q[Q]]}*rentries(){for(let Q of this.#P())if(this.#Q[Q]!==void 0&&this.#X[Q]!==void 0&&!this.#J(this.#Q[Q]))yield[this.#X[Q],this.#Q[Q]]}*keys(){for(let Q of this.#C()){let J=this.#X[Q];if(J!==void 0&&!this.#J(this.#Q[Q]))yield J}}*rkeys(){for(let Q of this.#P()){let J=this.#X[Q];if(J!==void 0&&!this.#J(this.#Q[Q]))yield J}}*values(){for(let Q of this.#C())if(this.#Q[Q]!==void 0&&!this.#J(this.#Q[Q]))yield this.#Q[Q]}*rvalues(){for(let Q of this.#P())if(this.#Q[Q]!==void 0&&!this.#J(this.#Q[Q]))yield this.#Q[Q]}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(Q,J={}){for(let X of this.#C()){let Y=this.#Q[X],$=this.#J(Y)?Y.__staleWhileFetching:Y;if($===void 0)continue;if(Q($,this.#X[X],this))return this.get(this.#X[X],J)}}forEach(Q,J=this){for(let X of this.#C()){let Y=this.#Q[X],$=this.#J(Y)?Y.__staleWhileFetching:Y;if($===void 0)continue;Q.call(J,$,this.#X[X],this)}}rforEach(Q,J=this){for(let X of this.#P()){let Y=this.#Q[X],$=this.#J(Y)?Y.__staleWhileFetching:Y;if($===void 0)continue;Q.call(J,$,this.#X[X],this)}}purgeStale(){let Q=!1;for(let J of this.#P({allowStale:!0}))if(this.#F(J))this.#w(this.#X[J],"expire"),Q=!0;return Q}info(Q){let J=this.#Y.get(Q);if(J===void 0)return;let X=this.#Q[J],Y=this.#J(X)?X.__staleWhileFetching:X;if(Y===void 0)return;let $={value:Y};if(this.#U&&this.#D){let G=this.#U[J],H=this.#D[J];if(G&&H){let q=G-(EQ.now()-H);$.ttl=q,$.start=Date.now()}}if(this.#A)$.size=this.#A[J];return $}dump(){let Q=[];for(let J of this.#C({allowStale:!0})){let X=this.#X[J],Y=this.#Q[J],$=this.#J(Y)?Y.__staleWhileFetching:Y;if($===void 0||X===void 0)continue;let G={value:$};if(this.#U&&this.#D){G.ttl=this.#U[J];let H=EQ.now()-this.#D[J];G.start=Math.floor(Date.now()-H)}if(this.#A)G.size=this.#A[J];Q.unshift([X,G])}return Q}load(Q){this.clear();for(let[J,X]of Q){if(X.start){let Y=Date.now()-X.start;X.start=EQ.now()-Y}this.set(J,X.value,X)}}set(Q,J,X={}){if(J===void 0)return this.delete(Q),this;let{ttl:Y=this.ttl,start:$,noDisposeOnSet:G=this.noDisposeOnSet,sizeCalculation:H=this.sizeCalculation,status:q}=X,{noUpdateTTL:K=this.noUpdateTTL}=X,z=this.#f(Q,J,X.size||0,H);if(this.maxEntrySize&&z>this.maxEntrySize){if(q)q.set="miss",q.maxEntrySizeExceeded=!0;return this.#w(Q,"set"),this}let V=this.#$===0?void 0:this.#Y.get(Q);if(V===void 0){if(V=this.#$===0?this.#G:this.#B.length!==0?this.#B.pop():this.#$===this.#K?this.#h(!1):this.#$,this.#X[V]=Q,this.#Q[V]=J,this.#Y.set(Q,V),this.#W[this.#G]=V,this.#M[V]=this.#G,this.#G=V,this.#$++,this.#x(V,z,q),q)q.set="add";K=!1}else{this.#Z(V);let F=this.#Q[V];if(J!==F){if(this.#R&&this.#J(F)){F.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:O}=F;if(O!==void 0&&!G){if(this.#L)this.#O?.(O,Q,"set");if(this.#z)this.#H?.push([O,Q,"set"])}}else if(!G){if(this.#L)this.#O?.(F,Q,"set");if(this.#z)this.#H?.push([F,Q,"set"])}if(this.#I(V),this.#x(V,z,q),this.#Q[V]=J,q){q.set="replace";let O=F&&this.#J(F)?F.__staleWhileFetching:F;if(O!==void 0)q.oldValue=O}}else if(q)q.set="update"}if(Y!==0&&!this.#U)this.#y();if(this.#U){if(!K)this.#g(V,Y,$);if(q)this.#E(q,V)}if(!G&&this.#z&&this.#H){let F=this.#H,O;while(O=F?.shift())this.#N?.(...O)}return this}pop(){try{while(this.#$){let Q=this.#Q[this.#q];if(this.#h(!0),this.#J(Q)){if(Q.__staleWhileFetching)return Q.__staleWhileFetching}else if(Q!==void 0)return Q}}finally{if(this.#z&&this.#H){let Q=this.#H,J;while(J=Q?.shift())this.#N?.(...J)}}}#h(Q){let J=this.#q,X=this.#X[J],Y=this.#Q[J];if(this.#R&&this.#J(Y))Y.__abortController.abort(new Error("evicted"));else if(this.#L||this.#z){if(this.#L)this.#O?.(Y,X,"evict");if(this.#z)this.#H?.push([Y,X,"evict"])}if(this.#I(J),Q)this.#X[J]=void 0,this.#Q[J]=void 0,this.#B.push(J);if(this.#$===1)this.#q=this.#G=0,this.#B.length=0;else this.#q=this.#W[J];return this.#Y.delete(X),this.#$--,J}has(Q,J={}){let{updateAgeOnHas:X=this.updateAgeOnHas,status:Y}=J,$=this.#Y.get(Q);if($!==void 0){let G=this.#Q[$];if(this.#J(G)&&G.__staleWhileFetching===void 0)return!1;if(!this.#F($)){if(X)this.#T($);if(Y)Y.has="hit",this.#E(Y,$);return!0}else if(Y)Y.has="stale",this.#E(Y,$)}else if(Y)Y.has="miss";return!1}peek(Q,J={}){let{allowStale:X=this.allowStale}=J,Y=this.#Y.get(Q);if(Y===void 0||!X&&this.#F(Y))return;let $=this.#Q[Y];return this.#J($)?$.__staleWhileFetching:$}#v(Q,J,X,Y){let $=J===void 0?void 0:this.#Q[J];if(this.#J($))return $;let G=new r9,{signal:H}=X;H?.addEventListener("abort",()=>G.abort(H.reason),{signal:G.signal});let q={signal:G.signal,options:X,context:Y},K=(A,B=!1)=>{let{aborted:L}=G.signal,C=X.ignoreFetchAbort&&A!==void 0;if(X.status)if(L&&!B){if(X.status.fetchAborted=!0,X.status.fetchError=G.signal.reason,C)X.status.fetchAbortIgnored=!0}else X.status.fetchResolved=!0;if(L&&!C&&!B)return V(G.signal.reason);let P=O;if(this.#Q[J]===O)if(A===void 0)if(P.__staleWhileFetching)this.#Q[J]=P.__staleWhileFetching;else this.#w(Q,"fetch");else{if(X.status)X.status.fetchUpdated=!0;this.set(Q,A,q.options)}return A},z=(A)=>{if(X.status)X.status.fetchRejected=!0,X.status.fetchError=A;return V(A)},V=(A)=>{let{aborted:B}=G.signal,L=B&&X.allowStaleOnFetchAbort,C=L||X.allowStaleOnFetchRejection,P=C||X.noDeleteOnFetchRejection,_=O;if(this.#Q[J]===O){if(!P||_.__staleWhileFetching===void 0)this.#w(Q,"fetch");else if(!L)this.#Q[J]=_.__staleWhileFetching}if(C){if(X.status&&_.__staleWhileFetching!==void 0)X.status.returnedStale=!0;return _.__staleWhileFetching}else if(_.__returned===_)throw A},F=(A,B)=>{let L=this.#S?.(Q,$,q);if(L&&L instanceof Promise)L.then((C)=>A(C===void 0?void 0:C),B);G.signal.addEventListener("abort",()=>{if(!X.ignoreFetchAbort||X.allowStaleOnFetchAbort){if(A(void 0),X.allowStaleOnFetchAbort)A=(C)=>K(C,!0)}})};if(X.status)X.status.fetchDispatched=!0;let O=new Promise(F).then(K,z),N=Object.assign(O,{__abortController:G,__staleWhileFetching:$,__returned:void 0});if(J===void 0)this.set(Q,N,{...q.options,status:void 0}),J=this.#Y.get(Q);else this.#Q[J]=N;return N}#J(Q){if(!this.#R)return!1;let J=Q;return!!J&&J instanceof Promise&&J.hasOwnProperty("__staleWhileFetching")&&J.__abortController instanceof r9}async fetch(Q,J={}){let{allowStale:X=this.allowStale,updateAgeOnGet:Y=this.updateAgeOnGet,noDeleteOnStaleGet:$=this.noDeleteOnStaleGet,ttl:G=this.ttl,noDisposeOnSet:H=this.noDisposeOnSet,size:q=0,sizeCalculation:K=this.sizeCalculation,noUpdateTTL:z=this.noUpdateTTL,noDeleteOnFetchRejection:V=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:F=this.allowStaleOnFetchRejection,ignoreFetchAbort:O=this.ignoreFetchAbort,allowStaleOnFetchAbort:N=this.allowStaleOnFetchAbort,context:A,forceRefresh:B=!1,status:L,signal:C}=J;if(!this.#R){if(L)L.fetch="get";return this.get(Q,{allowStale:X,updateAgeOnGet:Y,noDeleteOnStaleGet:$,status:L})}let P={allowStale:X,updateAgeOnGet:Y,noDeleteOnStaleGet:$,ttl:G,noDisposeOnSet:H,size:q,sizeCalculation:K,noUpdateTTL:z,noDeleteOnFetchRejection:V,allowStaleOnFetchRejection:F,allowStaleOnFetchAbort:N,ignoreFetchAbort:O,status:L,signal:C},_=this.#Y.get(Q);if(_===void 0){if(L)L.fetch="miss";let x=this.#v(Q,_,P,A);return x.__returned=x}else{let x=this.#Q[_];if(this.#J(x)){let t=X&&x.__staleWhileFetching!==void 0;if(L){if(L.fetch="inflight",t)L.returnedStale=!0}return t?x.__staleWhileFetching:x.__returned=x}let i=this.#F(_);if(!B&&!i){if(L)L.fetch="hit";if(this.#Z(_),Y)this.#T(_);if(L)this.#E(L,_);return x}let J0=this.#v(Q,_,P,A),z0=J0.__staleWhileFetching!==void 0&&X;if(L){if(L.fetch=i?"stale":"refresh",z0&&i)L.returnedStale=!0}return z0?J0.__staleWhileFetching:J0.__returned=J0}}async forceFetch(Q,J={}){let X=await this.fetch(Q,J);if(X===void 0)throw new Error("fetch() returned undefined");return X}memo(Q,J={}){let X=this.#_;if(!X)throw new Error("no memoMethod provided to constructor");let{context:Y,forceRefresh:$,...G}=J,H=this.get(Q,G);if(!$&&H!==void 0)return H;let q=X(Q,H,{options:G,context:Y});return this.set(Q,q,G),q}get(Q,J={}){let{allowStale:X=this.allowStale,updateAgeOnGet:Y=this.updateAgeOnGet,noDeleteOnStaleGet:$=this.noDeleteOnStaleGet,status:G}=J,H=this.#Y.get(Q);if(H!==void 0){let q=this.#Q[H],K=this.#J(q);if(G)this.#E(G,H);if(this.#F(H)){if(G)G.get="stale";if(!K){if(!$)this.#w(Q,"expire");if(G&&X)G.returnedStale=!0;return X?q:void 0}else{if(G&&X&&q.__staleWhileFetching!==void 0)G.returnedStale=!0;return X?q.__staleWhileFetching:void 0}}else{if(G)G.get="hit";if(K)return q.__staleWhileFetching;if(this.#Z(H),Y)this.#T(H);return q}}else if(G)G.get="miss"}#b(Q,J){this.#M[J]=Q,this.#W[Q]=J}#Z(Q){if(Q!==this.#G){if(Q===this.#q)this.#q=this.#W[Q];else this.#b(this.#M[Q],this.#W[Q]);this.#b(this.#G,Q),this.#G=Q}}delete(Q){return this.#w(Q,"delete")}#w(Q,J){let X=!1;if(this.#$!==0){let Y=this.#Y.get(Q);if(Y!==void 0)if(X=!0,this.#$===1)this.#m(J);else{this.#I(Y);let $=this.#Q[Y];if(this.#J($))$.__abortController.abort(new Error("deleted"));else if(this.#L||this.#z){if(this.#L)this.#O?.($,Q,J);if(this.#z)this.#H?.push([$,Q,J])}if(this.#Y.delete(Q),this.#X[Y]=void 0,this.#Q[Y]=void 0,Y===this.#G)this.#G=this.#M[Y];else if(Y===this.#q)this.#q=this.#W[Y];else{let G=this.#M[Y];this.#W[G]=this.#W[Y];let H=this.#W[Y];this.#M[H]=this.#M[Y]}this.#$--,this.#B.push(Y)}}if(this.#z&&this.#H?.length){let Y=this.#H,$;while($=Y?.shift())this.#N?.(...$)}return X}clear(){return this.#m("delete")}#m(Q){for(let J of this.#P({allowStale:!0})){let X=this.#Q[J];if(this.#J(X))X.__abortController.abort(new Error("deleted"));else{let Y=this.#X[J];if(this.#L)this.#O?.(X,Y,Q);if(this.#z)this.#H?.push([X,Y,Q])}}if(this.#Y.clear(),this.#Q.fill(void 0),this.#X.fill(void 0),this.#U&&this.#D)this.#U.fill(0),this.#D.fill(0);if(this.#A)this.#A.fill(0);if(this.#q=0,this.#G=0,this.#B.length=0,this.#j=0,this.#$=0,this.#z&&this.#H){let J=this.#H,X;while(X=J?.shift())this.#N?.(...X)}}}qH.LRUCache=U5});var E1=D((MH)=>{Object.defineProperty(MH,"t",{value:!0});MH.ContainerIterator=MH.Container=MH.Base=void 0;class zH{constructor(Q=0){this.iteratorType=Q}equals(Q){return this.o===Q.o}}MH.ContainerIterator=zH;class F5{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}}MH.Base=F5;class VH extends F5{}MH.Container=VH});var jH=D((OH)=>{Object.defineProperty(OH,"t",{value:!0});OH.default=void 0;var yB=E1();class FH extends yB.Base{constructor(Q=[]){super();this.S=[];let J=this;Q.forEach(function(X){J.push(X)})}clear(){this.i=0,this.S=[]}push(Q){return this.S.push(Q),this.i+=1,this.i}pop(){if(this.i===0)return;return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}}var gB=FH;OH.default=gB});var LH=D((AH)=>{Object.defineProperty(AH,"t",{value:!0});AH.default=void 0;var fB=E1();class BH extends fB.Base{constructor(Q=[]){super();this.j=0,this.q=[];let J=this;Q.forEach(function(X){J.push(X)})}clear(){this.q=[],this.i=this.j=0}push(Q){let J=this.q.length;if(this.j/J>0.5&&this.j+this.i>=J&&J>4096){let X=this.i;for(let Y=0;Y<X;++Y)this.q[Y]=this.q[this.j+Y];this.j=0,this.q[this.i]=Q}else this.q[this.j+this.i]=Q;return++this.i}pop(){if(this.i===0)return;let Q=this.q[this.j++];return this.i-=1,Q}front(){if(this.i===0)return;return this.q[this.j]}}var kB=BH;AH.default=kB});var EH=D((PH)=>{Object.defineProperty(PH,"t",{value:!0});PH.default=void 0;var bB=E1();class CH extends bB.Base{constructor(Q=[],J=function(Y,$){if(Y>$)return-1;if(Y<$)return 1;return 0},X=!0){super();if(this.v=J,Array.isArray(Q))this.C=X?[...Q]:Q;else{this.C=[];let $=this;Q.forEach(function(G){$.C.push(G)})}this.i=this.C.length;let Y=this.i>>1;for(let $=this.i-1>>1;$>=0;--$)this.k($,Y)}m(Q){let J=this.C[Q];while(Q>0){let X=Q-1>>1,Y=this.C[X];if(this.v(Y,J)<=0)break;this.C[Q]=Y,Q=X}this.C[Q]=J}k(Q,J){let X=this.C[Q];while(Q<J){let Y=Q<<1|1,$=Y+1,G=this.C[Y];if($<this.i&&this.v(G,this.C[$])>0)Y=$,G=this.C[$];if(this.v(G,X)>=0)break;this.C[Q]=G,Q=Y}this.C[Q]=X}clear(){this.i=0,this.C.length=0}push(Q){this.C.push(Q),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let Q=this.C[0],J=this.C.pop();if(this.i-=1,this.i)this.C[0]=J,this.k(0,this.i>>1);return Q}top(){return this.C[0]}find(Q){return this.C.indexOf(Q)>=0}remove(Q){let J=this.C.indexOf(Q);if(J<0)return!1;if(J===0)this.pop();else if(J===this.i-1)this.C.pop(),this.i-=1;else this.C.splice(J,1,this.C.pop()),this.i-=1,this.m(J),this.k(J,this.i>>1);return!0}updateItem(Q){let J=this.C.indexOf(Q);if(J<0)return!1;return this.m(J),this.k(J,this.i>>1),!0}toArray(){return[...this.C]}}var mB=CH;PH.default=mB});var a9=D((TH)=>{Object.defineProperty(TH,"t",{value:!0});TH.default=void 0;var uB=E1();class RH extends uB.Container{}var lB=RH;TH.default=lB});var R1=D((ZH)=>{Object.defineProperty(ZH,"t",{value:!0});ZH.throwIteratorAccessError=cB;function cB(){throw new RangeError("Iterator access denied!")}});var O5=D((_H)=>{Object.defineProperty(_H,"t",{value:!0});_H.RandomIterator=void 0;var pB=E1(),s9=R1();class SH extends pB.ContainerIterator{constructor(Q,J){super(J);if(this.o=Q,this.iteratorType===0)this.pre=function(){if(this.o===0)s9.throwIteratorAccessError();return this.o-=1,this},this.next=function(){if(this.o===this.container.size())s9.throwIteratorAccessError();return this.o+=1,this};else this.pre=function(){if(this.o===this.container.size()-1)s9.throwIteratorAccessError();return this.o+=1,this},this.next=function(){if(this.o===-1)s9.throwIteratorAccessError();return this.o-=1,this}}get pointer(){return this.container.getElementByPos(this.o)}set pointer(Q){this.container.setElementByPos(this.o,Q)}}_H.RandomIterator=SH});var gH=D((vH)=>{Object.defineProperty(vH,"t",{value:!0});vH.default=void 0;var nB=oB(a9()),iB=O5();function oB(Q){return Q&&Q.t?Q:{default:Q}}class m8 extends iB.RandomIterator{constructor(Q,J,X){super(Q,X);this.container=J}copy(){return new m8(this.o,this.container,this.iteratorType)}}class hH extends nB.default{constructor(Q=[],J=!0){super();if(Array.isArray(Q))this.J=J?[...Q]:Q,this.i=Q.length;else{this.J=[];let X=this;Q.forEach(function(Y){X.pushBack(Y)})}}clear(){this.i=0,this.J.length=0}begin(){return new m8(0,this)}end(){return new m8(this.i,this)}rBegin(){return new m8(this.i-1,this,1)}rEnd(){return new m8(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(Q){if(Q<0||Q>this.i-1)throw new RangeError;return this.J[Q]}eraseElementByPos(Q){if(Q<0||Q>this.i-1)throw new RangeError;return this.J.splice(Q,1),this.i-=1,this.i}eraseElementByValue(Q){let J=0;for(let X=0;X<this.i;++X)if(this.J[X]!==Q)this.J[J++]=this.J[X];return this.i=this.J.length=J,this.i}eraseElementByIterator(Q){let J=Q.o;return Q=Q.next(),this.eraseElementByPos(J),Q}pushBack(Q){return this.J.push(Q),this.i+=1,this.i}popBack(){if(this.i===0)return;return this.i-=1,this.J.pop()}setElementByPos(Q,J){if(Q<0||Q>this.i-1)throw new RangeError;this.J[Q]=J}insert(Q,J,X=1){if(Q<0||Q>this.i)throw new RangeError;return this.J.splice(Q,0,...new Array(X).fill(J)),this.i+=X,this.i}find(Q){for(let J=0;J<this.i;++J)if(this.J[J]===Q)return new m8(J,this);return this.end()}reverse(){this.J.reverse()}unique(){let Q=1;for(let J=1;J<this.i;++J)if(this.J[J]!==this.J[J-1])this.J[Q++]=this.J[J];return this.i=this.J.length=Q,this.i}sort(Q){this.J.sort(Q)}forEach(Q){for(let J=0;J<this.i;++J)Q(this.J[J],J,this)}[Symbol.iterator](){return function*(){yield*this.J}.bind(this)()}}var rB=hH;vH.default=rB});var mH=D((kH)=>{Object.defineProperty(kH,"t",{value:!0});kH.default=void 0;var aB=tB(a9()),sB=E1(),u8=R1();function tB(Q){return Q&&Q.t?Q:{default:Q}}class l8 extends sB.ContainerIterator{constructor(Q,J,X,Y){super(Y);if(this.o=Q,this.h=J,this.container=X,this.iteratorType===0)this.pre=function(){if(this.o.L===this.h)u8.throwIteratorAccessError();return this.o=this.o.L,this},this.next=function(){if(this.o===this.h)u8.throwIteratorAccessError();return this.o=this.o.B,this};else this.pre=function(){if(this.o.B===this.h)u8.throwIteratorAccessError();return this.o=this.o.B,this},this.next=function(){if(this.o===this.h)u8.throwIteratorAccessError();return this.o=this.o.L,this}}get pointer(){if(this.o===this.h)u8.throwIteratorAccessError();return this.o.l}set pointer(Q){if(this.o===this.h)u8.throwIteratorAccessError();this.o.l=Q}copy(){return new l8(this.o,this.h,this.container,this.iteratorType)}}class fH extends aB.default{constructor(Q=[]){super();this.h={},this.p=this._=this.h.L=this.h.B=this.h;let J=this;Q.forEach(function(X){J.pushBack(X)})}V(Q){let{L:J,B:X}=Q;if(J.B=X,X.L=J,Q===this.p)this.p=X;if(Q===this._)this._=J;this.i-=1}G(Q,J){let X=J.B,Y={l:Q,L:J,B:X};if(J.B=Y,X.L=Y,J===this.h)this.p=Y;if(X===this.h)this._=Y;this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new l8(this.p,this.h,this)}end(){return new l8(this.h,this.h,this)}rBegin(){return new l8(this._,this.h,this,1)}rEnd(){return new l8(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(Q){if(Q<0||Q>this.i-1)throw new RangeError;let J=this.p;while(Q--)J=J.B;return J.l}eraseElementByPos(Q){if(Q<0||Q>this.i-1)throw new RangeError;let J=this.p;while(Q--)J=J.B;return this.V(J),this.i}eraseElementByValue(Q){let J=this.p;while(J!==this.h){if(J.l===Q)this.V(J);J=J.B}return this.i}eraseElementByIterator(Q){let J=Q.o;if(J===this.h)u8.throwIteratorAccessError();return Q=Q.next(),this.V(J),Q}pushBack(Q){return this.G(Q,this._),this.i}popBack(){if(this.i===0)return;let Q=this._.l;return this.V(this._),Q}pushFront(Q){return this.G(Q,this.h),this.i}popFront(){if(this.i===0)return;let Q=this.p.l;return this.V(this.p),Q}setElementByPos(Q,J){if(Q<0||Q>this.i-1)throw new RangeError;let X=this.p;while(Q--)X=X.B;X.l=J}insert(Q,J,X=1){if(Q<0||Q>this.i)throw new RangeError;if(X<=0)return this.i;if(Q===0)while(X--)this.pushFront(J);else if(Q===this.i)while(X--)this.pushBack(J);else{let Y=this.p;for(let G=1;G<Q;++G)Y=Y.B;let $=Y.B;this.i+=X;while(X--)Y.B={l:J,L:Y},Y.B.L=Y,Y=Y.B;Y.B=$,$.L=Y}return this.i}find(Q){let J=this.p;while(J!==this.h){if(J.l===Q)return new l8(J,this.h,this);J=J.B}return this.end()}reverse(){if(this.i<=1)return;let Q=this.p,J=this._,X=0;while(X<<1<this.i){let Y=Q.l;Q.l=J.l,J.l=Y,Q=Q.B,J=J.L,X+=1}}unique(){if(this.i<=1)return this.i;let Q=this.p;while(Q!==this.h){let J=Q;while(J.B!==this.h&&J.l===J.B.l)J=J.B,this.i-=1;Q.B=J.B,Q.B.L=Q,Q=Q.B}return this.i}sort(Q){if(this.i<=1)return;let J=[];this.forEach(function(Y){J.push(Y)}),J.sort(Q);let X=this.p;J.forEach(function(Y){X.l=Y,X=X.B})}merge(Q){let J=this;if(this.i===0)Q.forEach(function(X){J.pushBack(X)});else{let X=this.p;Q.forEach(function(Y){while(X!==J.h&&X.l<=Y)X=X.B;J.G(Y,X.L)})}return this.i}forEach(Q){let J=this.p,X=0;while(J!==this.h)Q(J.l,X++,this),J=J.B}[Symbol.iterator](){return function*(){if(this.i===0)return;let Q=this.p;while(Q!==this.h)yield Q.l,Q=Q.B}.bind(this)()}}var eB=fH;kH.default=eB});var dH=D((lH)=>{Object.defineProperty(lH,"t",{value:!0});lH.default=void 0;var QA=XA(a9()),JA=O5();function XA(Q){return Q&&Q.t?Q:{default:Q}}class c8 extends JA.RandomIterator{constructor(Q,J,X){super(Q,X);this.container=J}copy(){return new c8(this.o,this.container,this.iteratorType)}}class uH extends QA.default{constructor(Q=[],J=4096){super();this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let X=(()=>{if(typeof Q.length==="number")return Q.length;if(typeof Q.size==="number")return Q.size;if(typeof Q.size==="function")return Q.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=J,this.P=Math.max(Math.ceil(X/this.F),1);for(let G=0;G<this.P;++G)this.A.push(new Array(this.F));let Y=Math.ceil(X/this.F);this.j=this.R=(this.P>>1)-(Y>>1),this.D=this.N=this.F-X%this.F>>1;let $=this;Q.forEach(function(G){$.pushBack(G)})}T(){let Q=[],J=Math.max(this.P>>1,1);for(let X=0;X<J;++X)Q[X]=new Array(this.F);for(let X=this.j;X<this.P;++X)Q[Q.length]=this.A[X];for(let X=0;X<this.R;++X)Q[Q.length]=this.A[X];Q[Q.length]=[...this.A[this.R]],this.j=J,this.R=Q.length-1;for(let X=0;X<J;++X)Q[Q.length]=new Array(this.F);this.A=Q,this.P=Q.length}O(Q){let J=this.D+Q+1,X=J%this.F,Y=X-1,$=this.j+(J-X)/this.F;if(X===0)$-=1;if($%=this.P,Y<0)Y+=this.F;return{curNodeBucketIndex:$,curNodePointerIndex:Y}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new c8(0,this)}end(){return new c8(this.i,this)}rBegin(){return new c8(this.i-1,this,1)}rEnd(){return new c8(-1,this,1)}front(){if(this.i===0)return;return this.A[this.j][this.D]}back(){if(this.i===0)return;return this.A[this.R][this.N]}pushBack(Q){if(this.i){if(this.N<this.F-1)this.N+=1;else if(this.R<this.P-1)this.R+=1,this.N=0;else this.R=0,this.N=0;if(this.R===this.j&&this.N===this.D)this.T()}return this.i+=1,this.A[this.R][this.N]=Q,this.i}popBack(){if(this.i===0)return;let Q=this.A[this.R][this.N];if(this.i!==1)if(this.N>0)this.N-=1;else if(this.R>0)this.R-=1,this.N=this.F-1;else this.R=this.P-1,this.N=this.F-1;return this.i-=1,Q}pushFront(Q){if(this.i){if(this.D>0)this.D-=1;else if(this.j>0)this.j-=1,this.D=this.F-1;else this.j=this.P-1,this.D=this.F-1;if(this.j===this.R&&this.D===this.N)this.T()}return this.i+=1,this.A[this.j][this.D]=Q,this.i}popFront(){if(this.i===0)return;let Q=this.A[this.j][this.D];if(this.i!==1)if(this.D<this.F-1)this.D+=1;else if(this.j<this.P-1)this.j+=1,this.D=0;else this.j=0,this.D=0;return this.i-=1,Q}getElementByPos(Q){if(Q<0||Q>this.i-1)throw new RangeError;let{curNodeBucketIndex:J,curNodePointerIndex:X}=this.O(Q);return this.A[J][X]}setElementByPos(Q,J){if(Q<0||Q>this.i-1)throw new RangeError;let{curNodeBucketIndex:X,curNodePointerIndex:Y}=this.O(Q);this.A[X][Y]=J}insert(Q,J,X=1){if(Q<0||Q>this.i)throw new RangeError;if(Q===0)while(X--)this.pushFront(J);else if(Q===this.i)while(X--)this.pushBack(J);else{let Y=[];for(let $=Q;$<this.i;++$)Y.push(this.getElementByPos($));this.cut(Q-1);for(let $=0;$<X;++$)this.pushBack(J);for(let $=0;$<Y.length;++$)this.pushBack(Y[$])}return this.i}cut(Q){if(Q<0)return this.clear(),0;let{curNodeBucketIndex:J,curNodePointerIndex:X}=this.O(Q);return this.R=J,this.N=X,this.i=Q+1,this.i}eraseElementByPos(Q){if(Q<0||Q>this.i-1)throw new RangeError;if(Q===0)this.popFront();else if(Q===this.i-1)this.popBack();else{let J=[];for(let Y=Q+1;Y<this.i;++Y)J.push(this.getElementByPos(Y));this.cut(Q),this.popBack();let X=this;J.forEach(function(Y){X.pushBack(Y)})}return this.i}eraseElementByValue(Q){if(this.i===0)return 0;let J=[];for(let Y=0;Y<this.i;++Y){let $=this.getElementByPos(Y);if($!==Q)J.push($)}let X=J.length;for(let Y=0;Y<X;++Y)this.setElementByPos(Y,J[Y]);return this.cut(X-1)}eraseElementByIterator(Q){let J=Q.o;return this.eraseElementByPos(J),Q=Q.next(),Q}find(Q){for(let J=0;J<this.i;++J)if(this.getElementByPos(J)===Q)return new c8(J,this);return this.end()}reverse(){let Q=0,J=this.i-1;while(Q<J){let X=this.getElementByPos(Q);this.setElementByPos(Q,this.getElementByPos(J)),this.setElementByPos(J,X),Q+=1,J-=1}}unique(){if(this.i<=1)return this.i;let Q=1,J=this.getElementByPos(0);for(let X=1;X<this.i;++X){let Y=this.getElementByPos(X);if(Y!==J)J=Y,this.setElementByPos(Q++,Y)}while(this.i>Q)this.popBack();return this.i}sort(Q){let J=[];for(let X=0;X<this.i;++X)J.push(this.getElementByPos(X));J.sort(Q);for(let X=0;X<this.i;++X)this.setElementByPos(X,J[X])}shrinkToFit(){if(this.i===0)return;let Q=[];this.forEach(function(J){Q.push(J)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let J=0;J<this.P;++J)this.A.push(new Array(this.F));for(let J=0;J<Q.length;++J)this.pushBack(Q[J])}forEach(Q){for(let J=0;J<this.i;++J)Q(this.getElementByPos(J),J,this)}[Symbol.iterator](){return function*(){for(let Q=0;Q<this.i;++Q)yield this.getElementByPos(Q)}.bind(this)()}}var YA=uH;lH.default=YA});var oH=D((nH)=>{Object.defineProperty(nH,"t",{value:!0});nH.TreeNodeEnableIndex=nH.TreeNode=void 0;class N5{constructor(Q,J){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=Q,this.l=J}L(){let Q=this;if(Q.ee===1&&Q.tt.tt===Q)Q=Q.W;else if(Q.U){Q=Q.U;while(Q.W)Q=Q.W}else{let J=Q.tt;while(J.U===Q)Q=J,J=Q.tt;Q=J}return Q}B(){let Q=this;if(Q.W){Q=Q.W;while(Q.U)Q=Q.U;return Q}else{let J=Q.tt;while(J.W===Q)Q=J,J=Q.tt;if(Q.W!==J)return J;else return Q}}te(){let Q=this.tt,J=this.W,X=J.U;if(Q.tt===this)Q.tt=J;else if(Q.U===this)Q.U=J;else Q.W=J;if(J.tt=Q,J.U=this,this.tt=J,this.W=X,X)X.tt=this;return J}se(){let Q=this.tt,J=this.U,X=J.W;if(Q.tt===this)Q.tt=J;else if(Q.U===this)Q.U=J;else Q.W=J;if(J.tt=Q,J.W=this,this.tt=J,this.U=X,X)X.tt=this;return J}}nH.TreeNode=N5;class pH extends N5{constructor(){super(...arguments);this.rt=1}te(){let Q=super.te();return this.ie(),Q.ie(),Q}se(){let Q=super.se();return this.ie(),Q.ie(),Q}ie(){if(this.rt=1,this.U)this.rt+=this.U.rt;if(this.W)this.rt+=this.W.rt}}nH.TreeNodeEnableIndex=pH});var j5=D((tH)=>{Object.defineProperty(tH,"t",{value:!0});tH.default=void 0;var rH=oH(),GA=E1(),aH=R1();class sH extends GA.Container{constructor(Q=function(X,Y){if(X<Y)return-1;if(X>Y)return 1;return 0},J=!1){super();if(this.Y=void 0,this.v=Q,J)this.re=rH.TreeNodeEnableIndex,this.M=function(X,Y,$){let G=this.ne(X,Y,$);if(G){let H=G.tt;while(H!==this.h)H.rt+=1,H=H.tt;let q=this.he(G);if(q){let{parentNode:K,grandParent:z,curNode:V}=q;K.ie(),z.ie(),V.ie()}}return this.i},this.V=function(X){let Y=this.fe(X);while(Y!==this.h)Y.rt-=1,Y=Y.tt};else this.re=rH.TreeNode,this.M=function(X,Y,$){let G=this.ne(X,Y,$);if(G)this.he(G);return this.i},this.V=this.fe;this.h=new this.re}X(Q,J){let X=this.h;while(Q){let Y=this.v(Q.u,J);if(Y<0)Q=Q.W;else if(Y>0)X=Q,Q=Q.U;else return Q}return X}Z(Q,J){let X=this.h;while(Q)if(this.v(Q.u,J)<=0)Q=Q.W;else X=Q,Q=Q.U;return X}$(Q,J){let X=this.h;while(Q){let Y=this.v(Q.u,J);if(Y<0)X=Q,Q=Q.W;else if(Y>0)Q=Q.U;else return Q}return X}rr(Q,J){let X=this.h;while(Q)if(this.v(Q.u,J)<0)X=Q,Q=Q.W;else Q=Q.U;return X}ue(Q){while(!0){let J=Q.tt;if(J===this.h)return;if(Q.ee===1){Q.ee=0;return}if(Q===J.U){let X=J.W;if(X.ee===1)if(X.ee=0,J.ee=1,J===this.Y)this.Y=J.te();else J.te();else if(X.W&&X.W.ee===1){if(X.ee=J.ee,J.ee=0,X.W.ee=0,J===this.Y)this.Y=J.te();else J.te();return}else if(X.U&&X.U.ee===1)X.ee=1,X.U.ee=0,X.se();else X.ee=1,Q=J}else{let X=J.U;if(X.ee===1)if(X.ee=0,J.ee=1,J===this.Y)this.Y=J.se();else J.se();else if(X.U&&X.U.ee===1){if(X.ee=J.ee,J.ee=0,X.U.ee=0,J===this.Y)this.Y=J.se();else J.se();return}else if(X.W&&X.W.ee===1)X.ee=1,X.W.ee=0,X.te();else X.ee=1,Q=J}}}fe(Q){if(this.i===1)return this.clear(),this.h;let J=Q;while(J.U||J.W){if(J.W){J=J.W;while(J.U)J=J.U}else J=J.U;[Q.u,J.u]=[J.u,Q.u],[Q.l,J.l]=[J.l,Q.l],Q=J}if(this.h.U===J)this.h.U=J.tt;else if(this.h.W===J)this.h.W=J.tt;this.ue(J);let X=J.tt;if(J===X.U)X.U=void 0;else X.W=void 0;return this.i-=1,this.Y.ee=0,X}oe(Q,J){if(Q===void 0)return!1;if(this.oe(Q.U,J))return!0;if(J(Q))return!0;return this.oe(Q.W,J)}he(Q){while(!0){let J=Q.tt;if(J.ee===0)return;let X=J.tt;if(J===X.U){let Y=X.W;if(Y&&Y.ee===1){if(Y.ee=J.ee=0,X===this.Y)return;X.ee=1,Q=X;continue}else if(Q===J.W){if(Q.ee=0,Q.U)Q.U.tt=J;if(Q.W)Q.W.tt=X;if(J.W=Q.U,X.U=Q.W,Q.U=J,Q.W=X,X===this.Y)this.Y=Q,this.h.tt=Q;else{let $=X.tt;if($.U===X)$.U=Q;else $.W=Q}return Q.tt=X.tt,J.tt=Q,X.tt=Q,X.ee=1,{parentNode:J,grandParent:X,curNode:Q}}else{if(J.ee=0,X===this.Y)this.Y=X.se();else X.se();X.ee=1}}else{let Y=X.U;if(Y&&Y.ee===1){if(Y.ee=J.ee=0,X===this.Y)return;X.ee=1,Q=X;continue}else if(Q===J.U){if(Q.ee=0,Q.U)Q.U.tt=X;if(Q.W)Q.W.tt=J;if(X.W=Q.U,J.U=Q.W,Q.U=X,Q.W=J,X===this.Y)this.Y=Q,this.h.tt=Q;else{let $=X.tt;if($.U===X)$.U=Q;else $.W=Q}return Q.tt=X.tt,J.tt=Q,X.tt=Q,X.ee=1,{parentNode:J,grandParent:X,curNode:Q}}else{if(J.ee=0,X===this.Y)this.Y=X.te();else X.te();X.ee=1}}return}}ne(Q,J,X){if(this.Y===void 0){this.i+=1,this.Y=new this.re(Q,J),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let Y,$=this.h.U,G=this.v($.u,Q);if(G===0){$.l=J;return}else if(G>0)$.U=new this.re(Q,J),$.U.tt=$,Y=$.U,this.h.U=Y;else{let H=this.h.W,q=this.v(H.u,Q);if(q===0){H.l=J;return}else if(q<0)H.W=new this.re(Q,J),H.W.tt=H,Y=H.W,this.h.W=Y;else{if(X!==void 0){let K=X.o;if(K!==this.h){let z=this.v(K.u,Q);if(z===0){K.l=J;return}else if(z>0){let V=K.L(),F=this.v(V.u,Q);if(F===0){V.l=J;return}else if(F<0)if(Y=new this.re(Q,J),V.W===void 0)V.W=Y,Y.tt=V;else K.U=Y,Y.tt=K}}}if(Y===void 0){Y=this.Y;while(!0){let K=this.v(Y.u,Q);if(K>0){if(Y.U===void 0){Y.U=new this.re(Q,J),Y.U.tt=Y,Y=Y.U;break}Y=Y.U}else if(K<0){if(Y.W===void 0){Y.W=new this.re(Q,J),Y.W.tt=Y,Y=Y.W;break}Y=Y.W}else{Y.l=J;return}}}}}return this.i+=1,Y}I(Q,J){while(Q){let X=this.v(Q.u,J);if(X<0)Q=Q.W;else if(X>0)Q=Q.U;else return Q}return Q||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(Q,J){let X=Q.o;if(X===this.h)aH.throwIteratorAccessError();if(this.i===1)return X.u=J,!0;if(X===this.h.U){if(this.v(X.B().u,J)>0)return X.u=J,!0;return!1}if(X===this.h.W){if(this.v(X.L().u,J)<0)return X.u=J,!0;return!1}let Y=X.L().u;if(this.v(Y,J)>=0)return!1;let $=X.B().u;if(this.v($,J)<=0)return!1;return X.u=J,!0}eraseElementByPos(Q){if(Q<0||Q>this.i-1)throw new RangeError;let J=0,X=this;return this.oe(this.Y,function(Y){if(Q===J)return X.V(Y),!0;return J+=1,!1}),this.i}eraseElementByKey(Q){if(this.i===0)return!1;let J=this.I(this.Y,Q);if(J===this.h)return!1;return this.V(J),!0}eraseElementByIterator(Q){let J=Q.o;if(J===this.h)aH.throwIteratorAccessError();let X=J.W===void 0;if(Q.iteratorType===0){if(X)Q.next()}else if(!X||J.U===void 0)Q.next();return this.V(J),Q}forEach(Q){let J=0;for(let X of this)Q(X,J++,this)}getElementByPos(Q){if(Q<0||Q>this.i-1)throw new RangeError;let J,X=0;for(let Y of this){if(X===Q){J=Y;break}X+=1}return J}getHeight(){if(this.i===0)return 0;let Q=function(J){if(!J)return 0;return Math.max(Q(J.U),Q(J.W))+1};return Q(this.Y)}}var HA=sH;tH.default=HA});var B5=D((Jq)=>{Object.defineProperty(Jq,"t",{value:!0});Jq.default=void 0;var qA=E1(),t9=R1();class Qq extends qA.ContainerIterator{constructor(Q,J,X){super(X);if(this.o=Q,this.h=J,this.iteratorType===0)this.pre=function(){if(this.o===this.h.U)t9.throwIteratorAccessError();return this.o=this.o.L(),this},this.next=function(){if(this.o===this.h)t9.throwIteratorAccessError();return this.o=this.o.B(),this};else this.pre=function(){if(this.o===this.h.W)t9.throwIteratorAccessError();return this.o=this.o.B(),this},this.next=function(){if(this.o===this.h)t9.throwIteratorAccessError();return this.o=this.o.L(),this}}get index(){let Q=this.o,J=this.h.tt;if(Q===this.h){if(J)return J.rt-1;return 0}let X=0;if(Q.U)X+=Q.U.rt;while(Q!==J){let Y=Q.tt;if(Q===Y.W){if(X+=1,Y.U)X+=Y.U.rt}Q=Y}return X}}var KA=Qq;Jq.default=KA});var qq=D((Gq)=>{Object.defineProperty(Gq,"t",{value:!0});Gq.default=void 0;var WA=Yq(j5()),zA=Yq(B5()),VA=R1();function Yq(Q){return Q&&Q.t?Q:{default:Q}}class K1 extends zA.default{constructor(Q,J,X,Y){super(Q,J,Y);this.container=X}get pointer(){if(this.o===this.h)VA.throwIteratorAccessError();return this.o.u}copy(){return new K1(this.o,this.h,this.container,this.iteratorType)}}class $q extends WA.default{constructor(Q=[],J,X){super(J,X);let Y=this;Q.forEach(function($){Y.insert($)})}*K(Q){if(Q===void 0)return;yield*this.K(Q.U),yield Q.u,yield*this.K(Q.W)}begin(){return new K1(this.h.U||this.h,this.h,this)}end(){return new K1(this.h,this.h,this)}rBegin(){return new K1(this.h.W||this.h,this.h,this,1)}rEnd(){return new K1(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(Q,J){return this.M(Q,void 0,J)}find(Q){let J=this.I(this.Y,Q);return new K1(J,this.h,this)}lowerBound(Q){let J=this.X(this.Y,Q);return new K1(J,this.h,this)}upperBound(Q){let J=this.Z(this.Y,Q);return new K1(J,this.h,this)}reverseLowerBound(Q){let J=this.$(this.Y,Q);return new K1(J,this.h,this)}reverseUpperBound(Q){let J=this.rr(this.Y,Q);return new K1(J,this.h,this)}union(Q){let J=this;return Q.forEach(function(X){J.insert(X)}),this.i}[Symbol.iterator](){return this.K(this.Y)}}var MA=$q;Gq.default=MA});var Mq=D((zq)=>{Object.defineProperty(zq,"t",{value:!0});zq.default=void 0;var UA=Kq(j5()),FA=Kq(B5()),OA=R1();function Kq(Q){return Q&&Q.t?Q:{default:Q}}class W1 extends FA.default{constructor(Q,J,X,Y){super(Q,J,Y);this.container=X}get pointer(){if(this.o===this.h)OA.throwIteratorAccessError();let Q=this;return new Proxy([],{get(J,X){if(X==="0")return Q.o.u;else if(X==="1")return Q.o.l},set(J,X,Y){if(X!=="1")throw new TypeError("props must be 1");return Q.o.l=Y,!0}})}copy(){return new W1(this.o,this.h,this.container,this.iteratorType)}}class Wq extends UA.default{constructor(Q=[],J,X){super(J,X);let Y=this;Q.forEach(function($){Y.setElement($[0],$[1])})}*K(Q){if(Q===void 0)return;yield*this.K(Q.U),yield[Q.u,Q.l],yield*this.K(Q.W)}begin(){return new W1(this.h.U||this.h,this.h,this)}end(){return new W1(this.h,this.h,this)}rBegin(){return new W1(this.h.W||this.h,this.h,this,1)}rEnd(){return new W1(this.h,this.h,this,1)}front(){if(this.i===0)return;let Q=this.h.U;return[Q.u,Q.l]}back(){if(this.i===0)return;let Q=this.h.W;return[Q.u,Q.l]}lowerBound(Q){let J=this.X(this.Y,Q);return new W1(J,this.h,this)}upperBound(Q){let J=this.Z(this.Y,Q);return new W1(J,this.h,this)}reverseLowerBound(Q){let J=this.$(this.Y,Q);return new W1(J,this.h,this)}reverseUpperBound(Q){let J=this.rr(this.Y,Q);return new W1(J,this.h,this)}setElement(Q,J,X){return this.M(Q,J,X)}find(Q){let J=this.I(this.Y,Q);return new W1(J,this.h,this)}getElementByKey(Q){return this.I(this.Y,Q).l}union(Q){let J=this;return Q.forEach(function(X){J.setElement(X[0],X[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}}var NA=Wq;zq.default=NA});var A5=D((Uq)=>{Object.defineProperty(Uq,"t",{value:!0});Uq.default=jA;function jA(Q){let J=typeof Q;return J==="object"&&Q!==null||J==="function"}});var L5=D((jq)=>{Object.defineProperty(jq,"t",{value:!0});jq.HashContainerIterator=jq.HashContainer=void 0;var Fq=E1(),D5=AA(A5()),E4=R1();function AA(Q){return Q&&Q.t?Q:{default:Q}}class Oq extends Fq.ContainerIterator{constructor(Q,J,X){super(X);if(this.o=Q,this.h=J,this.iteratorType===0)this.pre=function(){if(this.o.L===this.h)E4.throwIteratorAccessError();return this.o=this.o.L,this},this.next=function(){if(this.o===this.h)E4.throwIteratorAccessError();return this.o=this.o.B,this};else this.pre=function(){if(this.o.B===this.h)E4.throwIteratorAccessError();return this.o=this.o.B,this},this.next=function(){if(this.o===this.h)E4.throwIteratorAccessError();return this.o=this.o.L,this}}}jq.HashContainerIterator=Oq;class Nq extends Fq.Container{constructor(){super();this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(Q){let{L:J,B:X}=Q;if(J.B=X,X.L=J,Q===this.p)this.p=X;if(Q===this._)this._=J;this.i-=1}M(Q,J,X){if(X===void 0)X=D5.default(Q);let Y;if(X){let $=Q[this.HASH_TAG];if($!==void 0)return this.H[$].l=J,this.i;Object.defineProperty(Q,this.HASH_TAG,{value:this.H.length,configurable:!0}),Y={u:Q,l:J,L:this._,B:this.h},this.H.push(Y)}else{let $=this.g[Q];if($)return $.l=J,this.i;Y={u:Q,l:J,L:this._,B:this.h},this.g[Q]=Y}if(this.i===0)this.p=Y,this.h.B=Y;else this._.B=Y;return this._=Y,this.h.L=Y,++this.i}I(Q,J){if(J===void 0)J=D5.default(Q);if(J){let X=Q[this.HASH_TAG];if(X===void 0)return this.h;return this.H[X]}else return this.g[Q]||this.h}clear(){let Q=this.HASH_TAG;this.H.forEach(function(J){delete J.u[Q]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(Q,J){let X;if(J===void 0)J=D5.default(Q);if(J){let Y=Q[this.HASH_TAG];if(Y===void 0)return!1;delete Q[this.HASH_TAG],X=this.H[Y],delete this.H[Y]}else{if(X=this.g[Q],X===void 0)return!1;delete this.g[Q]}return this.V(X),!0}eraseElementByIterator(Q){let J=Q.o;if(J===this.h)E4.throwIteratorAccessError();return this.V(J),Q.next()}eraseElementByPos(Q){if(Q<0||Q>this.i-1)throw new RangeError;let J=this.p;while(Q--)J=J.B;return this.V(J),this.i}}jq.HashContainer=Nq});var Pq=D((Lq)=>{Object.defineProperty(Lq,"t",{value:!0});Lq.default=void 0;var Aq=L5(),LA=R1();class d8 extends Aq.HashContainerIterator{constructor(Q,J,X,Y){super(Q,J,Y);this.container=X}get pointer(){if(this.o===this.h)LA.throwIteratorAccessError();return this.o.u}copy(){return new d8(this.o,this.h,this.container,this.iteratorType)}}class Dq extends Aq.HashContainer{constructor(Q=[]){super();let J=this;Q.forEach(function(X){J.insert(X)})}begin(){return new d8(this.p,this.h,this)}end(){return new d8(this.h,this.h,this)}rBegin(){return new d8(this._,this.h,this,1)}rEnd(){return new d8(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(Q,J){return this.M(Q,void 0,J)}getElementByPos(Q){if(Q<0||Q>this.i-1)throw new RangeError;let J=this.p;while(Q--)J=J.B;return J.u}find(Q,J){let X=this.I(Q,J);return new d8(X,this.h,this)}forEach(Q){let J=0,X=this.p;while(X!==this.h)Q(X.u,J++,this),X=X.B}[Symbol.iterator](){return function*(){let Q=this.p;while(Q!==this.h)yield Q.u,Q=Q.B}.bind(this)()}}var CA=Dq;Lq.default=CA});var Iq=D((Rq)=>{Object.defineProperty(Rq,"t",{value:!0});Rq.default=void 0;var wq=L5(),PA=EA(A5()),wA=R1();function EA(Q){return Q&&Q.t?Q:{default:Q}}class p8 extends wq.HashContainerIterator{constructor(Q,J,X,Y){super(Q,J,Y);this.container=X}get pointer(){if(this.o===this.h)wA.throwIteratorAccessError();let Q=this;return new Proxy([],{get(J,X){if(X==="0")return Q.o.u;else if(X==="1")return Q.o.l},set(J,X,Y){if(X!=="1")throw new TypeError("props must be 1");return Q.o.l=Y,!0}})}copy(){return new p8(this.o,this.h,this.container,this.iteratorType)}}class Eq extends wq.HashContainer{constructor(Q=[]){super();let J=this;Q.forEach(function(X){J.setElement(X[0],X[1])})}begin(){return new p8(this.p,this.h,this)}end(){return new p8(this.h,this.h,this)}rBegin(){return new p8(this._,this.h,this,1)}rEnd(){return new p8(this.h,this.h,this,1)}front(){if(this.i===0)return;return[this.p.u,this.p.l]}back(){if(this.i===0)return;return[this._.u,this._.l]}setElement(Q,J,X){return this.M(Q,J,X)}getElementByKey(Q,J){if(J===void 0)J=PA.default(Q);if(J){let Y=Q[this.HASH_TAG];return Y!==void 0?this.H[Y].l:void 0}let X=this.g[Q];return X?X.l:void 0}getElementByPos(Q){if(Q<0||Q>this.i-1)throw new RangeError;let J=this.p;while(Q--)J=J.B;return[J.u,J.l]}find(Q,J){let X=this.I(Q,J);return new p8(X,this.h,this)}forEach(Q){let J=0,X=this.p;while(X!==this.h)Q([X.u,X.l],J++,this),X=X.B}[Symbol.iterator](){return function*(){let Q=this.p;while(Q!==this.h)yield[Q.u,Q.l],Q=Q.B}.bind(this)()}}var RA=Eq;Rq.default=RA});var Zq=D((r0)=>{Object.defineProperty(r0,"t",{value:!0});Object.defineProperty(r0,"Deque",{enumerable:!0,get:function(){return xA.default}});Object.defineProperty(r0,"HashMap",{enumerable:!0,get:function(){return gA.default}});Object.defineProperty(r0,"HashSet",{enumerable:!0,get:function(){return yA.default}});Object.defineProperty(r0,"LinkList",{enumerable:!0,get:function(){return _A.default}});Object.defineProperty(r0,"OrderedMap",{enumerable:!0,get:function(){return vA.default}});Object.defineProperty(r0,"OrderedSet",{enumerable:!0,get:function(){return hA.default}});Object.defineProperty(r0,"PriorityQueue",{enumerable:!0,get:function(){return ZA.default}});Object.defineProperty(r0,"Queue",{enumerable:!0,get:function(){return IA.default}});Object.defineProperty(r0,"Stack",{enumerable:!0,get:function(){return TA.default}});Object.defineProperty(r0,"Vector",{enumerable:!0,get:function(){return SA.default}});var TA=T1(jH()),IA=T1(LH()),ZA=T1(EH()),SA=T1(gH()),_A=T1(mH()),xA=T1(dH()),hA=T1(qq()),vA=T1(Mq()),yA=T1(Pq()),gA=T1(Iq());function T1(Q){return Q&&Q.t?Q:{default:Q}}});var _q=D((pT,Sq)=>{var fA=Zq().OrderedSet,I1=q1()("number-allocator:trace"),kA=q1()("number-allocator:error");function _0(Q,J){this.low=Q,this.high=J}_0.prototype.equals=function(Q){return this.low===Q.low&&this.high===Q.high};_0.prototype.compare=function(Q){if(this.low<Q.low&&this.high<Q.low)return-1;if(Q.low<this.low&&Q.high<this.low)return 1;return 0};function Z1(Q,J){if(!(this instanceof Z1))return new Z1(Q,J);this.min=Q,this.max=J,this.ss=new fA([],(X,Y)=>{return X.compare(Y)}),I1("Create"),this.clear()}Z1.prototype.firstVacant=function(){if(this.ss.size()===0)return null;return this.ss.front().low};Z1.prototype.alloc=function(){if(this.ss.size()===0)return I1("alloc():empty"),null;let Q=this.ss.begin(),J=Q.pointer.low,X=Q.pointer.high,Y=J;if(Y+1<=X)this.ss.updateKeyByIterator(Q,new _0(J+1,X));else this.ss.eraseElementByPos(0);return I1("alloc():"+Y),Y};Z1.prototype.use=function(Q){let J=new _0(Q,Q),X=this.ss.lowerBound(J);if(!X.equals(this.ss.end())){let Y=X.pointer.low,$=X.pointer.high;if(X.pointer.equals(J))return this.ss.eraseElementByIterator(X),I1("use():"+Q),!0;if(Y>Q)return!1;if(Y===Q)return this.ss.updateKeyByIterator(X,new _0(Y+1,$)),I1("use():"+Q),!0;if($===Q)return this.ss.updateKeyByIterator(X,new _0(Y,$-1)),I1("use():"+Q),!0;return this.ss.updateKeyByIterator(X,new _0(Q+1,$)),this.ss.insert(new _0(Y,Q-1)),I1("use():"+Q),!0}return I1("use():failed"),!1};Z1.prototype.free=function(Q){if(Q<this.min||Q>this.max){kA("free():"+Q+" is out of range");return}let J=new _0(Q,Q),X=this.ss.upperBound(J);if(X.equals(this.ss.end())){if(X.equals(this.ss.begin())){this.ss.insert(J);return}X.pre();let Y=X.pointer.high;if(X.pointer.high+1===Q)this.ss.updateKeyByIterator(X,new _0(Y,Q));else this.ss.insert(J)}else if(X.equals(this.ss.begin()))if(Q+1===X.pointer.low){let Y=X.pointer.high;this.ss.updateKeyByIterator(X,new _0(Q,Y))}else this.ss.insert(J);else{let Y=X.pointer.low,$=X.pointer.high;X.pre();let G=X.pointer.low;if(X.pointer.high+1===Q)if(Q+1===Y)this.ss.eraseElementByIterator(X),this.ss.updateKeyByIterator(X,new _0(G,$));else this.ss.updateKeyByIterator(X,new _0(G,Q));else if(Q+1===Y)this.ss.eraseElementByIterator(X.next()),this.ss.insert(new _0(Q,$));else this.ss.insert(J)}I1("free():"+Q)};Z1.prototype.clear=function(){I1("clear()"),this.ss.clear(),this.ss.insert(new _0(this.min,this.max))};Z1.prototype.intervalCount=function(){return this.ss.size()};Z1.prototype.dump=function(){console.log("length:"+this.ss.size());for(let Q of this.ss)console.log(Q)};Sq.exports=Z1});var C5=D((mA,xq)=>{var bA=_q();mA.NumberAllocator=bA});var yq=D((vq)=>{Object.defineProperty(vq,"__esModule",{value:!0});var lA=WH(),cA=C5();class hq{constructor(Q){if(Q>0)this.aliasToTopic=new lA.LRUCache({max:Q}),this.topicToAlias={},this.numberAllocator=new cA.NumberAllocator(1,Q),this.max=Q,this.length=0}put(Q,J){if(J===0||J>this.max)return!1;let X=this.aliasToTopic.get(J);if(X)delete this.topicToAlias[X];return this.aliasToTopic.set(J,Q),this.topicToAlias[Q]=J,this.numberAllocator.use(J),this.length=this.aliasToTopic.size,!0}getTopicByAlias(Q){return this.aliasToTopic.get(Q)}getAliasByTopic(Q){let J=this.topicToAlias[Q];if(typeof J!=="undefined")this.aliasToTopic.get(J);return J}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){let Q=this.numberAllocator.firstVacant();if(Q)return Q;return[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}}vq.default=hq});var gq=D((R4)=>{var pA=R4&&R4.__importDefault||function(Q){return Q&&Q.__esModule?Q:{default:Q}};Object.defineProperty(R4,"__esModule",{value:!0});var nA=P4(),iA=pA(yq()),oA=b8(),rA=(Q,J)=>{Q.log("_handleConnack");let{options:X}=Q,$=X.protocolVersion===5?J.reasonCode:J.returnCode;if(clearTimeout(Q.connackTimer),delete Q.topicAliasSend,J.properties){if(J.properties.topicAliasMaximum){if(J.properties.topicAliasMaximum>65535){Q.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}if(J.properties.topicAliasMaximum>0)Q.topicAliasSend=new iA.default(J.properties.topicAliasMaximum)}if(J.properties.serverKeepAlive&&X.keepalive)X.keepalive=J.properties.serverKeepAlive;if(J.properties.maximumPacketSize){if(!X.properties)X.properties={};X.properties.maximumPacketSize=J.properties.maximumPacketSize}}if($===0)Q.reconnecting=!1,Q._onConnect(J);else if($>0){let G=new oA.ErrorWithReasonCode(`Connection refused: ${nA.ReasonCodes[$]}`,$);if(Q.emit("error",G),Q.options.reconnectOnConnackError)Q._cleanUp(!0)}};R4.default=rA});var kq=D((fq)=>{Object.defineProperty(fq,"__esModule",{value:!0});var aA=(Q,J,X)=>{Q.log("handling pubrel packet");let Y=typeof X!=="undefined"?X:Q.noop,{messageId:$}=J,G={cmd:"pubcomp",messageId:$};Q.incomingStore.get(J,(H,q)=>{if(!H)Q.emit("message",q.topic,q.payload,q),Q.handleMessage(q,(K)=>{if(K)return Y(K);Q.incomingStore.del(q,Q.noop),Q._sendPacket(G,Y)});else Q._sendPacket(G,Y)})};fq.default=aA});var bq=D((T4)=>{var I4=T4&&T4.__importDefault||function(Q){return Q&&Q.__esModule?Q:{default:Q}};Object.defineProperty(T4,"__esModule",{value:!0});var tA=I4(oG()),eA=I4(XH()),QD=I4(gq()),JD=I4(P4()),XD=I4(kq()),YD=(Q,J,X)=>{let{options:Y}=Q;if(Y.protocolVersion===5&&Y.properties&&Y.properties.maximumPacketSize&&Y.properties.maximumPacketSize<J.length)return Q.emit("error",new Error(`exceeding packets size ${J.cmd}`)),Q.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),Q;switch(Q.log("_handlePacket :: emitting packetreceive"),Q.emit("packetreceive",J),J.cmd){case"publish":tA.default(Q,J,X);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":Q.reschedulePing(),JD.default(Q,J),X();break;case"pubrel":Q.reschedulePing(),XD.default(Q,J,X);break;case"connack":QD.default(Q,J),X();break;case"auth":Q.reschedulePing(),eA.default(Q,J),X();break;case"pingresp":Q.log("_handlePacket :: received pingresp"),Q.reschedulePing(!0),X();break;case"disconnect":Q.emit("disconnect",J),X();break;default:Q.log("_handlePacket :: unknown command"),X();break}};T4.default=YD});var mq=D((TQ)=>{var $D=TQ&&TQ.__importDefault||function(Q){return Q&&Q.__esModule?Q:{default:Q}};Object.defineProperty(TQ,"__esModule",{value:!0});TQ.TypedEventEmitter=void 0;var GD=$D(y("events")),HD=b8();class P5{}TQ.TypedEventEmitter=P5;HD.applyMixin(P5,GD.default)});var Z4=D((cq)=>{Object.defineProperty(cq,"__esModule",{value:!0});cq.isReactNativeBrowser=cq.isWebWorker=void 0;var qD=()=>{var Q;if(typeof window!=="undefined"){if(typeof navigator!=="undefined"&&((Q=navigator.userAgent)===null||Q===void 0?void 0:Q.toLowerCase().indexOf(" electron/"))>-1&&(process===null||process===void 0?void 0:process.versions))return!Object.prototype.hasOwnProperty.call(process.versions,"electron");return typeof window.document!=="undefined"}return!1},uq=()=>{var Q,J;return Boolean(typeof self==="object"&&((J=(Q=self===null||self===void 0?void 0:self.constructor)===null||Q===void 0?void 0:Q.name)===null||J===void 0?void 0:J.includes("WorkerGlobalScope")))},lq=()=>typeof navigator!=="undefined"&&navigator.product==="ReactNative",KD=qD()||uq()||lq();cq.isWebWorker=uq();cq.isReactNativeBrowser=lq();cq.default=KD});var iq=D((pq)=>{Object.defineProperty(pq,"__esModule",{value:!0});pq.createAddUniqueNumber=void 0;var VD=(Q)=>{return(J)=>{let X=Q(J);return J.add(X),X}};pq.createAddUniqueNumber=VD});var aq=D((oq)=>{Object.defineProperty(oq,"__esModule",{value:!0});oq.createCache=void 0;var MD=(Q)=>{return(J,X)=>{return Q.set(J,X),X}};oq.createCache=MD});var XK=D((QK)=>{Object.defineProperty(QK,"__esModule",{value:!0});QK.createGenerateUniqueNumber=void 0;var sq=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,eq=536870912,tq=eq*2,UD=(Q,J)=>{return(X)=>{let Y=J.get(X),$=Y===void 0?X.size:Y<tq?Y+1:0;if(!X.has($))return Q(X,$);if(X.size<eq){while(X.has($))$=Math.floor(Math.random()*tq);return Q(X,$)}if(X.size>sq)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");while(X.has($))$=Math.floor(Math.random()*sq);return Q(X,$)}};QK.createGenerateUniqueNumber=UD});var $K=D((YK)=>{Object.defineProperty(YK,"__esModule",{value:!0})});var HK=D((GK)=>{Object.defineProperty(GK,"__esModule",{value:!0})});var KK=D((qK)=>{Object.defineProperty(qK,"__esModule",{value:!0})});var zK=D((WK)=>{Object.defineProperty(WK,"__esModule",{value:!0})});var MK=D((VK)=>{Object.defineProperty(VK,"__esModule",{value:!0})});var FK=D((UK)=>{Object.defineProperty(UK,"__esModule",{value:!0})});var OK=D((V0)=>{Object.defineProperty(V0,"__esModule",{value:!0});var w5=$K();Object.keys(w5).forEach(function(Q){if(Q==="default"||Q==="__esModule")return;if(Q in V0&&V0[Q]===w5[Q])return;Object.defineProperty(V0,Q,{enumerable:!0,get:function(){return w5[Q]}})});var E5=HK();Object.keys(E5).forEach(function(Q){if(Q==="default"||Q==="__esModule")return;if(Q in V0&&V0[Q]===E5[Q])return;Object.defineProperty(V0,Q,{enumerable:!0,get:function(){return E5[Q]}})});var R5=KK();Object.keys(R5).forEach(function(Q){if(Q==="default"||Q==="__esModule")return;if(Q in V0&&V0[Q]===R5[Q])return;Object.defineProperty(V0,Q,{enumerable:!0,get:function(){return R5[Q]}})});var T5=zK();Object.keys(T5).forEach(function(Q){if(Q==="default"||Q==="__esModule")return;if(Q in V0&&V0[Q]===T5[Q])return;Object.defineProperty(V0,Q,{enumerable:!0,get:function(){return T5[Q]}})});var I5=MK();Object.keys(I5).forEach(function(Q){if(Q==="default"||Q==="__esModule")return;if(Q in V0&&V0[Q]===I5[Q])return;Object.defineProperty(V0,Q,{enumerable:!0,get:function(){return I5[Q]}})});var Z5=FK();Object.keys(Z5).forEach(function(Q){if(Q==="default"||Q==="__esModule")return;if(Q in V0&&V0[Q]===Z5[Q])return;Object.defineProperty(V0,Q,{enumerable:!0,get:function(){return Z5[Q]}})})});var BK=D((S4)=>{Object.defineProperty(S4,"__esModule",{value:!0});var FD={addUniqueNumber:!0,generateUniqueNumber:!0};S4.generateUniqueNumber=S4.addUniqueNumber=void 0;var OD=iq(),ND=aq(),jD=XK(),S5=OK();Object.keys(S5).forEach(function(Q){if(Q==="default"||Q==="__esModule")return;if(Object.prototype.hasOwnProperty.call(FD,Q))return;if(Q in S4&&S4[Q]===S5[Q])return;Object.defineProperty(S4,Q,{enumerable:!0,get:function(){return S5[Q]}})});var NK=new WeakMap,BD=ND.createCache(NK),AD=S4.generateUniqueNumber=jD.createGenerateUniqueNumber(BD,NK),KI=S4.addUniqueNumber=OD.createAddUniqueNumber(AD)});var DK=D((e9,AK)=>{(function(Q,J){typeof e9==="object"&&typeof AK!=="undefined"?J(e9,BK()):typeof define==="function"&&define.amd?define(["exports","fast-unique-numbers"],J):(Q=typeof globalThis!=="undefined"?globalThis:Q||self,J(Q.workerTimersBroker={},Q.fastUniqueNumbers))})(e9,function(Q,J){var X=function G(H){return H.method!==void 0&&H.method==="call"},Y=function G(H){return H.error===null&&typeof H.id==="number"},$=function G(H){var q=new Map([[0,function(){}]]),K=new Map([[0,function(){}]]),z=new Map,V=new Worker(H);V.addEventListener("message",function(B){var L=B.data;if(X(L)){var C=L.params,P=C.timerId,_=C.timerType;if(_==="interval"){var x=q.get(P);if(typeof x==="number"){var i=z.get(x);if(i===void 0||i.timerId!==P||i.timerType!==_)throw new Error("The timer is in an undefined state.")}else if(typeof x!=="undefined")x();else throw new Error("The timer is in an undefined state.")}else if(_==="timeout"){var J0=K.get(P);if(typeof J0==="number"){var X0=z.get(J0);if(X0===void 0||X0.timerId!==P||X0.timerType!==_)throw new Error("The timer is in an undefined state.")}else if(typeof J0!=="undefined")J0(),K.delete(P);else throw new Error("The timer is in an undefined state.")}}else if(Y(L)){var z0=L.id,t=z.get(z0);if(t===void 0)throw new Error("The timer is in an undefined state.");var{timerId:C0,timerType:B8}=t;if(z.delete(z0),B8==="interval")q.delete(C0);else K.delete(C0)}else{var J4=L.error.message;throw new Error(J4)}});var F=function B(L){var C=J.generateUniqueNumber(z);z.set(C,{timerId:L,timerType:"interval"}),q.set(L,C),V.postMessage({id:C,method:"clear",params:{timerId:L,timerType:"interval"}})},O=function B(L){var C=J.generateUniqueNumber(z);z.set(C,{timerId:L,timerType:"timeout"}),K.set(L,C),V.postMessage({id:C,method:"clear",params:{timerId:L,timerType:"timeout"}})},N=function B(L){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,P=J.generateUniqueNumber(q);return q.set(P,function(){if(L(),typeof q.get(P)==="function")V.postMessage({id:null,method:"set",params:{delay:C,now:performance.now(),timerId:P,timerType:"interval"}})}),V.postMessage({id:null,method:"set",params:{delay:C,now:performance.now(),timerId:P,timerType:"interval"}}),P},A=function B(L){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,P=J.generateUniqueNumber(K);return K.set(P,L),V.postMessage({id:null,method:"set",params:{delay:C,now:performance.now(),timerId:P,timerType:"timeout"}}),P};return{clearInterval:F,clearTimeout:O,setInterval:N,setTimeout:A}};Q.load=$})});var CK=D((QJ,LK)=>{(function(Q,J){typeof QJ==="object"&&typeof LK!=="undefined"?J(QJ,DK()):typeof define==="function"&&define.amd?define(["exports","worker-timers-broker"],J):(Q=typeof globalThis!=="undefined"?globalThis:Q||self,J(Q.workerTimers={},Q.workerTimersBroker))})(QJ,function(Q,J){var X=function z(V,F){var O=null;return function(){if(O!==null)return O;var N=new Blob([F],{type:"application/javascript; charset=utf-8"}),A=URL.createObjectURL(N);return O=V(A),setTimeout(function(){return URL.revokeObjectURL(A)}),O}},Y=`(()=>{var e={472:(e,t,r)=>{var o,i;void 0===(i="function"==typeof(o=function(){"use strict";var e=new Map,t=new Map,r=function(t){var r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)},o=function(e){var r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)},i=function(e,t){var r,o=performance.now();return{expected:o+(r=e-Math.max(0,o-t)),remainingDelay:r}},n=function e(t,r,o,i){var n=performance.now();n>o?postMessage({id:null,method:"call",params:{timerId:r,timerType:i}}):t.set(r,setTimeout(e,o-n,t,r,o,i))},a=function(t,r,o){var a=i(t,o),s=a.expected,d=a.remainingDelay;e.set(r,setTimeout(n,d,e,r,s,"interval"))},s=function(e,r,o){var a=i(e,o),s=a.expected,d=a.remainingDelay;t.set(r,setTimeout(n,d,t,r,s,"timeout"))};addEventListener("message",(function(e){var t=e.data;try{if("clear"===t.method){var i=t.id,n=t.params,d=n.timerId,c=n.timerType;if("interval"===c)r(d),postMessage({error:null,id:i});else{if("timeout"!==c)throw new Error('The given type "'.concat(c,'" is not supported'));o(d),postMessage({error:null,id:i})}}else{if("set"!==t.method)throw new Error('The given method "'.concat(t.method,'" is not supported'));var u=t.params,l=u.delay,p=u.now,m=u.timerId,v=u.timerType;if("interval"===v)a(l,m,p);else{if("timeout"!==v)throw new Error('The given type "'.concat(v,'" is not supported'));s(l,m,p)}}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}}))})?o.call(t,r,t,e):o)||(e.exports=i)}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,$=X(J.load,Y),G=function z(V){return $().clearInterval(V)},H=function z(V){return $().clearTimeout(V)},q=function z(){var V;return(V=$()).setInterval.apply(V,arguments)},K=function z(){var V;return(V=$()).setTimeout.apply(V,arguments)};Q.clearInterval=G,Q.clearTimeout=H,Q.setInterval=q,Q.setTimeout=K})});var RK=D((u1)=>{var LD=u1&&u1.__createBinding||(Object.create?function(Q,J,X,Y){if(Y===void 0)Y=X;var $=Object.getOwnPropertyDescriptor(J,X);if(!$||("get"in $?!J.__esModule:$.writable||$.configurable))$={enumerable:!0,get:function(){return J[X]}};Object.defineProperty(Q,Y,$)}:function(Q,J,X,Y){if(Y===void 0)Y=X;Q[Y]=J[X]}),CD=u1&&u1.__setModuleDefault||(Object.create?function(Q,J){Object.defineProperty(Q,"default",{enumerable:!0,value:J})}:function(Q,J){Q.default=J}),PD=u1&&u1.__importStar||function(){var Q=function(J){return Q=Object.getOwnPropertyNames||function(X){var Y=[];for(var $ in X)if(Object.prototype.hasOwnProperty.call(X,$))Y[Y.length]=$;return Y},Q(J)};return function(J){if(J&&J.__esModule)return J;var X={};if(J!=null){for(var Y=Q(J),$=0;$<Y.length;$++)if(Y[$]!=="default")LD(X,J,Y[$])}return CD(X,J),X}}();Object.defineProperty(u1,"__esModule",{value:!0});var _5=PD(Z4()),PK=CK(),wK={set:PK.setInterval,clear:PK.clearInterval},EK={set:(Q,J)=>setInterval(Q,J),clear:(Q)=>clearInterval(Q)},wD=(Q)=>{switch(Q){case"native":return EK;case"worker":return wK;case"auto":default:return _5.default&&!_5.isWebWorker&&!_5.isReactNativeBrowser?wK:EK}};u1.default=wD});var x5=D((_4)=>{var ED=_4&&_4.__importDefault||function(Q){return Q&&Q.__esModule?Q:{default:Q}};Object.defineProperty(_4,"__esModule",{value:!0});var RD=ED(RK());class TK{get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(Q,J){this.destroyed=!1,this.client=Q,this.timer=typeof J==="object"&&"set"in J&&"clear"in J?J:RD.default(J),this.setKeepalive(Q.options.keepalive)}clear(){if(this.timerId)this.timer.clear(this.timerId),this.timerId=null}setKeepalive(Q){if(Q*=1000,isNaN(Q)||Q<=0||Q>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${Q}`);this._keepalive=Q,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${Q}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let Q=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+Q,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{if(this.destroyed)return;if(this.counter+=1,this.counter===2)this.client.sendPing();else if(this.counter>2)this.client.onKeepaliveTimeout()},this._intervalEvery)}}_4.default=TK});var XJ=D((z1)=>{var TD=z1&&z1.__createBinding||(Object.create?function(Q,J,X,Y){if(Y===void 0)Y=X;var $=Object.getOwnPropertyDescriptor(J,X);if(!$||("get"in $?!J.__esModule:$.writable||$.configurable))$={enumerable:!0,get:function(){return J[X]}};Object.defineProperty(Q,Y,$)}:function(Q,J,X,Y){if(Y===void 0)Y=X;Q[Y]=J[X]}),ID=z1&&z1.__setModuleDefault||(Object.create?function(Q,J){Object.defineProperty(Q,"default",{enumerable:!0,value:J})}:function(Q,J){Q.default=J}),xK=z1&&z1.__importStar||function(){var Q=function(J){return Q=Object.getOwnPropertyNames||function(X){var Y=[];for(var $ in X)if(Object.prototype.hasOwnProperty.call(X,$))Y[Y.length]=$;return Y},Q(J)};return function(J){if(J&&J.__esModule)return J;var X={};if(J!=null){for(var Y=Q(J),$=0;$<Y.length;$++)if(Y[$]!=="default")TD(X,J,Y[$])}return ID(X,J),X}}(),H8=z1&&z1.__importDefault||function(Q){return Q&&Q.__esModule?Q:{default:Q}};Object.defineProperty(z1,"__esModule",{value:!0});var ZD=H8(f6()),h5=H8(vG()),SD=H8(W5()),_D=X8(),IK=H8(mG()),ZK=xK(cG()),xD=H8(q1()),IQ=H8(z5()),hD=H8(bq()),JJ=b8(),vD=mq(),yD=H8(x5()),SK=xK(Z4()),v5=globalThis.setImmediate||((...Q)=>{let J=Q.shift();JJ.nextTick(()=>{J(...Q)})}),_K={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1000,connectTimeout:30000,clean:!0,resubscribe:!0,writeCache:!0,timerVariant:"auto"};class x4 extends vD.TypedEventEmitter{static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(Q,J){super();this.options=J||{};for(let X in _K)if(typeof this.options[X]==="undefined")this.options[X]=_K[X];else this.options[X]=J[X];if(this.log=this.options.log||xD.default("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",x4.VERSION),SK.isWebWorker)this.log("MqttClient :: environment","webworker");else this.log("MqttClient :: environment",SK.default?"browser":"node");if(this.log("MqttClient :: options.protocol",J.protocol),this.log("MqttClient :: options.protocolVersion",J.protocolVersion),this.log("MqttClient :: options.username",J.username),this.log("MqttClient :: options.keepalive",J.keepalive),this.log("MqttClient :: options.reconnectPeriod",J.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",J.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",J.properties?J.properties.topicAliasMaximum:void 0),this.options.clientId=typeof J.clientId==="string"?J.clientId:x4.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=J.protocolVersion===5&&J.customHandleAcks?J.customHandleAcks:(...X)=>{X[3](null,0)},!this.options.writeCache)h5.default.writeToStream.cacheNumbers=!1;if(this.streamBuilder=Q,this.messageIdProvider=typeof this.options.messageIdProvider==="undefined"?new SD.default:this.options.messageIdProvider,this.outgoingStore=J.outgoingStore||new IQ.default,this.incomingStore=J.incomingStore||new IQ.default,this.queueQoSZero=J.queueQoSZero===void 0?!0:J.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,J.properties&&J.properties.topicAliasMaximum>0)if(J.properties.topicAliasMaximum>65535)this.log("MqttClient :: options.properties.topicAliasMaximum is out of range");else this.topicAliasRecv=new ZD.default(J.properties.topicAliasMaximum);if(this.on("connect",()=>{let{queue:X}=this,Y=()=>{let $=X.shift();this.log("deliver :: entry %o",$);let G=null;if(!$){this._resubscribe();return}G=$.packet,this.log("deliver :: call _sendPacket for %o",G);let H=!0;if(G.messageId&&G.messageId!==0){if(!this.messageIdProvider.register(G.messageId))H=!1}if(H)this._sendPacket(G,(q)=>{if($.cb)$.cb(q);Y()});else this.log("messageId: %d has already used. The message is skipped and removed.",G.messageId),Y()};this.log("connect :: sending queued packets"),Y()}),this.on("close",()=>{if(this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv)this.topicAliasRecv.clear();this.log("close :: calling _setupReconnect"),this._setupReconnect()}),!this.options.manualConnect)this.log("MqttClient :: setting up stream"),this.connect()}handleAuth(Q,J){J()}handleMessage(Q,J){J()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var Q;let J=new _D.Writable,X=h5.default.parser(this.options),Y=null,$=[];if(this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting)this.incomingStore=this.options.incomingStore||new IQ.default,this.outgoingStore=this.options.outgoingStore||new IQ.default,this.disconnecting=!1,this.disconnected=!1;this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),X.on("packet",(z)=>{this.log("parser :: on packet push to packets array."),$.push(z)});let G=()=>{this.log("work :: getting next packet in queue");let z=$.shift();if(z)this.log("work :: packet pulled from queue"),hD.default(this,z,H);else{this.log("work :: no packets in queue");let V=Y;if(Y=null,this.log("work :: done flag is %s",!!V),V)V()}},H=()=>{if($.length)JJ.nextTick(G);else{let z=Y;Y=null,z()}};J._write=(z,V,F)=>{Y=F,this.log("writable stream :: parsing buffer"),X.parse(z),G()};let q=(z)=>{if(this.log("streamErrorHandler :: error",z.message),z.code)this.log("streamErrorHandler :: emitting error"),this.emit("error",z);else this.noop(z)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(J),this.stream.on("error",q),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let K={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will)K.will=Object.assign(Object.assign({},this.options.will),{payload:(Q=this.options.will)===null||Q===void 0?void 0:Q.payload});if(this.topicAliasRecv){if(!K.properties)K.properties={};if(this.topicAliasRecv)K.properties.topicAliasMaximum=this.topicAliasRecv.max}if(this._writePacket(K),X.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket==="object"){let z=Object.assign({cmd:"auth",reasonCode:0},this.options.authPacket);this._writePacket(z)}}return this.stream.setMaxListeners(1000),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(Q,J,X,Y){this.log("publish :: message `%s` to topic `%s`",J,Q);let{options:$}=this;if(typeof X==="function")Y=X,X=null;X=X||{},X=Object.assign(Object.assign({},{qos:0,retain:!1,dup:!1}),X);let{qos:H,retain:q,dup:K,properties:z,cbStorePut:V}=X;if(this._checkDisconnecting(Y))return this;let F=()=>{let O=0;if(H===1||H===2){if(O=this._nextId(),O===null)return this.log("No messageId left"),!1}let N={cmd:"publish",topic:Q,payload:J,qos:H,retain:q,messageId:O,dup:K};if($.protocolVersion===5)N.properties=z;switch(this.log("publish :: qos",H),H){case 1:case 2:this.outgoing[N.messageId]={volatile:!1,cb:Y||this.noop},this.log("MqttClient:publish: packet cmd: %s",N.cmd),this._sendPacket(N,void 0,V);break;default:this.log("MqttClient:publish: packet cmd: %s",N.cmd),this._sendPacket(N,Y,V);break}return!0};if(this._storeProcessing||this._storeProcessingQueue.length>0||!F())this._storeProcessingQueue.push({invoke:F,cbStorePut:X.cbStorePut,callback:Y});return this}publishAsync(Q,J,X){return new Promise((Y,$)=>{this.publish(Q,J,X,(G,H)=>{if(G)$(G);else Y(H)})})}subscribe(Q,J,X){let Y=this.options.protocolVersion;if(typeof J==="function")X=J;X=X||this.noop;let $=!1,G=[];if(typeof Q==="string")Q=[Q],G=Q;else if(Array.isArray(Q))G=Q;else if(typeof Q==="object")$=Q.resubscribe,delete Q.resubscribe,G=Object.keys(Q);let H=ZK.validateTopics(G);if(H!==null)return v5(X,new Error(`Invalid topic ${H}`)),this;if(this._checkDisconnecting(X))return this.log("subscribe: discconecting true"),this;let q={qos:0};if(Y===5)q.nl=!1,q.rap=!1,q.rh=0;J=Object.assign(Object.assign({},q),J);let K=J.properties,z=[],V=(O,N)=>{if(N=N||J,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,O)||this._resubscribeTopics[O].qos<N.qos||$){let A={topic:O,qos:N.qos};if(Y===5)A.nl=N.nl,A.rap=N.rap,A.rh=N.rh,A.properties=K;this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",A.topic,A.qos),z.push(A)}};if(Array.isArray(Q))Q.forEach((O)=>{this.log("subscribe: array topic %s",O),V(O)});else Object.keys(Q).forEach((O)=>{this.log("subscribe: object topic %s, %o",O,Q[O]),V(O,Q[O])});if(!z.length)return X(null,[]),this;let F=()=>{let O=this._nextId();if(O===null)return this.log("No messageId left"),!1;let N={cmd:"subscribe",subscriptions:z,messageId:O};if(K)N.properties=K;if(this.options.resubscribe){this.log("subscribe :: resubscribe true");let A=[];z.forEach((B)=>{if(this.options.reconnectPeriod>0){let L={qos:B.qos};if(Y===5)L.nl=B.nl||!1,L.rap=B.rap||!1,L.rh=B.rh||0,L.properties=B.properties;this._resubscribeTopics[B.topic]=L,A.push(B.topic)}}),this.messageIdToTopic[N.messageId]=A}return this.outgoing[N.messageId]={volatile:!0,cb(A,B){if(!A){let{granted:L}=B;for(let C=0;C<L.length;C+=1)z[C].qos=L[C]}X(A,z,B)}},this.log("subscribe :: call _sendPacket"),this._sendPacket(N),!0};if(this._storeProcessing||this._storeProcessingQueue.length>0||!F())this._storeProcessingQueue.push({invoke:F,callback:X});return this}subscribeAsync(Q,J){return new Promise((X,Y)=>{this.subscribe(Q,J,($,G)=>{if($)Y($);else X(G)})})}unsubscribe(Q,J,X){if(typeof Q==="string")Q=[Q];if(typeof J==="function")X=J;X=X||this.noop;let Y=ZK.validateTopics(Q);if(Y!==null)return v5(X,new Error(`Invalid topic ${Y}`)),this;if(this._checkDisconnecting(X))return this;let $=()=>{let G=this._nextId();if(G===null)return this.log("No messageId left"),!1;let H={cmd:"unsubscribe",messageId:G,unsubscriptions:[]};if(typeof Q==="string")H.unsubscriptions=[Q];else if(Array.isArray(Q))H.unsubscriptions=Q;if(this.options.resubscribe)H.unsubscriptions.forEach((q)=>{delete this._resubscribeTopics[q]});if(typeof J==="object"&&J.properties)H.properties=J.properties;return this.outgoing[H.messageId]={volatile:!0,cb:X},this.log("unsubscribe: call _sendPacket"),this._sendPacket(H),!0};if(this._storeProcessing||this._storeProcessingQueue.length>0||!$())this._storeProcessingQueue.push({invoke:$,callback:X});return this}unsubscribeAsync(Q,J){return new Promise((X,Y)=>{this.unsubscribe(Q,J,($,G)=>{if($)Y($);else X(G)})})}end(Q,J,X){if(this.log("end :: (%s)",this.options.clientId),Q==null||typeof Q!=="boolean")X=X||J,J=Q,Q=!1;if(typeof J!=="object")X=X||J,J=null;if(this.log("end :: cb? %s",!!X),!X||typeof X!=="function")X=this.noop;let Y=()=>{if(this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close((G)=>{this.outgoingStore.close((H)=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),X){let q=G||H;this.log("end :: closeStores: invoking callback with args"),X(q)}})}),this._deferredReconnect)this._deferredReconnect();else if(this.options.reconnectPeriod===0||this.options.manualConnect)this.disconnecting=!1},$=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,Q),this._cleanUp(Q,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),JJ.nextTick(Y)},J)};if(this.disconnecting)return X(),this;if(this._clearReconnect(),this.disconnecting=!0,!Q&&Object.keys(this.outgoing).length>0)this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,$,10));else this.log("end :: (%s) :: immediately calling finish",this.options.clientId),$();return this}endAsync(Q,J){return new Promise((X,Y)=>{this.end(Q,J,($)=>{if($)Y($);else X()})})}removeOutgoingMessage(Q){if(this.outgoing[Q]){let{cb:J}=this.outgoing[Q];this._removeOutgoingAndStoreMessage(Q,()=>{J(new Error("Message removed"))})}return this}reconnect(Q){this.log("client reconnect");let J=()=>{if(Q)this.options.incomingStore=Q.incomingStore,this.options.outgoingStore=Q.outgoingStore;else this.options.incomingStore=null,this.options.outgoingStore=null;this.incomingStore=this.options.incomingStore||new IQ.default,this.outgoingStore=this.options.outgoingStore||new IQ.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};if(this.disconnecting&&!this.disconnected)this._deferredReconnect=J;else J();return this}_flushVolatile(){if(this.outgoing)this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach((Q)=>{if(this.outgoing[Q].volatile&&typeof this.outgoing[Q].cb==="function")this.outgoing[Q].cb(new Error("Connection closed")),delete this.outgoing[Q]})}_flush(){if(this.outgoing)this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach((Q)=>{if(typeof this.outgoing[Q].cb==="function")this.outgoing[Q].cb(new Error("Connection closed")),delete this.outgoing[Q]})}_removeTopicAliasAndRecoverTopicName(Q){let J;if(Q.properties)J=Q.properties.topicAlias;let X=Q.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",J,X),X.length===0){if(typeof J==="undefined")return new Error("Unregistered Topic Alias");if(X=this.topicAliasSend.getTopicByAlias(J),typeof X==="undefined")return new Error("Unregistered Topic Alias");Q.topic=X}if(J)delete Q.properties.topicAlias}_checkDisconnecting(Q){if(this.disconnecting)if(Q&&Q!==this.noop)Q(new Error("client disconnecting"));else this.emit("error",new Error("client disconnecting"));return this.disconnecting}_reconnect(){if(this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected)this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.");else this.log("_reconnect: calling connect"),this.connect()}_setupReconnect(){if(!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0){if(!this.reconnecting)this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0;this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)}else this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){if(this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer)clearInterval(this.reconnectTimer),this.reconnectTimer=null}_cleanUp(Q,J,X={}){if(J)this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",J);if(this.log("_cleanUp :: forced? %s",Q),Q){if(this.options.reconnectPeriod===0&&this.options.clean)this._flush();this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy()}else{let Y=Object.assign({cmd:"disconnect"},X);this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(Y,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),v5(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}if(!this.disconnecting&&!this.reconnecting)this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect();if(this._destroyKeepaliveManager(),J&&!this.connected)this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",J),J()}_storeAndSend(Q,J,X){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",Q.cmd);let Y=Q,$;if(Y.cmd==="publish"){if(Y=IK.default(Q),$=this._removeTopicAliasAndRecoverTopicName(Y),$)return J&&J($)}this.outgoingStore.put(Y,(G)=>{if(G)return J&&J(G);X(),this._writePacket(Q,J)})}_applyTopicAlias(Q){if(this.options.protocolVersion===5){if(Q.cmd==="publish"){let J;if(Q.properties)J=Q.properties.topicAlias;let X=Q.topic.toString();if(this.topicAliasSend){if(J){if(X.length!==0){if(this.log("applyTopicAlias :: register topic: %s - alias: %d",X,J),!this.topicAliasSend.put(X,J))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",X,J),new Error("Sending Topic Alias out of range")}}else if(X.length!==0){if(this.options.autoAssignTopicAlias)if(J=this.topicAliasSend.getAliasByTopic(X),J)Q.topic="",Q.properties=Object.assign(Object.assign({},Q.properties),{topicAlias:J}),this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",X,J);else J=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(X,J),Q.properties=Object.assign(Object.assign({},Q.properties),{topicAlias:J}),this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",X,J);else if(this.options.autoUseTopicAlias){if(J=this.topicAliasSend.getAliasByTopic(X),J)Q.topic="",Q.properties=Object.assign(Object.assign({},Q.properties),{topicAlias:J}),this.log("applyTopicAlias :: auto use topic: %s - alias: %d",X,J)}}}else if(J)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",X,J),new Error("Sending Topic Alias out of range")}}}_noop(Q){this.log("noop ::",Q)}_writePacket(Q,J){this.log("_writePacket :: packet: %O",Q),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",Q),this.log("_writePacket :: writing to stream");let X=h5.default.writeToStream(Q,this.stream,this.options);if(this.log("_writePacket :: writeToStream result %s",X),!X&&J&&J!==this.noop)this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",J);else if(J)this.log("_writePacket :: invoking cb"),J()}_sendPacket(Q,J,X,Y){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),X=X||this.noop,J=J||this.noop;let $=this._applyTopicAlias(Q);if($){J($);return}if(!this.connected){if(Q.cmd==="auth"){this._writePacket(Q,J);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(Q,J,X);return}if(Y){this._writePacket(Q,J);return}switch(Q.cmd){case"publish":break;case"pubrel":this._storeAndSend(Q,J,X);return;default:this._writePacket(Q,J);return}switch(Q.qos){case 2:case 1:this._storeAndSend(Q,J,X);break;case 0:default:this._writePacket(Q,J);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(Q,J,X){this.log("_storePacket :: packet: %o",Q),this.log("_storePacket :: cb? %s",!!J),X=X||this.noop;let Y=Q;if(Y.cmd==="publish"){Y=IK.default(Q);let G=this._removeTopicAliasAndRecoverTopicName(Y);if(G)return J&&J(G)}let $=Y.qos||0;if($===0&&this.queueQoSZero||Y.cmd!=="publish")this.queue.push({packet:Y,cb:J});else if($>0)J=this.outgoing[Y.messageId]?this.outgoing[Y.messageId].cb:null,this.outgoingStore.put(Y,(G)=>{if(G)return J&&J(G);X()});else if(J)J(new Error("No connection to broker"))}_setupKeepaliveManager(){if(this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive)this.keepaliveManager=new yD.default(this,this.options.timerVariant)}_destroyKeepaliveManager(){if(this.keepaliveManager)this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null}reschedulePing(Q=!1){if(this.keepaliveManager&&this.options.keepalive&&(Q||this.options.reschedulePings))this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let Q=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&Q.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let J=0;J<Q.length;J++){let X={};X[Q[J]]=this._resubscribeTopics[Q[J]],X.resubscribe=!0,this.subscribe(X,{properties:X[Q[J]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(Q){if(this.disconnected){this.emit("connect",Q);return}this.connackPacket=Q,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let J=()=>{let X=this.outgoingStore.createStream(),Y=()=>{X.destroy(),X=null,this._flushStoreProcessingQueue(),$()},$=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",Y),X.on("error",(H)=>{$(),this._flushStoreProcessingQueue(),this.removeListener("close",Y),this.emit("error",H)});let G=()=>{if(!X)return;let H=X.read(1),q;if(!H){X.once("readable",G);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[H.messageId]){G();return}if(!this.disconnecting&&!this.reconnectTimer)if(q=this.outgoing[H.messageId]?this.outgoing[H.messageId].cb:null,this.outgoing[H.messageId]={volatile:!1,cb(K,z){if(q)q(K,z);G()}},this._packetIdsDuringStoreProcessing[H.messageId]=!0,this.messageIdProvider.register(H.messageId))this._sendPacket(H,void 0,void 0,!0);else this.log("messageId: %d has already used.",H.messageId);else if(X.destroy)X.destroy()};X.on("end",()=>{let H=!0;for(let q in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[q]){H=!1;break}if(this.removeListener("close",Y),H)$(),this._invokeAllStoreProcessingQueue(),this.emit("connect",Q);else J()}),G()};J()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let Q=this._storeProcessingQueue[0];if(Q&&Q.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){while(this._invokeStoreProcessingQueue());}_flushStoreProcessingQueue(){for(let Q of this._storeProcessingQueue){if(Q.cbStorePut)Q.cbStorePut(new Error("Connection closed"));if(Q.callback)Q.callback(new Error("Connection closed"))}this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(Q,J){delete this.outgoing[Q],this.outgoingStore.del({messageId:Q},(X,Y)=>{J(X,Y),this.messageIdProvider.deallocate(Q),this._invokeStoreProcessingQueue()})}}x4.VERSION=JJ.MQTTJS_VERSION;z1.default=x4});var yK=D((vK)=>{Object.defineProperty(vK,"__esModule",{value:!0});var gD=C5();class hK{constructor(){this.numberAllocator=new gD.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(Q){return this.numberAllocator.use(Q)}deallocate(Q){this.numberAllocator.free(Q)}clear(){this.numberAllocator.clear()}}vK.default=hK});var l1=D((FI,kK)=>{var gK=["nodebuffer","arraybuffer","fragments"],fK=typeof Blob!=="undefined";if(fK)gK.push("blob");kK.exports={BINARY_TYPES:gK,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:fK,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var h4=D((OI,YJ)=>{var{EMPTY_BUFFER:kD}=l1(),y5=Buffer[Symbol.species];function bD(Q,J){if(Q.length===0)return kD;if(Q.length===1)return Q[0];let X=Buffer.allocUnsafe(J),Y=0;for(let $=0;$<Q.length;$++){let G=Q[$];X.set(G,Y),Y+=G.length}if(Y<J)return new y5(X.buffer,X.byteOffset,Y);return X}function bK(Q,J,X,Y,$){for(let G=0;G<$;G++)X[Y+G]=Q[G]^J[G&3]}function mK(Q,J){for(let X=0;X<Q.length;X++)Q[X]^=J[X&3]}function mD(Q){if(Q.length===Q.buffer.byteLength)return Q.buffer;return Q.buffer.slice(Q.byteOffset,Q.byteOffset+Q.length)}function g5(Q){if(g5.readOnly=!0,Buffer.isBuffer(Q))return Q;let J;if(Q instanceof ArrayBuffer)J=new y5(Q);else if(ArrayBuffer.isView(Q))J=new y5(Q.buffer,Q.byteOffset,Q.byteLength);else J=Buffer.from(Q),g5.readOnly=!1;return J}YJ.exports={concat:bD,mask:bK,toArrayBuffer:mD,toBuffer:g5,unmask:mK};if(!process.env.WS_NO_BUFFER_UTIL)try{let Q=(()=>{throw new Error("Cannot require module "+"bufferutil");})();YJ.exports.mask=function(J,X,Y,$,G){if(G<48)bK(J,X,Y,$,G);else Q.mask(J,X,Y,$,G)},YJ.exports.unmask=function(J,X){if(J.length<32)mK(J,X);else Q.unmask(J,X)}}catch(Q){}});var dK=D((NI,cK)=>{var uK=Symbol("kDone"),f5=Symbol("kRun");class lK{constructor(Q){this[uK]=()=>{this.pending--,this[f5]()},this.concurrency=Q||1/0,this.jobs=[],this.pending=0}add(Q){this.jobs.push(Q),this[f5]()}[f5](){if(this.pending===this.concurrency)return;if(this.jobs.length){let Q=this.jobs.shift();this.pending++,Q(this[uK])}}}cK.exports=lK});var g4=D((jI,rK)=>{var v4=y("zlib"),pK=h4(),uD=dK(),{kStatusCode:nK}=l1(),lD=Buffer[Symbol.species],cD=Buffer.from([0,0,255,255]),HJ=Symbol("permessage-deflate"),c1=Symbol("total-length"),y4=Symbol("callback"),q8=Symbol("buffers"),GJ=Symbol("error"),$J;class iK{constructor(Q,J,X){if(this._maxPayload=X|0,this._options=Q||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!J,this._deflate=null,this._inflate=null,this.params=null,!$J){let Y=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;$J=new uD(Y)}}static get extensionName(){return"permessage-deflate"}offer(){let Q={};if(this._options.serverNoContextTakeover)Q.server_no_context_takeover=!0;if(this._options.clientNoContextTakeover)Q.client_no_context_takeover=!0;if(this._options.serverMaxWindowBits)Q.server_max_window_bits=this._options.serverMaxWindowBits;if(this._options.clientMaxWindowBits)Q.client_max_window_bits=this._options.clientMaxWindowBits;else if(this._options.clientMaxWindowBits==null)Q.client_max_window_bits=!0;return Q}accept(Q){return Q=this.normalizeParams(Q),this.params=this._isServer?this.acceptAsServer(Q):this.acceptAsClient(Q),this.params}cleanup(){if(this._inflate)this._inflate.close(),this._inflate=null;if(this._deflate){let Q=this._deflate[y4];if(this._deflate.close(),this._deflate=null,Q)Q(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(Q){let J=this._options,X=Q.find((Y)=>{if(J.serverNoContextTakeover===!1&&Y.server_no_context_takeover||Y.server_max_window_bits&&(J.serverMaxWindowBits===!1||typeof J.serverMaxWindowBits==="number"&&J.serverMaxWindowBits>Y.server_max_window_bits)||typeof J.clientMaxWindowBits==="number"&&!Y.client_max_window_bits)return!1;return!0});if(!X)throw new Error("None of the extension offers can be accepted");if(J.serverNoContextTakeover)X.server_no_context_takeover=!0;if(J.clientNoContextTakeover)X.client_no_context_takeover=!0;if(typeof J.serverMaxWindowBits==="number")X.server_max_window_bits=J.serverMaxWindowBits;if(typeof J.clientMaxWindowBits==="number")X.client_max_window_bits=J.clientMaxWindowBits;else if(X.client_max_window_bits===!0||J.clientMaxWindowBits===!1)delete X.client_max_window_bits;return X}acceptAsClient(Q){let J=Q[0];if(this._options.clientNoContextTakeover===!1&&J.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!J.client_max_window_bits){if(typeof this._options.clientMaxWindowBits==="number")J.client_max_window_bits=this._options.clientMaxWindowBits}else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits==="number"&&J.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return J}normalizeParams(Q){return Q.forEach((J)=>{Object.keys(J).forEach((X)=>{let Y=J[X];if(Y.length>1)throw new Error(`Parameter "${X}" must have only a single value`);if(Y=Y[0],X==="client_max_window_bits"){if(Y!==!0){let $=+Y;if(!Number.isInteger($)||$<8||$>15)throw new TypeError(`Invalid value for parameter "${X}": ${Y}`);Y=$}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${X}": ${Y}`)}else if(X==="server_max_window_bits"){let $=+Y;if(!Number.isInteger($)||$<8||$>15)throw new TypeError(`Invalid value for parameter "${X}": ${Y}`);Y=$}else if(X==="client_no_context_takeover"||X==="server_no_context_takeover"){if(Y!==!0)throw new TypeError(`Invalid value for parameter "${X}": ${Y}`)}else throw new Error(`Unknown parameter "${X}"`);J[X]=Y})}),Q}decompress(Q,J,X){$J.add((Y)=>{this._decompress(Q,J,($,G)=>{Y(),X($,G)})})}compress(Q,J,X){$J.add((Y)=>{this._compress(Q,J,($,G)=>{Y(),X($,G)})})}_decompress(Q,J,X){let Y=this._isServer?"client":"server";if(!this._inflate){let $=`${Y}_max_window_bits`,G=typeof this.params[$]!=="number"?v4.Z_DEFAULT_WINDOWBITS:this.params[$];this._inflate=v4.createInflateRaw({...this._options.zlibInflateOptions,windowBits:G}),this._inflate[HJ]=this,this._inflate[c1]=0,this._inflate[q8]=[],this._inflate.on("error",pD),this._inflate.on("data",oK)}if(this._inflate[y4]=X,this._inflate.write(Q),J)this._inflate.write(cD);this._inflate.flush(()=>{let $=this._inflate[GJ];if($){this._inflate.close(),this._inflate=null,X($);return}let G=pK.concat(this._inflate[q8],this._inflate[c1]);if(this._inflate._readableState.endEmitted)this._inflate.close(),this._inflate=null;else if(this._inflate[c1]=0,this._inflate[q8]=[],J&&this.params[`${Y}_no_context_takeover`])this._inflate.reset();X(null,G)})}_compress(Q,J,X){let Y=this._isServer?"server":"client";if(!this._deflate){let $=`${Y}_max_window_bits`,G=typeof this.params[$]!=="number"?v4.Z_DEFAULT_WINDOWBITS:this.params[$];this._deflate=v4.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:G}),this._deflate[c1]=0,this._deflate[q8]=[],this._deflate.on("data",dD)}this._deflate[y4]=X,this._deflate.write(Q),this._deflate.flush(v4.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let $=pK.concat(this._deflate[q8],this._deflate[c1]);if(J)$=new lD($.buffer,$.byteOffset,$.length-4);if(this._deflate[y4]=null,this._deflate[c1]=0,this._deflate[q8]=[],J&&this.params[`${Y}_no_context_takeover`])this._deflate.reset();X(null,$)})}}rK.exports=iK;function dD(Q){this[q8].push(Q),this[c1]+=Q.length}function oK(Q){if(this[c1]+=Q.length,this[HJ]._maxPayload<1||this[c1]<=this[HJ]._maxPayload){this[q8].push(Q);return}this[GJ]=new RangeError("Max payload size exceeded"),this[GJ].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[GJ][nK]=1009,this.removeListener("data",oK),this.reset()}function pD(Q){this[HJ]._inflate=null,Q[nK]=1007,this[y4](Q)}});var ZQ=D((BI,qJ)=>{var{isUtf8:aK}=y("buffer"),{hasBlob:nD}=l1(),iD=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function oD(Q){return Q>=1000&&Q<=1014&&Q!==1004&&Q!==1005&&Q!==1006||Q>=3000&&Q<=4999}function k5(Q){let J=Q.length,X=0;while(X<J)if((Q[X]&128)===0)X++;else if((Q[X]&224)===192){if(X+1===J||(Q[X+1]&192)!==128||(Q[X]&254)===192)return!1;X+=2}else if((Q[X]&240)===224){if(X+2>=J||(Q[X+1]&192)!==128||(Q[X+2]&192)!==128||Q[X]===224&&(Q[X+1]&224)===128||Q[X]===237&&(Q[X+1]&224)===160)return!1;X+=3}else if((Q[X]&248)===240){if(X+3>=J||(Q[X+1]&192)!==128||(Q[X+2]&192)!==128||(Q[X+3]&192)!==128||Q[X]===240&&(Q[X+1]&240)===128||Q[X]===244&&Q[X+1]>143||Q[X]>244)return!1;X+=4}else return!1;return!0}function rD(Q){return nD&&typeof Q==="object"&&typeof Q.arrayBuffer==="function"&&typeof Q.type==="string"&&typeof Q.stream==="function"&&(Q[Symbol.toStringTag]==="Blob"||Q[Symbol.toStringTag]==="File")}qJ.exports={isBlob:rD,isValidStatusCode:oD,isValidUTF8:k5,tokenChars:iD};if(aK)qJ.exports.isValidUTF8=function(Q){return Q.length<24?k5(Q):aK(Q)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let Q=(()=>{throw new Error("Cannot require module "+"utf-8-validate");})();qJ.exports.isValidUTF8=function(J){return J.length<32?k5(J):Q(J)}}catch(Q){}});var m5=D((AI,J3)=>{var{Writable:aD}=y("stream"),sK=g4(),{BINARY_TYPES:sD,EMPTY_BUFFER:tK,kStatusCode:tD,kWebSocket:eD}=l1(),{concat:b5,toArrayBuffer:QL,unmask:JL}=h4(),{isValidStatusCode:XL,isValidUTF8:eK}=ZQ(),KJ=Buffer[Symbol.species];class Q3 extends aD{constructor(Q={}){super();this._allowSynchronousEvents=Q.allowSynchronousEvents!==void 0?Q.allowSynchronousEvents:!0,this._binaryType=Q.binaryType||sD[0],this._extensions=Q.extensions||{},this._isServer=!!Q.isServer,this._maxPayload=Q.maxPayload|0,this._skipUTF8Validation=!!Q.skipUTF8Validation,this[eD]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(Q,J,X){if(this._opcode===8&&this._state==0)return X();this._bufferedBytes+=Q.length,this._buffers.push(Q),this.startLoop(X)}consume(Q){if(this._bufferedBytes-=Q,Q===this._buffers[0].length)return this._buffers.shift();if(Q<this._buffers[0].length){let X=this._buffers[0];return this._buffers[0]=new KJ(X.buffer,X.byteOffset+Q,X.length-Q),new KJ(X.buffer,X.byteOffset,Q)}let J=Buffer.allocUnsafe(Q);do{let X=this._buffers[0],Y=J.length-Q;if(Q>=X.length)J.set(this._buffers.shift(),Y);else J.set(new Uint8Array(X.buffer,X.byteOffset,Q),Y),this._buffers[0]=new KJ(X.buffer,X.byteOffset+Q,X.length-Q);Q-=X.length}while(Q>0);return J}startLoop(Q){this._loop=!0;do switch(this._state){case 0:this.getInfo(Q);break;case 1:this.getPayloadLength16(Q);break;case 2:this.getPayloadLength64(Q);break;case 3:this.getMask();break;case 4:this.getData(Q);break;case 5:case 6:this._loop=!1;return}while(this._loop);if(!this._errored)Q()}getInfo(Q){if(this._bufferedBytes<2){this._loop=!1;return}let J=this.consume(2);if((J[0]&48)!==0){let Y=this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");Q(Y);return}let X=(J[0]&64)===64;if(X&&!this._extensions[sK.extensionName]){let Y=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");Q(Y);return}if(this._fin=(J[0]&128)===128,this._opcode=J[0]&15,this._payloadLength=J[1]&127,this._opcode===0){if(X){let Y=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");Q(Y);return}if(!this._fragmented){let Y=this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");Q(Y);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){let Y=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");Q(Y);return}this._compressed=X}else if(this._opcode>7&&this._opcode<11){if(!this._fin){let Y=this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");Q(Y);return}if(X){let Y=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");Q(Y);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){let Y=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");Q(Y);return}}else{let Y=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");Q(Y);return}if(!this._fin&&!this._fragmented)this._fragmented=this._opcode;if(this._masked=(J[1]&128)===128,this._isServer){if(!this._masked){let Y=this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK");Q(Y);return}}else if(this._masked){let Y=this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");Q(Y);return}if(this._payloadLength===126)this._state=1;else if(this._payloadLength===127)this._state=2;else this.haveLength(Q)}getPayloadLength16(Q){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(Q)}getPayloadLength64(Q){if(this._bufferedBytes<8){this._loop=!1;return}let J=this.consume(8),X=J.readUInt32BE(0);if(X>Math.pow(2,21)-1){let Y=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");Q(Y);return}this._payloadLength=X*Math.pow(2,32)+J.readUInt32BE(4),this.haveLength(Q)}haveLength(Q){if(this._payloadLength&&this._opcode<8){if(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0){let J=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");Q(J);return}}if(this._masked)this._state=3;else this._state=4}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=4}getData(Q){let J=tK;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}if(J=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!==0)JL(J,this._mask)}if(this._opcode>7){this.controlMessage(J,Q);return}if(this._compressed){this._state=5,this.decompress(J,Q);return}if(J.length)this._messageLength=this._totalPayloadLength,this._fragments.push(J);this.dataMessage(Q)}decompress(Q,J){this._extensions[sK.extensionName].decompress(Q,this._fin,(Y,$)=>{if(Y)return J(Y);if($.length){if(this._messageLength+=$.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let G=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");J(G);return}this._fragments.push($)}if(this.dataMessage(J),this._state===0)this.startLoop(J)})}dataMessage(Q){if(!this._fin){this._state=0;return}let J=this._messageLength,X=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let Y;if(this._binaryType==="nodebuffer")Y=b5(X,J);else if(this._binaryType==="arraybuffer")Y=QL(b5(X,J));else if(this._binaryType==="blob")Y=new Blob(X);else Y=X;if(this._allowSynchronousEvents)this.emit("message",Y,!0),this._state=0;else this._state=6,setImmediate(()=>{this.emit("message",Y,!0),this._state=0,this.startLoop(Q)})}else{let Y=b5(X,J);if(!this._skipUTF8Validation&&!eK(Y)){let $=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");Q($);return}if(this._state===5||this._allowSynchronousEvents)this.emit("message",Y,!1),this._state=0;else this._state=6,setImmediate(()=>{this.emit("message",Y,!1),this._state=0,this.startLoop(Q)})}}controlMessage(Q,J){if(this._opcode===8){if(Q.length===0)this._loop=!1,this.emit("conclude",1005,tK),this.end();else{let X=Q.readUInt16BE(0);if(!XL(X)){let $=this.createError(RangeError,`invalid status code ${X}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");J($);return}let Y=new KJ(Q.buffer,Q.byteOffset+2,Q.length-2);if(!this._skipUTF8Validation&&!eK(Y)){let $=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");J($);return}this._loop=!1,this.emit("conclude",X,Y),this.end()}this._state=0;return}if(this._allowSynchronousEvents)this.emit(this._opcode===9?"ping":"pong",Q),this._state=0;else this._state=6,setImmediate(()=>{this.emit(this._opcode===9?"ping":"pong",Q),this._state=0,this.startLoop(J)})}createError(Q,J,X,Y,$){this._loop=!1,this._errored=!0;let G=new Q(X?`Invalid WebSocket frame: ${J}`:J);return Error.captureStackTrace(G,this.createError),G.code=$,G[tD]=Y,G}}J3.exports=Q3});var l5=D((LI,$3)=>{var{Duplex:DI}=y("stream"),{randomFillSync:YL}=y("crypto"),X3=g4(),{EMPTY_BUFFER:$L,kWebSocket:GL,NOOP:HL}=l1(),{isBlob:SQ,isValidStatusCode:qL}=ZQ(),{mask:Y3,toBuffer:n8}=h4(),a0=Symbol("kByteLength"),KL=Buffer.alloc(4),i8,_Q=8192,V1=0,WL=1,zL=2;class K8{constructor(Q,J,X){if(this._extensions=J||{},X)this._generateMask=X,this._maskBuffer=Buffer.alloc(4);this._socket=Q,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=V1,this.onerror=HL,this[GL]=void 0}static frame(Q,J){let X,Y=!1,$=2,G=!1;if(J.mask){if(X=J.maskBuffer||KL,J.generateMask)J.generateMask(X);else{if(_Q===8192){if(i8===void 0)i8=Buffer.alloc(8192);YL(i8,0,8192),_Q=0}X[0]=i8[_Q++],X[1]=i8[_Q++],X[2]=i8[_Q++],X[3]=i8[_Q++]}G=(X[0]|X[1]|X[2]|X[3])===0,$=6}let H;if(typeof Q==="string")if((!J.mask||G)&&J[a0]!==void 0)H=J[a0];else Q=Buffer.from(Q),H=Q.length;else H=Q.length,Y=J.mask&&J.readOnly&&!G;let q=H;if(H>=65536)$+=8,q=127;else if(H>125)$+=2,q=126;let K=Buffer.allocUnsafe(Y?H+$:$);if(K[0]=J.fin?J.opcode|128:J.opcode,J.rsv1)K[0]|=64;if(K[1]=q,q===126)K.writeUInt16BE(H,2);else if(q===127)K[2]=K[3]=0,K.writeUIntBE(H,4,6);if(!J.mask)return[K,Q];if(K[1]|=128,K[$-4]=X[0],K[$-3]=X[1],K[$-2]=X[2],K[$-1]=X[3],G)return[K,Q];if(Y)return Y3(Q,X,K,$,H),[K];return Y3(Q,X,Q,0,H),[K,Q]}close(Q,J,X,Y){let $;if(Q===void 0)$=$L;else if(typeof Q!=="number"||!qL(Q))throw new TypeError("First argument must be a valid error code number");else if(J===void 0||!J.length)$=Buffer.allocUnsafe(2),$.writeUInt16BE(Q,0);else{let H=Buffer.byteLength(J);if(H>123)throw new RangeError("The message must not be greater than 123 bytes");if($=Buffer.allocUnsafe(2+H),$.writeUInt16BE(Q,0),typeof J==="string")$.write(J,2);else $.set(J,2)}let G={[a0]:$.length,fin:!0,generateMask:this._generateMask,mask:X,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};if(this._state!==V1)this.enqueue([this.dispatch,$,!1,G,Y]);else this.sendFrame(K8.frame($,G),Y)}ping(Q,J,X){let Y,$;if(typeof Q==="string")Y=Buffer.byteLength(Q),$=!1;else if(SQ(Q))Y=Q.size,$=!1;else Q=n8(Q),Y=Q.length,$=n8.readOnly;if(Y>125)throw new RangeError("The data size must not be greater than 125 bytes");let G={[a0]:Y,fin:!0,generateMask:this._generateMask,mask:J,maskBuffer:this._maskBuffer,opcode:9,readOnly:$,rsv1:!1};if(SQ(Q))if(this._state!==V1)this.enqueue([this.getBlobData,Q,!1,G,X]);else this.getBlobData(Q,!1,G,X);else if(this._state!==V1)this.enqueue([this.dispatch,Q,!1,G,X]);else this.sendFrame(K8.frame(Q,G),X)}pong(Q,J,X){let Y,$;if(typeof Q==="string")Y=Buffer.byteLength(Q),$=!1;else if(SQ(Q))Y=Q.size,$=!1;else Q=n8(Q),Y=Q.length,$=n8.readOnly;if(Y>125)throw new RangeError("The data size must not be greater than 125 bytes");let G={[a0]:Y,fin:!0,generateMask:this._generateMask,mask:J,maskBuffer:this._maskBuffer,opcode:10,readOnly:$,rsv1:!1};if(SQ(Q))if(this._state!==V1)this.enqueue([this.getBlobData,Q,!1,G,X]);else this.getBlobData(Q,!1,G,X);else if(this._state!==V1)this.enqueue([this.dispatch,Q,!1,G,X]);else this.sendFrame(K8.frame(Q,G),X)}send(Q,J,X){let Y=this._extensions[X3.extensionName],$=J.binary?2:1,G=J.compress,H,q;if(typeof Q==="string")H=Buffer.byteLength(Q),q=!1;else if(SQ(Q))H=Q.size,q=!1;else Q=n8(Q),H=Q.length,q=n8.readOnly;if(this._firstFragment){if(this._firstFragment=!1,G&&Y&&Y.params[Y._isServer?"server_no_context_takeover":"client_no_context_takeover"])G=H>=Y._threshold;this._compress=G}else G=!1,$=0;if(J.fin)this._firstFragment=!0;let K={[a0]:H,fin:J.fin,generateMask:this._generateMask,mask:J.mask,maskBuffer:this._maskBuffer,opcode:$,readOnly:q,rsv1:G};if(SQ(Q))if(this._state!==V1)this.enqueue([this.getBlobData,Q,this._compress,K,X]);else this.getBlobData(Q,this._compress,K,X);else if(this._state!==V1)this.enqueue([this.dispatch,Q,this._compress,K,X]);else this.dispatch(Q,this._compress,K,X)}getBlobData(Q,J,X,Y){this._bufferedBytes+=X[a0],this._state=zL,Q.arrayBuffer().then(($)=>{if(this._socket.destroyed){let H=new Error("The socket was closed while the blob was being read");process.nextTick(u5,this,H,Y);return}this._bufferedBytes-=X[a0];let G=n8($);if(!J)this._state=V1,this.sendFrame(K8.frame(G,X),Y),this.dequeue();else this.dispatch(G,J,X,Y)}).catch(($)=>{process.nextTick(VL,this,$,Y)})}dispatch(Q,J,X,Y){if(!J){this.sendFrame(K8.frame(Q,X),Y);return}let $=this._extensions[X3.extensionName];this._bufferedBytes+=X[a0],this._state=WL,$.compress(Q,X.fin,(G,H)=>{if(this._socket.destroyed){let q=new Error("The socket was closed while data was being compressed");u5(this,q,Y);return}this._bufferedBytes-=X[a0],this._state=V1,X.readOnly=!1,this.sendFrame(K8.frame(H,X),Y),this.dequeue()})}dequeue(){while(this._state===V1&&this._queue.length){let Q=this._queue.shift();this._bufferedBytes-=Q[3][a0],Reflect.apply(Q[0],this,Q.slice(1))}}enqueue(Q){this._bufferedBytes+=Q[3][a0],this._queue.push(Q)}sendFrame(Q,J){if(Q.length===2)this._socket.cork(),this._socket.write(Q[0]),this._socket.write(Q[1],J),this._socket.uncork();else this._socket.write(Q[0],J)}}$3.exports=K8;function u5(Q,J,X){if(typeof X==="function")X(J);for(let Y=0;Y<Q._queue.length;Y++){let $=Q._queue[Y],G=$[$.length-1];if(typeof G==="function")G(J)}}function VL(Q,J,X){u5(Q,J,X),Q.onerror(J)}});var U3=D((CI,M3)=>{var{kForOnEventAttribute:f4,kListener:c5}=l1(),G3=Symbol("kCode"),H3=Symbol("kData"),q3=Symbol("kError"),K3=Symbol("kMessage"),W3=Symbol("kReason"),xQ=Symbol("kTarget"),z3=Symbol("kType"),V3=Symbol("kWasClean");class W8{constructor(Q){this[xQ]=null,this[z3]=Q}get target(){return this[xQ]}get type(){return this[z3]}}Object.defineProperty(W8.prototype,"target",{enumerable:!0});Object.defineProperty(W8.prototype,"type",{enumerable:!0});class hQ extends W8{constructor(Q,J={}){super(Q);this[G3]=J.code===void 0?0:J.code,this[W3]=J.reason===void 0?"":J.reason,this[V3]=J.wasClean===void 0?!1:J.wasClean}get code(){return this[G3]}get reason(){return this[W3]}get wasClean(){return this[V3]}}Object.defineProperty(hQ.prototype,"code",{enumerable:!0});Object.defineProperty(hQ.prototype,"reason",{enumerable:!0});Object.defineProperty(hQ.prototype,"wasClean",{enumerable:!0});class k4 extends W8{constructor(Q,J={}){super(Q);this[q3]=J.error===void 0?null:J.error,this[K3]=J.message===void 0?"":J.message}get error(){return this[q3]}get message(){return this[K3]}}Object.defineProperty(k4.prototype,"error",{enumerable:!0});Object.defineProperty(k4.prototype,"message",{enumerable:!0});class zJ extends W8{constructor(Q,J={}){super(Q);this[H3]=J.data===void 0?null:J.data}get data(){return this[H3]}}Object.defineProperty(zJ.prototype,"data",{enumerable:!0});var ML={addEventListener(Q,J,X={}){for(let $ of this.listeners(Q))if(!X[f4]&&$[c5]===J&&!$[f4])return;let Y;if(Q==="message")Y=function $(G,H){let q=new zJ("message",{data:H?G:G.toString()});q[xQ]=this,WJ(J,this,q)};else if(Q==="close")Y=function $(G,H){let q=new hQ("close",{code:G,reason:H.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});q[xQ]=this,WJ(J,this,q)};else if(Q==="error")Y=function $(G){let H=new k4("error",{error:G,message:G.message});H[xQ]=this,WJ(J,this,H)};else if(Q==="open")Y=function $(){let G=new W8("open");G[xQ]=this,WJ(J,this,G)};else return;if(Y[f4]=!!X[f4],Y[c5]=J,X.once)this.once(Q,Y);else this.on(Q,Y)},removeEventListener(Q,J){for(let X of this.listeners(Q))if(X[c5]===J&&!X[f4]){this.removeListener(Q,X);break}}};M3.exports={CloseEvent:hQ,ErrorEvent:k4,Event:W8,EventTarget:ML,MessageEvent:zJ};function WJ(Q,J,X){if(typeof Q==="object"&&Q.handleEvent)Q.handleEvent.call(Q,X);else Q.call(J,X)}});var d5=D((PI,F3)=>{var{tokenChars:b4}=ZQ();function S1(Q,J,X){if(Q[J]===void 0)Q[J]=[X];else Q[J].push(X)}function UL(Q){let J=Object.create(null),X=Object.create(null),Y=!1,$=!1,G=!1,H,q,K=-1,z=-1,V=-1,F=0;for(;F<Q.length;F++)if(z=Q.charCodeAt(F),H===void 0)if(V===-1&&b4[z]===1){if(K===-1)K=F}else if(F!==0&&(z===32||z===9)){if(V===-1&&K!==-1)V=F}else if(z===59||z===44){if(K===-1)throw new SyntaxError(`Unexpected character at index ${F}`);if(V===-1)V=F;let N=Q.slice(K,V);if(z===44)S1(J,N,X),X=Object.create(null);else H=N;K=V=-1}else throw new SyntaxError(`Unexpected character at index ${F}`);else if(q===void 0)if(V===-1&&b4[z]===1){if(K===-1)K=F}else if(z===32||z===9){if(V===-1&&K!==-1)V=F}else if(z===59||z===44){if(K===-1)throw new SyntaxError(`Unexpected character at index ${F}`);if(V===-1)V=F;if(S1(X,Q.slice(K,V),!0),z===44)S1(J,H,X),X=Object.create(null),H=void 0;K=V=-1}else if(z===61&&K!==-1&&V===-1)q=Q.slice(K,F),K=V=-1;else throw new SyntaxError(`Unexpected character at index ${F}`);else if($){if(b4[z]!==1)throw new SyntaxError(`Unexpected character at index ${F}`);if(K===-1)K=F;else if(!Y)Y=!0;$=!1}else if(G)if(b4[z]===1){if(K===-1)K=F}else if(z===34&&K!==-1)G=!1,V=F;else if(z===92)$=!0;else throw new SyntaxError(`Unexpected character at index ${F}`);else if(z===34&&Q.charCodeAt(F-1)===61)G=!0;else if(V===-1&&b4[z]===1){if(K===-1)K=F}else if(K!==-1&&(z===32||z===9)){if(V===-1)V=F}else if(z===59||z===44){if(K===-1)throw new SyntaxError(`Unexpected character at index ${F}`);if(V===-1)V=F;let N=Q.slice(K,V);if(Y)N=N.replace(/\\/g,""),Y=!1;if(S1(X,q,N),z===44)S1(J,H,X),X=Object.create(null),H=void 0;q=void 0,K=V=-1}else throw new SyntaxError(`Unexpected character at index ${F}`);if(K===-1||G||z===32||z===9)throw new SyntaxError("Unexpected end of input");if(V===-1)V=F;let O=Q.slice(K,V);if(H===void 0)S1(J,O,X);else{if(q===void 0)S1(X,O,!0);else if(Y)S1(X,q,O.replace(/\\/g,""));else S1(X,q,O);S1(J,H,X)}return J}function FL(Q){return Object.keys(Q).map((J)=>{let X=Q[J];if(!Array.isArray(X))X=[X];return X.map((Y)=>{return[J].concat(Object.keys(Y).map(($)=>{let G=Y[$];if(!Array.isArray(G))G=[G];return G.map((H)=>H===!0?$:`${$}=${H}`).join("; ")})).join("; ")}).join(", ")}).join(", ")}F3.exports={format:FL,parse:UL}});var FJ=D((RI,R3)=>{var OL=y("events"),NL=y("https"),jL=y("http"),j3=y("net"),BL=y("tls"),{randomBytes:AL,createHash:DL}=y("crypto"),{Duplex:wI,Readable:EI}=y("stream"),{URL:p5}=y("url"),z8=g4(),LL=m5(),CL=l5(),{isBlob:PL}=ZQ(),{BINARY_TYPES:O3,EMPTY_BUFFER:VJ,GUID:wL,kForOnEventAttribute:n5,kListener:EL,kStatusCode:RL,kWebSocket:j0,NOOP:B3}=l1(),{EventTarget:{addEventListener:TL,removeEventListener:IL}}=U3(),{format:ZL,parse:SL}=d5(),{toBuffer:_L}=h4(),A3=Symbol("kAborted"),i5=[8,13],d1=["CONNECTING","OPEN","CLOSING","CLOSED"],xL=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class l extends OL{constructor(Q,J,X){super();if(this._binaryType=O3[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=VJ,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=l.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,Q!==null){if(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,J===void 0)J=[];else if(!Array.isArray(J))if(typeof J==="object"&&J!==null)X=J,J=[];else J=[J];D3(this,Q,J,X)}else this._autoPong=X.autoPong,this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(Q){if(!O3.includes(Q))return;if(this._binaryType=Q,this._receiver)this._receiver._binaryType=Q}get bufferedAmount(){if(!this._socket)return this._bufferedAmount;return this._socket._writableState.length+this._sender._bufferedBytes}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(Q,J,X){let Y=new LL({allowSynchronousEvents:X.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:X.maxPayload,skipUTF8Validation:X.skipUTF8Validation}),$=new CL(Q,this._extensions,X.generateMask);if(this._receiver=Y,this._sender=$,this._socket=Q,Y[j0]=this,$[j0]=this,Q[j0]=this,Y.on("conclude",yL),Y.on("drain",gL),Y.on("error",fL),Y.on("message",kL),Y.on("ping",bL),Y.on("pong",mL),$.onerror=uL,Q.setTimeout)Q.setTimeout(0);if(Q.setNoDelay)Q.setNoDelay();if(J.length>0)Q.unshift(J);Q.on("close",P3),Q.on("data",UJ),Q.on("end",w3),Q.on("error",E3),this._readyState=l.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=l.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}if(this._extensions[z8.extensionName])this._extensions[z8.extensionName].cleanup();this._receiver.removeAllListeners(),this._readyState=l.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(Q,J){if(this.readyState===l.CLOSED)return;if(this.readyState===l.CONNECTING){m0(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===l.CLOSING){if(this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted))this._socket.end();return}this._readyState=l.CLOSING,this._sender.close(Q,J,!this._isServer,(X)=>{if(X)return;if(this._closeFrameSent=!0,this._closeFrameReceived||this._receiver._writableState.errorEmitted)this._socket.end()}),C3(this)}pause(){if(this.readyState===l.CONNECTING||this.readyState===l.CLOSED)return;this._paused=!0,this._socket.pause()}ping(Q,J,X){if(this.readyState===l.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof Q==="function")X=Q,Q=J=void 0;else if(typeof J==="function")X=J,J=void 0;if(typeof Q==="number")Q=Q.toString();if(this.readyState!==l.OPEN){o5(this,Q,X);return}if(J===void 0)J=!this._isServer;this._sender.ping(Q||VJ,J,X)}pong(Q,J,X){if(this.readyState===l.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof Q==="function")X=Q,Q=J=void 0;else if(typeof J==="function")X=J,J=void 0;if(typeof Q==="number")Q=Q.toString();if(this.readyState!==l.OPEN){o5(this,Q,X);return}if(J===void 0)J=!this._isServer;this._sender.pong(Q||VJ,J,X)}resume(){if(this.readyState===l.CONNECTING||this.readyState===l.CLOSED)return;if(this._paused=!1,!this._receiver._writableState.needDrain)this._socket.resume()}send(Q,J,X){if(this.readyState===l.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof J==="function")X=J,J={};if(typeof Q==="number")Q=Q.toString();if(this.readyState!==l.OPEN){o5(this,Q,X);return}let Y={binary:typeof Q!=="string",mask:!this._isServer,compress:!0,fin:!0,...J};if(!this._extensions[z8.extensionName])Y.compress=!1;this._sender.send(Q||VJ,Y,X)}terminate(){if(this.readyState===l.CLOSED)return;if(this.readyState===l.CONNECTING){m0(this,this._req,"WebSocket was closed before the connection was established");return}if(this._socket)this._readyState=l.CLOSING,this._socket.destroy()}}Object.defineProperty(l,"CONNECTING",{enumerable:!0,value:d1.indexOf("CONNECTING")});Object.defineProperty(l.prototype,"CONNECTING",{enumerable:!0,value:d1.indexOf("CONNECTING")});Object.defineProperty(l,"OPEN",{enumerable:!0,value:d1.indexOf("OPEN")});Object.defineProperty(l.prototype,"OPEN",{enumerable:!0,value:d1.indexOf("OPEN")});Object.defineProperty(l,"CLOSING",{enumerable:!0,value:d1.indexOf("CLOSING")});Object.defineProperty(l.prototype,"CLOSING",{enumerable:!0,value:d1.indexOf("CLOSING")});Object.defineProperty(l,"CLOSED",{enumerable:!0,value:d1.indexOf("CLOSED")});Object.defineProperty(l.prototype,"CLOSED",{enumerable:!0,value:d1.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach((Q)=>{Object.defineProperty(l.prototype,Q,{enumerable:!0})});["open","error","close","message"].forEach((Q)=>{Object.defineProperty(l.prototype,`on${Q}`,{enumerable:!0,get(){for(let J of this.listeners(Q))if(J[n5])return J[EL];return null},set(J){for(let X of this.listeners(Q))if(X[n5]){this.removeListener(Q,X);break}if(typeof J!=="function")return;this.addEventListener(Q,J,{[n5]:!0})}})});l.prototype.addEventListener=TL;l.prototype.removeEventListener=IL;R3.exports=l;function D3(Q,J,X,Y){let $={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:i5[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...Y,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(Q._autoPong=$.autoPong,!i5.includes($.protocolVersion))throw new RangeError(`Unsupported protocol version: ${$.protocolVersion} (supported versions: ${i5.join(", ")})`);let G;if(J instanceof p5)G=J;else try{G=new p5(J)}catch(B){throw new SyntaxError(`Invalid URL: ${J}`)}if(G.protocol==="http:")G.protocol="ws:";else if(G.protocol==="https:")G.protocol="wss:";Q._url=G.href;let H=G.protocol==="wss:",q=G.protocol==="ws+unix:",K;if(G.protocol!=="ws:"&&!H&&!q)K=`The URL's protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"`;else if(q&&!G.pathname)K="The URL's pathname is empty";else if(G.hash)K="The URL contains a fragment identifier";if(K){let B=new SyntaxError(K);if(Q._redirects===0)throw B;else{MJ(Q,B);return}}let z=H?443:80,V=AL(16).toString("base64"),F=H?NL.request:jL.request,O=new Set,N;if($.createConnection=$.createConnection||(H?vL:hL),$.defaultPort=$.defaultPort||z,$.port=G.port||z,$.host=G.hostname.startsWith("[")?G.hostname.slice(1,-1):G.hostname,$.headers={...$.headers,"Sec-WebSocket-Version":$.protocolVersion,"Sec-WebSocket-Key":V,Connection:"Upgrade",Upgrade:"websocket"},$.path=G.pathname+G.search,$.timeout=$.handshakeTimeout,$.perMessageDeflate)N=new z8($.perMessageDeflate!==!0?$.perMessageDeflate:{},!1,$.maxPayload),$.headers["Sec-WebSocket-Extensions"]=ZL({[z8.extensionName]:N.offer()});if(X.length){for(let B of X){if(typeof B!=="string"||!xL.test(B)||O.has(B))throw new SyntaxError("An invalid or duplicated subprotocol was specified");O.add(B)}$.headers["Sec-WebSocket-Protocol"]=X.join(",")}if($.origin)if($.protocolVersion<13)$.headers["Sec-WebSocket-Origin"]=$.origin;else $.headers.Origin=$.origin;if(G.username||G.password)$.auth=`${G.username}:${G.password}`;if(q){let B=$.path.split(":");$.socketPath=B[0],$.path=B[1]}let A;if($.followRedirects){if(Q._redirects===0){Q._originalIpc=q,Q._originalSecure=H,Q._originalHostOrSocketPath=q?$.socketPath:G.host;let B=Y&&Y.headers;if(Y={...Y,headers:{}},B)for(let[L,C]of Object.entries(B))Y.headers[L.toLowerCase()]=C}else if(Q.listenerCount("redirect")===0){let B=q?Q._originalIpc?$.socketPath===Q._originalHostOrSocketPath:!1:Q._originalIpc?!1:G.host===Q._originalHostOrSocketPath;if(!B||Q._originalSecure&&!H){if(delete $.headers.authorization,delete $.headers.cookie,!B)delete $.headers.host;$.auth=void 0}}if($.auth&&!Y.headers.authorization)Y.headers.authorization="Basic "+Buffer.from($.auth).toString("base64");if(A=Q._req=F($),Q._redirects)Q.emit("redirect",Q.url,A)}else A=Q._req=F($);if($.timeout)A.on("timeout",()=>{m0(Q,A,"Opening handshake has timed out")});if(A.on("error",(B)=>{if(A===null||A[A3])return;A=Q._req=null,MJ(Q,B)}),A.on("response",(B)=>{let L=B.headers.location,C=B.statusCode;if(L&&$.followRedirects&&C>=300&&C<400){if(++Q._redirects>$.maxRedirects){m0(Q,A,"Maximum redirects exceeded");return}A.abort();let P;try{P=new p5(L,J)}catch(_){let x=new SyntaxError(`Invalid URL: ${L}`);MJ(Q,x);return}D3(Q,P,X,Y)}else if(!Q.emit("unexpected-response",A,B))m0(Q,A,`Unexpected server response: ${B.statusCode}`)}),A.on("upgrade",(B,L,C)=>{if(Q.emit("upgrade",B),Q.readyState!==l.CONNECTING)return;A=Q._req=null;let P=B.headers.upgrade;if(P===void 0||P.toLowerCase()!=="websocket"){m0(Q,L,"Invalid Upgrade header");return}let _=DL("sha1").update(V+wL).digest("base64");if(B.headers["sec-websocket-accept"]!==_){m0(Q,L,"Invalid Sec-WebSocket-Accept header");return}let x=B.headers["sec-websocket-protocol"],i;if(x!==void 0){if(!O.size)i="Server sent a subprotocol but none was requested";else if(!O.has(x))i="Server sent an invalid subprotocol"}else if(O.size)i="Server sent no subprotocol";if(i){m0(Q,L,i);return}if(x)Q._protocol=x;let J0=B.headers["sec-websocket-extensions"];if(J0!==void 0){if(!N){m0(Q,L,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let X0;try{X0=SL(J0)}catch(t){m0(Q,L,"Invalid Sec-WebSocket-Extensions header");return}let z0=Object.keys(X0);if(z0.length!==1||z0[0]!==z8.extensionName){m0(Q,L,"Server indicated an extension that was not requested");return}try{N.accept(X0[z8.extensionName])}catch(t){m0(Q,L,"Invalid Sec-WebSocket-Extensions header");return}Q._extensions[z8.extensionName]=N}Q.setSocket(L,C,{allowSynchronousEvents:$.allowSynchronousEvents,generateMask:$.generateMask,maxPayload:$.maxPayload,skipUTF8Validation:$.skipUTF8Validation})}),$.finishRequest)$.finishRequest(A,Q);else A.end()}function MJ(Q,J){Q._readyState=l.CLOSING,Q._errorEmitted=!0,Q.emit("error",J),Q.emitClose()}function hL(Q){return Q.path=Q.socketPath,j3.connect(Q)}function vL(Q){if(Q.path=void 0,!Q.servername&&Q.servername!=="")Q.servername=j3.isIP(Q.host)?"":Q.host;return BL.connect(Q)}function m0(Q,J,X){Q._readyState=l.CLOSING;let Y=new Error(X);if(Error.captureStackTrace(Y,m0),J.setHeader){if(J[A3]=!0,J.abort(),J.socket&&!J.socket.destroyed)J.socket.destroy();process.nextTick(MJ,Q,Y)}else J.destroy(Y),J.once("error",Q.emit.bind(Q,"error")),J.once("close",Q.emitClose.bind(Q))}function o5(Q,J,X){if(J){let Y=PL(J)?J.size:_L(J).length;if(Q._socket)Q._sender._bufferedBytes+=Y;else Q._bufferedAmount+=Y}if(X){let Y=new Error(`WebSocket is not open: readyState ${Q.readyState} (${d1[Q.readyState]})`);process.nextTick(X,Y)}}function yL(Q,J){let X=this[j0];if(X._closeFrameReceived=!0,X._closeMessage=J,X._closeCode=Q,X._socket[j0]===void 0)return;if(X._socket.removeListener("data",UJ),process.nextTick(L3,X._socket),Q===1005)X.close();else X.close(Q,J)}function gL(){let Q=this[j0];if(!Q.isPaused)Q._socket.resume()}function fL(Q){let J=this[j0];if(J._socket[j0]!==void 0)J._socket.removeListener("data",UJ),process.nextTick(L3,J._socket),J.close(Q[RL]);if(!J._errorEmitted)J._errorEmitted=!0,J.emit("error",Q)}function N3(){this[j0].emitClose()}function kL(Q,J){this[j0].emit("message",Q,J)}function bL(Q){let J=this[j0];if(J._autoPong)J.pong(Q,!this._isServer,B3);J.emit("ping",Q)}function mL(Q){this[j0].emit("pong",Q)}function L3(Q){Q.resume()}function uL(Q){let J=this[j0];if(J.readyState===l.CLOSED)return;if(J.readyState===l.OPEN)J._readyState=l.CLOSING,C3(J);if(this._socket.end(),!J._errorEmitted)J._errorEmitted=!0,J.emit("error",Q)}function C3(Q){Q._closeTimer=setTimeout(Q._socket.destroy.bind(Q._socket),30000)}function P3(){let Q=this[j0];this.removeListener("close",P3),this.removeListener("data",UJ),this.removeListener("end",w3),Q._readyState=l.CLOSING;let J;if(!this._readableState.endEmitted&&!Q._closeFrameReceived&&!Q._receiver._writableState.errorEmitted&&(J=Q._socket.read())!==null)Q._receiver.write(J);if(Q._receiver.end(),this[j0]=void 0,clearTimeout(Q._closeTimer),Q._receiver._writableState.finished||Q._receiver._writableState.errorEmitted)Q.emitClose();else Q._receiver.on("error",N3),Q._receiver.on("finish",N3)}function UJ(Q){if(!this[j0]._receiver.write(Q))this.pause()}function w3(){let Q=this[j0];Q._readyState=l.CLOSING,Q._receiver.end(),this.end()}function E3(){let Q=this[j0];if(this.removeListener("error",E3),this.on("error",B3),Q)Q._readyState=l.CLOSING,this.destroy()}});var S3=D((II,Z3)=>{var TI=FJ(),{Duplex:lL}=y("stream");function T3(Q){Q.emit("close")}function cL(){if(!this.destroyed&&this._writableState.finished)this.destroy()}function I3(Q){if(this.removeListener("error",I3),this.destroy(),this.listenerCount("error")===0)this.emit("error",Q)}function dL(Q,J){let X=!0,Y=new lL({...J,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return Q.on("message",function $(G,H){let q=!H&&Y._readableState.objectMode?G.toString():G;if(!Y.push(q))Q.pause()}),Q.once("error",function $(G){if(Y.destroyed)return;X=!1,Y.destroy(G)}),Q.once("close",function $(){if(Y.destroyed)return;Y.push(null)}),Y._destroy=function($,G){if(Q.readyState===Q.CLOSED){G($),process.nextTick(T3,Y);return}let H=!1;if(Q.once("error",function q(K){H=!0,G(K)}),Q.once("close",function q(){if(!H)G($);process.nextTick(T3,Y)}),X)Q.terminate()},Y._final=function($){if(Q.readyState===Q.CONNECTING){Q.once("open",function G(){Y._final($)});return}if(Q._socket===null)return;if(Q._socket._writableState.finished){if($(),Y._readableState.endEmitted)Y.destroy()}else Q._socket.once("finish",function G(){$()}),Q.close()},Y._read=function(){if(Q.isPaused)Q.resume()},Y._write=function($,G,H){if(Q.readyState===Q.CONNECTING){Q.once("open",function q(){Y._write($,G,H)});return}Q.send($,H)},Y.on("end",cL),Y.on("error",I3),Y}Z3.exports=dL});var x3=D((ZI,_3)=>{var{tokenChars:pL}=ZQ();function nL(Q){let J=new Set,X=-1,Y=-1,$=0;for($;$<Q.length;$++){let H=Q.charCodeAt($);if(Y===-1&&pL[H]===1){if(X===-1)X=$}else if($!==0&&(H===32||H===9)){if(Y===-1&&X!==-1)Y=$}else if(H===44){if(X===-1)throw new SyntaxError(`Unexpected character at index ${$}`);if(Y===-1)Y=$;let q=Q.slice(X,Y);if(J.has(q))throw new SyntaxError(`The "${q}" subprotocol is duplicated`);J.add(q),X=Y=-1}else throw new SyntaxError(`Unexpected character at index ${$}`)}if(X===-1||Y!==-1)throw new SyntaxError("Unexpected end of input");let G=Q.slice(X,$);if(J.has(G))throw new SyntaxError(`The "${G}" subprotocol is duplicated`);return J.add(G),J}_3.exports={parse:nL}});var f3=D((_I,g3)=>{var iL=y("events"),OJ=y("http"),{Duplex:SI}=y("stream"),{createHash:oL}=y("crypto"),h3=d5(),o8=g4(),rL=x3(),aL=FJ(),{GUID:sL,kWebSocket:tL}=l1(),eL=/^[+/0-9A-Za-z]{22}==$/;class y3 extends iL{constructor(Q,J){super();if(Q={allowSynchronousEvents:!0,autoPong:!0,maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:aL,...Q},Q.port==null&&!Q.server&&!Q.noServer||Q.port!=null&&(Q.server||Q.noServer)||Q.server&&Q.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(Q.port!=null)this._server=OJ.createServer((X,Y)=>{let $=OJ.STATUS_CODES[426];Y.writeHead(426,{"Content-Length":$.length,"Content-Type":"text/plain"}),Y.end($)}),this._server.listen(Q.port,Q.host,Q.backlog,J);else if(Q.server)this._server=Q.server;if(this._server){let X=this.emit.bind(this,"connection");this._removeListeners=QC(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(Y,$,G)=>{this.handleUpgrade(Y,$,G,X)}})}if(Q.perMessageDeflate===!0)Q.perMessageDeflate={};if(Q.clientTracking)this.clients=new Set,this._shouldEmitClose=!1;this.options=Q,this._state=0}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');if(!this._server)return null;return this._server.address()}close(Q){if(this._state===2){if(Q)this.once("close",()=>{Q(new Error("The server is not running"))});process.nextTick(m4,this);return}if(Q)this.once("close",Q);if(this._state===1)return;if(this._state=1,this.options.noServer||this.options.server){if(this._server)this._removeListeners(),this._removeListeners=this._server=null;if(this.clients)if(!this.clients.size)process.nextTick(m4,this);else this._shouldEmitClose=!0;else process.nextTick(m4,this)}else{let J=this._server;this._removeListeners(),this._removeListeners=this._server=null,J.close(()=>{m4(this)})}}shouldHandle(Q){if(this.options.path){let J=Q.url.indexOf("?");if((J!==-1?Q.url.slice(0,J):Q.url)!==this.options.path)return!1}return!0}handleUpgrade(Q,J,X,Y){J.on("error",v3);let $=Q.headers["sec-websocket-key"],G=Q.headers.upgrade,H=+Q.headers["sec-websocket-version"];if(Q.method!=="GET"){r8(this,Q,J,405,"Invalid HTTP method");return}if(G===void 0||G.toLowerCase()!=="websocket"){r8(this,Q,J,400,"Invalid Upgrade header");return}if($===void 0||!eL.test($)){r8(this,Q,J,400,"Missing or invalid Sec-WebSocket-Key header");return}if(H!==8&&H!==13){r8(this,Q,J,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(Q)){u4(J,400);return}let q=Q.headers["sec-websocket-protocol"],K=new Set;if(q!==void 0)try{K=rL.parse(q)}catch(F){r8(this,Q,J,400,"Invalid Sec-WebSocket-Protocol header");return}let z=Q.headers["sec-websocket-extensions"],V={};if(this.options.perMessageDeflate&&z!==void 0){let F=new o8(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let O=h3.parse(z);if(O[o8.extensionName])F.accept(O[o8.extensionName]),V[o8.extensionName]=F}catch(O){r8(this,Q,J,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let F={origin:Q.headers[`${H===8?"sec-websocket-origin":"origin"}`],secure:!!(Q.socket.authorized||Q.socket.encrypted),req:Q};if(this.options.verifyClient.length===2){this.options.verifyClient(F,(O,N,A,B)=>{if(!O)return u4(J,N||401,A,B);this.completeUpgrade(V,$,K,Q,J,X,Y)});return}if(!this.options.verifyClient(F))return u4(J,401)}this.completeUpgrade(V,$,K,Q,J,X,Y)}completeUpgrade(Q,J,X,Y,$,G,H){if(!$.readable||!$.writable)return $.destroy();if($[tL])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return u4($,503);let K=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${oL("sha1").update(J+sL).digest("base64")}`],z=new this.options.WebSocket(null,void 0,this.options);if(X.size){let V=this.options.handleProtocols?this.options.handleProtocols(X,Y):X.values().next().value;if(V)K.push(`Sec-WebSocket-Protocol: ${V}`),z._protocol=V}if(Q[o8.extensionName]){let V=Q[o8.extensionName].params,F=h3.format({[o8.extensionName]:[V]});K.push(`Sec-WebSocket-Extensions: ${F}`),z._extensions=Q}if(this.emit("headers",K,Y),$.write(K.concat(`\r
`).join(`\r
`)),$.removeListener("error",v3),z.setSocket($,G,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients)this.clients.add(z),z.on("close",()=>{if(this.clients.delete(z),this._shouldEmitClose&&!this.clients.size)process.nextTick(m4,this)});H(z,Y)}}g3.exports=y3;function QC(Q,J){for(let X of Object.keys(J))Q.on(X,J[X]);return function X(){for(let Y of Object.keys(J))Q.removeListener(Y,J[Y])}}function m4(Q){Q._state=2,Q.emit("close")}function v3(){this.destroy()}function u4(Q,J,X,Y){X=X||OJ.STATUS_CODES[J],Y={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(X),...Y},Q.once("finish",Q.destroy),Q.end(`HTTP/1.1 ${J} ${OJ.STATUS_CODES[J]}\r
`+Object.keys(Y).map(($)=>`${$}: ${Y[$]}`).join(`\r
`)+`\r
\r
`+X)}function r8(Q,J,X,Y,$){if(Q.listenerCount("wsClientError")){let G=new Error($);Error.captureStackTrace(G,r8),Q.emit("wsClientError",G,X,J)}else u4(X,Y,$)}});var b3=D((xI,k3)=>{var p1=FJ();p1.createWebSocketStream=S3();p1.Server=f3();p1.Receiver=m5();p1.Sender=l5();p1.WebSocket=p1;p1.WebSocketServer=p1.Server;k3.exports=p1});var NJ=D((c3)=>{Object.defineProperty(c3,"__esModule",{value:!0});c3.BufferedDuplex=void 0;c3.writev=u3;var JC=X8(),m3=y("buffer");function u3(Q,J){let X=new Array(Q.length);for(let Y=0;Y<Q.length;Y++)if(typeof Q[Y].chunk==="string")X[Y]=m3.Buffer.from(Q[Y].chunk,"utf8");else X[Y]=Q[Y].chunk;this._write(m3.Buffer.concat(X),"binary",J)}class l3 extends JC.Duplex{constructor(Q,J,X){super({objectMode:!0});if(this.proxy=J,this.socket=X,this.writeQueue=[],!Q.objectMode)this._writev=u3.bind(this);this.isSocketOpen=!1,this.proxy.on("data",(Y)=>{if(!this.destroyed&&this.readable)this.push(Y)})}_read(Q){this.proxy.read(Q)}_write(Q,J,X){if(!this.isSocketOpen)this.writeQueue.push({chunk:Q,encoding:J,cb:X});else this.writeToProxy(Q,J,X)}_final(Q){this.writeQueue=[],this.proxy.end(Q)}_destroy(Q,J){this.writeQueue=[],this.proxy.destroy(),J(Q)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(Q,J,X){if(this.proxy.write(Q,J)===!1)this.proxy.once("drain",X);else X()}processWriteQueue(){while(this.writeQueue.length>0){let{chunk:Q,encoding:J,cb:X}=this.writeQueue.shift();this.writeToProxy(Q,J,X)}}}c3.BufferedDuplex=l3});var l4=D((M8)=>{var a5=M8&&M8.__importDefault||function(Q){return Q&&Q.__esModule?Q:{default:Q}};Object.defineProperty(M8,"__esModule",{value:!0});M8.streamBuilder=M8.browserStreamBuilder=void 0;var jJ=y("buffer"),p3=a5(b3()),YC=a5(q1()),$C=X8(),GC=a5(Z4()),r5=NJ(),V8=YC.default("mqttjs:ws"),HC=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function n3(Q,J){let X=`${Q.protocol}://${Q.hostname}:${Q.port}${Q.path}`;if(typeof Q.transformWsUrl==="function")X=Q.transformWsUrl(X,Q,J);return X}function i3(Q){let J=Q;if(!Q.port)if(Q.protocol==="wss")J.port=443;else J.port=80;if(!Q.path)J.path="/";if(!Q.wsOptions)J.wsOptions={};if(!GC.default&&!Q.forceNativeWebSocket&&Q.protocol==="wss")HC.forEach((X)=>{if(Object.prototype.hasOwnProperty.call(Q,X)&&!Object.prototype.hasOwnProperty.call(Q.wsOptions,X))J.wsOptions[X]=Q[X]});return J}function qC(Q){let J=i3(Q);if(!J.hostname)J.hostname=J.host;if(!J.hostname){if(typeof document==="undefined")throw new Error("Could not determine host. Specify host manually.");let X=new URL(document.URL);if(J.hostname=X.hostname,!J.port)J.port=Number(X.port)}if(J.objectMode===void 0)J.objectMode=!(J.binary===!0||J.binary===void 0);return J}function KC(Q,J,X){V8("createWebSocket"),V8(`protocol: ${X.protocolId} ${X.protocolVersion}`);let Y=X.protocolId==="MQIsdp"&&X.protocolVersion===3?"mqttv3.1":"mqtt";V8(`creating new Websocket for url: ${J} and protocol: ${Y}`);let $;if(X.createWebsocket)$=X.createWebsocket(J,[Y],X);else $=new p3.default(J,[Y],X.wsOptions);return $}function WC(Q,J){let X=J.protocolId==="MQIsdp"&&J.protocolVersion===3?"mqttv3.1":"mqtt",Y=n3(J,Q),$;if(J.createWebsocket)$=J.createWebsocket(Y,[X],J);else $=new WebSocket(Y,[X]);return $.binaryType="arraybuffer",$}var zC=(Q,J)=>{V8("streamBuilder");let X=i3(J);X.hostname=X.hostname||X.host||"localhost";let Y=n3(X,Q),$=KC(Q,Y,X),G=p3.default.createWebSocketStream($,X.wsOptions);return G.url=Y,$.on("close",()=>{G.destroy()}),G};M8.streamBuilder=zC;var VC=(Q,J)=>{V8("browserStreamBuilder");let X,$=qC(J).browserBufferSize||524288,G=J.browserBufferTimeout||1000,H=!J.objectMode,q=WC(Q,J),K=V(J,B,L);if(!J.objectMode)K._writev=r5.writev.bind(K);K.on("close",()=>{q.close()});let z=typeof q.addEventListener!=="undefined";if(q.readyState===q.OPEN)X=K,X.socket=q;else if(X=new r5.BufferedDuplex(J,K,q),z)q.addEventListener("open",F);else q.onopen=F;if(z)q.addEventListener("close",O),q.addEventListener("error",N),q.addEventListener("message",A);else q.onclose=O,q.onerror=N,q.onmessage=A;function V(C,P,_){let x=new $C.Transform({objectMode:C.objectMode});return x._write=P,x._flush=_,x}function F(){if(V8("WebSocket onOpen"),X instanceof r5.BufferedDuplex)X.socketReady()}function O(C){V8("WebSocket onClose",C),X.end(),X.destroy()}function N(C){V8("WebSocket onError",C);let P=new Error("WebSocket error");P.event=C,X.destroy(P)}async function A(C){if(!K||K.destroyed||!K.readable)return;let{data:P}=C;if(P instanceof ArrayBuffer)P=jJ.Buffer.from(P);else if(P instanceof Blob)P=jJ.Buffer.from(await new Response(P).arrayBuffer());else P=jJ.Buffer.from(P,"utf8");K.push(P)}function B(C,P,_){if(q.bufferedAmount>$){setTimeout(B,G,C,P,_);return}if(H&&typeof C==="string")C=jJ.Buffer.from(C,"utf8");try{q.send(C)}catch(x){return _(x)}_()}function L(C){q.close(),C()}return X};M8.browserStreamBuilder=VC});var t3=D((s3)=>{Object.defineProperty(s3,"__esModule",{value:!0});var o3=y("buffer"),a8={INVALID_ENCODING:"Invalid encoding provided. Please specify a valid encoding the internal Node.js Buffer supports.",INVALID_SMARTBUFFER_SIZE:"Invalid size provided. Size must be a valid integer greater than zero.",INVALID_SMARTBUFFER_BUFFER:"Invalid Buffer provided in SmartBufferOptions.",INVALID_SMARTBUFFER_OBJECT:"Invalid SmartBufferOptions object supplied to SmartBuffer constructor or factory methods.",INVALID_OFFSET:"An invalid offset value was provided.",INVALID_OFFSET_NON_NUMBER:"An invalid offset value was provided. A numeric value is required.",INVALID_LENGTH:"An invalid length value was provided.",INVALID_LENGTH_NON_NUMBER:"An invalid length value was provived. A numeric value is required.",INVALID_TARGET_OFFSET:"Target offset is beyond the bounds of the internal SmartBuffer data.",INVALID_TARGET_LENGTH:"Specified length value moves cursor beyong the bounds of the internal SmartBuffer data.",INVALID_READ_BEYOND_BOUNDS:"Attempted to read beyond the bounds of the managed data.",INVALID_WRITE_BEYOND_BOUNDS:"Attempted to write beyond the bounds of the managed data."};s3.ERRORS=a8;function MC(Q){if(!o3.Buffer.isEncoding(Q))throw new Error(a8.INVALID_ENCODING)}s3.checkEncoding=MC;function r3(Q){return typeof Q==="number"&&isFinite(Q)&&NC(Q)}s3.isFiniteInteger=r3;function a3(Q,J){if(typeof Q==="number"){if(!r3(Q)||Q<0)throw new Error(J?a8.INVALID_OFFSET:a8.INVALID_LENGTH)}else throw new Error(J?a8.INVALID_OFFSET_NON_NUMBER:a8.INVALID_LENGTH_NON_NUMBER)}function UC(Q){a3(Q,!1)}s3.checkLengthValue=UC;function FC(Q){a3(Q,!0)}s3.checkOffsetValue=FC;function OC(Q,J){if(Q<0||Q>J.length)throw new Error(a8.INVALID_TARGET_OFFSET)}s3.checkTargetOffset=OC;function NC(Q){return typeof Q==="number"&&isFinite(Q)&&Math.floor(Q)===Q}function jC(Q){if(typeof BigInt==="undefined")throw new Error("Platform does not support JS BigInt type.");if(typeof o3.Buffer.prototype[Q]==="undefined")throw new Error(`Platform does not support Buffer.prototype.${Q}.`)}s3.bigIntAndBufferInt64Check=jC});var JW=D((QW)=>{Object.defineProperty(QW,"__esModule",{value:!0});var n=t3(),e3=4096,EC="utf8";class s5{constructor(Q){if(this.length=0,this._encoding=EC,this._writeOffset=0,this._readOffset=0,s5.isSmartBufferOptions(Q)){if(Q.encoding)n.checkEncoding(Q.encoding),this._encoding=Q.encoding;if(Q.size)if(n.isFiniteInteger(Q.size)&&Q.size>0)this._buff=Buffer.allocUnsafe(Q.size);else throw new Error(n.ERRORS.INVALID_SMARTBUFFER_SIZE);else if(Q.buff)if(Buffer.isBuffer(Q.buff))this._buff=Q.buff,this.length=Q.buff.length;else throw new Error(n.ERRORS.INVALID_SMARTBUFFER_BUFFER);else this._buff=Buffer.allocUnsafe(e3)}else{if(typeof Q!=="undefined")throw new Error(n.ERRORS.INVALID_SMARTBUFFER_OBJECT);this._buff=Buffer.allocUnsafe(e3)}}static fromSize(Q,J){return new this({size:Q,encoding:J})}static fromBuffer(Q,J){return new this({buff:Q,encoding:J})}static fromOptions(Q){return new this(Q)}static isSmartBufferOptions(Q){let J=Q;return J&&(J.encoding!==void 0||J.size!==void 0||J.buff!==void 0)}readInt8(Q){return this._readNumberValue(Buffer.prototype.readInt8,1,Q)}readInt16BE(Q){return this._readNumberValue(Buffer.prototype.readInt16BE,2,Q)}readInt16LE(Q){return this._readNumberValue(Buffer.prototype.readInt16LE,2,Q)}readInt32BE(Q){return this._readNumberValue(Buffer.prototype.readInt32BE,4,Q)}readInt32LE(Q){return this._readNumberValue(Buffer.prototype.readInt32LE,4,Q)}readBigInt64BE(Q){return n.bigIntAndBufferInt64Check("readBigInt64BE"),this._readNumberValue(Buffer.prototype.readBigInt64BE,8,Q)}readBigInt64LE(Q){return n.bigIntAndBufferInt64Check("readBigInt64LE"),this._readNumberValue(Buffer.prototype.readBigInt64LE,8,Q)}writeInt8(Q,J){return this._writeNumberValue(Buffer.prototype.writeInt8,1,Q,J),this}insertInt8(Q,J){return this._insertNumberValue(Buffer.prototype.writeInt8,1,Q,J)}writeInt16BE(Q,J){return this._writeNumberValue(Buffer.prototype.writeInt16BE,2,Q,J)}insertInt16BE(Q,J){return this._insertNumberValue(Buffer.prototype.writeInt16BE,2,Q,J)}writeInt16LE(Q,J){return this._writeNumberValue(Buffer.prototype.writeInt16LE,2,Q,J)}insertInt16LE(Q,J){return this._insertNumberValue(Buffer.prototype.writeInt16LE,2,Q,J)}writeInt32BE(Q,J){return this._writeNumberValue(Buffer.prototype.writeInt32BE,4,Q,J)}insertInt32BE(Q,J){return this._insertNumberValue(Buffer.prototype.writeInt32BE,4,Q,J)}writeInt32LE(Q,J){return this._writeNumberValue(Buffer.prototype.writeInt32LE,4,Q,J)}insertInt32LE(Q,J){return this._insertNumberValue(Buffer.prototype.writeInt32LE,4,Q,J)}writeBigInt64BE(Q,J){return n.bigIntAndBufferInt64Check("writeBigInt64BE"),this._writeNumberValue(Buffer.prototype.writeBigInt64BE,8,Q,J)}insertBigInt64BE(Q,J){return n.bigIntAndBufferInt64Check("writeBigInt64BE"),this._insertNumberValue(Buffer.prototype.writeBigInt64BE,8,Q,J)}writeBigInt64LE(Q,J){return n.bigIntAndBufferInt64Check("writeBigInt64LE"),this._writeNumberValue(Buffer.prototype.writeBigInt64LE,8,Q,J)}insertBigInt64LE(Q,J){return n.bigIntAndBufferInt64Check("writeBigInt64LE"),this._insertNumberValue(Buffer.prototype.writeBigInt64LE,8,Q,J)}readUInt8(Q){return this._readNumberValue(Buffer.prototype.readUInt8,1,Q)}readUInt16BE(Q){return this._readNumberValue(Buffer.prototype.readUInt16BE,2,Q)}readUInt16LE(Q){return this._readNumberValue(Buffer.prototype.readUInt16LE,2,Q)}readUInt32BE(Q){return this._readNumberValue(Buffer.prototype.readUInt32BE,4,Q)}readUInt32LE(Q){return this._readNumberValue(Buffer.prototype.readUInt32LE,4,Q)}readBigUInt64BE(Q){return n.bigIntAndBufferInt64Check("readBigUInt64BE"),this._readNumberValue(Buffer.prototype.readBigUInt64BE,8,Q)}readBigUInt64LE(Q){return n.bigIntAndBufferInt64Check("readBigUInt64LE"),this._readNumberValue(Buffer.prototype.readBigUInt64LE,8,Q)}writeUInt8(Q,J){return this._writeNumberValue(Buffer.prototype.writeUInt8,1,Q,J)}insertUInt8(Q,J){return this._insertNumberValue(Buffer.prototype.writeUInt8,1,Q,J)}writeUInt16BE(Q,J){return this._writeNumberValue(Buffer.prototype.writeUInt16BE,2,Q,J)}insertUInt16BE(Q,J){return this._insertNumberValue(Buffer.prototype.writeUInt16BE,2,Q,J)}writeUInt16LE(Q,J){return this._writeNumberValue(Buffer.prototype.writeUInt16LE,2,Q,J)}insertUInt16LE(Q,J){return this._insertNumberValue(Buffer.prototype.writeUInt16LE,2,Q,J)}writeUInt32BE(Q,J){return this._writeNumberValue(Buffer.prototype.writeUInt32BE,4,Q,J)}insertUInt32BE(Q,J){return this._insertNumberValue(Buffer.prototype.writeUInt32BE,4,Q,J)}writeUInt32LE(Q,J){return this._writeNumberValue(Buffer.prototype.writeUInt32LE,4,Q,J)}insertUInt32LE(Q,J){return this._insertNumberValue(Buffer.prototype.writeUInt32LE,4,Q,J)}writeBigUInt64BE(Q,J){return n.bigIntAndBufferInt64Check("writeBigUInt64BE"),this._writeNumberValue(Buffer.prototype.writeBigUInt64BE,8,Q,J)}insertBigUInt64BE(Q,J){return n.bigIntAndBufferInt64Check("writeBigUInt64BE"),this._insertNumberValue(Buffer.prototype.writeBigUInt64BE,8,Q,J)}writeBigUInt64LE(Q,J){return n.bigIntAndBufferInt64Check("writeBigUInt64LE"),this._writeNumberValue(Buffer.prototype.writeBigUInt64LE,8,Q,J)}insertBigUInt64LE(Q,J){return n.bigIntAndBufferInt64Check("writeBigUInt64LE"),this._insertNumberValue(Buffer.prototype.writeBigUInt64LE,8,Q,J)}readFloatBE(Q){return this._readNumberValue(Buffer.prototype.readFloatBE,4,Q)}readFloatLE(Q){return this._readNumberValue(Buffer.prototype.readFloatLE,4,Q)}writeFloatBE(Q,J){return this._writeNumberValue(Buffer.prototype.writeFloatBE,4,Q,J)}insertFloatBE(Q,J){return this._insertNumberValue(Buffer.prototype.writeFloatBE,4,Q,J)}writeFloatLE(Q,J){return this._writeNumberValue(Buffer.prototype.writeFloatLE,4,Q,J)}insertFloatLE(Q,J){return this._insertNumberValue(Buffer.prototype.writeFloatLE,4,Q,J)}readDoubleBE(Q){return this._readNumberValue(Buffer.prototype.readDoubleBE,8,Q)}readDoubleLE(Q){return this._readNumberValue(Buffer.prototype.readDoubleLE,8,Q)}writeDoubleBE(Q,J){return this._writeNumberValue(Buffer.prototype.writeDoubleBE,8,Q,J)}insertDoubleBE(Q,J){return this._insertNumberValue(Buffer.prototype.writeDoubleBE,8,Q,J)}writeDoubleLE(Q,J){return this._writeNumberValue(Buffer.prototype.writeDoubleLE,8,Q,J)}insertDoubleLE(Q,J){return this._insertNumberValue(Buffer.prototype.writeDoubleLE,8,Q,J)}readString(Q,J){let X;if(typeof Q==="number")n.checkLengthValue(Q),X=Math.min(Q,this.length-this._readOffset);else J=Q,X=this.length-this._readOffset;if(typeof J!=="undefined")n.checkEncoding(J);let Y=this._buff.slice(this._readOffset,this._readOffset+X).toString(J||this._encoding);return this._readOffset+=X,Y}insertString(Q,J,X){return n.checkOffsetValue(J),this._handleString(Q,!0,J,X)}writeString(Q,J,X){return this._handleString(Q,!1,J,X)}readStringNT(Q){if(typeof Q!=="undefined")n.checkEncoding(Q);let J=this.length;for(let Y=this._readOffset;Y<this.length;Y++)if(this._buff[Y]===0){J=Y;break}let X=this._buff.slice(this._readOffset,J);return this._readOffset=J+1,X.toString(Q||this._encoding)}insertStringNT(Q,J,X){return n.checkOffsetValue(J),this.insertString(Q,J,X),this.insertUInt8(0,J+Q.length),this}writeStringNT(Q,J,X){return this.writeString(Q,J,X),this.writeUInt8(0,typeof J==="number"?J+Q.length:this.writeOffset),this}readBuffer(Q){if(typeof Q!=="undefined")n.checkLengthValue(Q);let J=typeof Q==="number"?Q:this.length,X=Math.min(this.length,this._readOffset+J),Y=this._buff.slice(this._readOffset,X);return this._readOffset=X,Y}insertBuffer(Q,J){return n.checkOffsetValue(J),this._handleBuffer(Q,!0,J)}writeBuffer(Q,J){return this._handleBuffer(Q,!1,J)}readBufferNT(){let Q=this.length;for(let X=this._readOffset;X<this.length;X++)if(this._buff[X]===0){Q=X;break}let J=this._buff.slice(this._readOffset,Q);return this._readOffset=Q+1,J}insertBufferNT(Q,J){return n.checkOffsetValue(J),this.insertBuffer(Q,J),this.insertUInt8(0,J+Q.length),this}writeBufferNT(Q,J){if(typeof J!=="undefined")n.checkOffsetValue(J);return this.writeBuffer(Q,J),this.writeUInt8(0,typeof J==="number"?J+Q.length:this._writeOffset),this}clear(){return this._writeOffset=0,this._readOffset=0,this.length=0,this}remaining(){return this.length-this._readOffset}get readOffset(){return this._readOffset}set readOffset(Q){n.checkOffsetValue(Q),n.checkTargetOffset(Q,this),this._readOffset=Q}get writeOffset(){return this._writeOffset}set writeOffset(Q){n.checkOffsetValue(Q),n.checkTargetOffset(Q,this),this._writeOffset=Q}get encoding(){return this._encoding}set encoding(Q){n.checkEncoding(Q),this._encoding=Q}get internalBuffer(){return this._buff}toBuffer(){return this._buff.slice(0,this.length)}toString(Q){let J=typeof Q==="string"?Q:this._encoding;return n.checkEncoding(J),this._buff.toString(J,0,this.length)}destroy(){return this.clear(),this}_handleString(Q,J,X,Y){let $=this._writeOffset,G=this._encoding;if(typeof X==="number")$=X;else if(typeof X==="string")n.checkEncoding(X),G=X;if(typeof Y==="string")n.checkEncoding(Y),G=Y;let H=Buffer.byteLength(Q,G);if(J)this.ensureInsertable(H,$);else this._ensureWriteable(H,$);if(this._buff.write(Q,$,H,G),J)this._writeOffset+=H;else if(typeof X==="number")this._writeOffset=Math.max(this._writeOffset,$+H);else this._writeOffset+=H;return this}_handleBuffer(Q,J,X){let Y=typeof X==="number"?X:this._writeOffset;if(J)this.ensureInsertable(Q.length,Y);else this._ensureWriteable(Q.length,Y);if(Q.copy(this._buff,Y),J)this._writeOffset+=Q.length;else if(typeof X==="number")this._writeOffset=Math.max(this._writeOffset,Y+Q.length);else this._writeOffset+=Q.length;return this}ensureReadable(Q,J){let X=this._readOffset;if(typeof J!=="undefined")n.checkOffsetValue(J),X=J;if(X<0||X+Q>this.length)throw new Error(n.ERRORS.INVALID_READ_BEYOND_BOUNDS)}ensureInsertable(Q,J){if(n.checkOffsetValue(J),this._ensureCapacity(this.length+Q),J<this.length)this._buff.copy(this._buff,J+Q,J,this._buff.length);if(J+Q>this.length)this.length=J+Q;else this.length+=Q}_ensureWriteable(Q,J){let X=typeof J==="number"?J:this._writeOffset;if(this._ensureCapacity(X+Q),X+Q>this.length)this.length=X+Q}_ensureCapacity(Q){let J=this._buff.length;if(Q>J){let X=this._buff,Y=J*3/2+1;if(Y<Q)Y=Q;this._buff=Buffer.allocUnsafe(Y),X.copy(this._buff,0,0,J)}}_readNumberValue(Q,J,X){this.ensureReadable(J,X);let Y=Q.call(this._buff,typeof X==="number"?X:this._readOffset);if(typeof X==="undefined")this._readOffset+=J;return Y}_insertNumberValue(Q,J,X,Y){return n.checkOffsetValue(Y),this.ensureInsertable(J,Y),Q.call(this._buff,X,Y),this._writeOffset+=J,this}_writeNumberValue(Q,J,X,Y){if(typeof Y==="number"){if(Y<0)throw new Error(n.ERRORS.INVALID_WRITE_BEYOND_BOUNDS);n.checkOffsetValue(Y)}let $=typeof Y==="number"?Y:this._writeOffset;if(this._ensureWriteable(J,$),Q.call(this._buff,X,$),typeof Y==="number")this._writeOffset=Math.max(this._writeOffset,$+J);else this._writeOffset+=J;return this}}QW.SmartBuffer=s5});var t5=D((KW)=>{Object.defineProperty(KW,"__esModule",{value:!0});KW.SOCKS5_NO_ACCEPTABLE_AUTH=KW.SOCKS5_CUSTOM_AUTH_END=KW.SOCKS5_CUSTOM_AUTH_START=KW.SOCKS_INCOMING_PACKET_SIZES=KW.SocksClientState=KW.Socks5Response=KW.Socks5HostType=KW.Socks5Auth=KW.Socks4Response=KW.SocksCommand=KW.ERRORS=KW.DEFAULT_TIMEOUT=void 0;var TC=30000;KW.DEFAULT_TIMEOUT=TC;var IC={InvalidSocksCommand:"An invalid SOCKS command was provided. Valid options are connect, bind, and associate.",InvalidSocksCommandForOperation:"An invalid SOCKS command was provided. Only a subset of commands are supported for this operation.",InvalidSocksCommandChain:"An invalid SOCKS command was provided. Chaining currently only supports the connect command.",InvalidSocksClientOptionsDestination:"An invalid destination host was provided.",InvalidSocksClientOptionsExistingSocket:"An invalid existing socket was provided. This should be an instance of stream.Duplex.",InvalidSocksClientOptionsProxy:"Invalid SOCKS proxy details were provided.",InvalidSocksClientOptionsTimeout:"An invalid timeout value was provided. Please enter a value above 0 (in ms).",InvalidSocksClientOptionsProxiesLength:"At least two socks proxies must be provided for chaining.",InvalidSocksClientOptionsCustomAuthRange:"Custom auth must be a value between 0x80 and 0xFE.",InvalidSocksClientOptionsCustomAuthOptions:"When a custom_auth_method is provided, custom_auth_request_handler, custom_auth_response_size, and custom_auth_response_handler must also be provided and valid.",NegotiationError:"Negotiation error",SocketClosed:"Socket closed",ProxyConnectionTimedOut:"Proxy connection timed out",InternalError:"SocksClient internal error (this should not happen)",InvalidSocks4HandshakeResponse:"Received invalid Socks4 handshake response",Socks4ProxyRejectedConnection:"Socks4 Proxy rejected connection",InvalidSocks4IncomingConnectionResponse:"Socks4 invalid incoming connection response",Socks4ProxyRejectedIncomingBoundConnection:"Socks4 Proxy rejected incoming bound connection",InvalidSocks5InitialHandshakeResponse:"Received invalid Socks5 initial handshake response",InvalidSocks5IntiailHandshakeSocksVersion:"Received invalid Socks5 initial handshake (invalid socks version)",InvalidSocks5InitialHandshakeNoAcceptedAuthType:"Received invalid Socks5 initial handshake (no accepted authentication type)",InvalidSocks5InitialHandshakeUnknownAuthType:"Received invalid Socks5 initial handshake (unknown authentication type)",Socks5AuthenticationFailed:"Socks5 Authentication failed",InvalidSocks5FinalHandshake:"Received invalid Socks5 final handshake response",InvalidSocks5FinalHandshakeRejected:"Socks5 proxy rejected connection",InvalidSocks5IncomingConnectionResponse:"Received invalid Socks5 incoming connection response",Socks5ProxyRejectedIncomingBoundConnection:"Socks5 Proxy rejected incoming bound connection"};KW.ERRORS=IC;var ZC={Socks5InitialHandshakeResponse:2,Socks5UserPassAuthenticationResponse:2,Socks5ResponseHeader:5,Socks5ResponseIPv4:10,Socks5ResponseIPv6:22,Socks5ResponseHostname:(Q)=>Q+7,Socks4Response:8};KW.SOCKS_INCOMING_PACKET_SIZES=ZC;var XW;(function(Q){Q[Q.connect=1]="connect",Q[Q.bind=2]="bind",Q[Q.associate=3]="associate"})(XW||(KW.SocksCommand=XW={}));var YW;(function(Q){Q[Q.Granted=90]="Granted",Q[Q.Failed=91]="Failed",Q[Q.Rejected=92]="Rejected",Q[Q.RejectedIdent=93]="RejectedIdent"})(YW||(KW.Socks4Response=YW={}));var $W;(function(Q){Q[Q.NoAuth=0]="NoAuth",Q[Q.GSSApi=1]="GSSApi",Q[Q.UserPass=2]="UserPass"})($W||(KW.Socks5Auth=$W={}));var SC=128;KW.SOCKS5_CUSTOM_AUTH_START=SC;var _C=254;KW.SOCKS5_CUSTOM_AUTH_END=_C;var xC=255;KW.SOCKS5_NO_ACCEPTABLE_AUTH=xC;var GW;(function(Q){Q[Q.Granted=0]="Granted",Q[Q.Failure=1]="Failure",Q[Q.NotAllowed=2]="NotAllowed",Q[Q.NetworkUnreachable=3]="NetworkUnreachable",Q[Q.HostUnreachable=4]="HostUnreachable",Q[Q.ConnectionRefused=5]="ConnectionRefused",Q[Q.TTLExpired=6]="TTLExpired",Q[Q.CommandNotSupported=7]="CommandNotSupported",Q[Q.AddressNotSupported=8]="AddressNotSupported"})(GW||(KW.Socks5Response=GW={}));var HW;(function(Q){Q[Q.IPv4=1]="IPv4",Q[Q.Hostname=3]="Hostname",Q[Q.IPv6=4]="IPv6"})(HW||(KW.Socks5HostType=HW={}));var qW;(function(Q){Q[Q.Created=0]="Created",Q[Q.Connecting=1]="Connecting",Q[Q.Connected=2]="Connected",Q[Q.SentInitialHandshake=3]="SentInitialHandshake",Q[Q.ReceivedInitialHandshakeResponse=4]="ReceivedInitialHandshakeResponse",Q[Q.SentAuthentication=5]="SentAuthentication",Q[Q.ReceivedAuthenticationResponse=6]="ReceivedAuthenticationResponse",Q[Q.SentFinalHandshake=7]="SentFinalHandshake",Q[Q.ReceivedFinalResponse=8]="ReceivedFinalResponse",Q[Q.BoundWaitingForConnection=9]="BoundWaitingForConnection",Q[Q.Established=10]="Established",Q[Q.Disconnected=11]="Disconnected",Q[Q.Error=99]="Error"})(qW||(KW.SocksClientState=qW={}))});var e5=D((VW)=>{Object.defineProperty(VW,"__esModule",{value:!0});VW.shuffleArray=VW.SocksClientError=void 0;class zW extends Error{constructor(Q,J){super(Q);this.options=J}}VW.SocksClientError=zW;function dC(Q){for(let J=Q.length-1;J>0;J--){let X=Math.floor(Math.random()*(J+1));[Q[J],Q[X]]=[Q[X],Q[J]]}}VW.shuffleArray=dC});var Q6=D((UW)=>{Object.defineProperty(UW,"__esModule",{value:!0});UW.isCorrect=UW.isInSubnet=void 0;function nC(Q){if(this.subnetMask<Q.subnetMask)return!1;if(this.mask(Q.subnetMask)===Q.mask())return!0;return!1}UW.isInSubnet=nC;function iC(Q){return function(){if(this.addressMinusSuffix!==this.correctForm())return!1;if(this.subnetMask===Q&&!this.parsedSubnet)return!0;return this.parsedSubnet===String(this.subnetMask)}}UW.isCorrect=iC});var J6=D((OW)=>{Object.defineProperty(OW,"__esModule",{value:!0});OW.RE_SUBNET_STRING=OW.RE_ADDRESS=OW.GROUPS=OW.BITS=void 0;OW.BITS=32;OW.GROUPS=4;OW.RE_ADDRESS=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g;OW.RE_SUBNET_STRING=/\/\d{1,2}$/});var BJ=D((BW)=>{Object.defineProperty(BW,"__esModule",{value:!0});BW.AddressError=void 0;class jW extends Error{constructor(Q,J){super(Q);if(this.name="AddressError",J!==null)this.parseMessage=J}}BW.AddressError=jW});var X6=D((AJ,DW)=>{(function(){var Q,J=244837814094590,X=(J&16777215)==15715070;function Y(W,M,U){if(W!=null)if(typeof W=="number")this.fromNumber(W,M,U);else if(M==null&&typeof W!="string")this.fromString(W,256);else this.fromString(W,M)}function $(){return new Y(null)}function G(W,M,U,j,w,E){while(--E>=0){var S=M*this[W++]+U[j]+w;w=Math.floor(S/67108864),U[j++]=S&67108863}return w}function H(W,M,U,j,w,E){var S=M&32767,v=M>>15;while(--E>=0){var $0=this[W]&32767,N0=this[W++]>>15,d0=v*$0+N0*S;$0=S*$0+((d0&32767)<<15)+U[j]+(w&1073741823),w=($0>>>30)+(d0>>>15)+v*N0+(w>>>30),U[j++]=$0&1073741823}return w}function q(W,M,U,j,w,E){var S=M&16383,v=M>>14;while(--E>=0){var $0=this[W]&16383,N0=this[W++]>>14,d0=v*$0+N0*S;$0=S*$0+((d0&16383)<<14)+U[j]+w,w=($0>>28)+(d0>>14)+v*N0,U[j++]=$0&268435455}return w}var K=typeof navigator!=="undefined";if(K&&X&&navigator.appName=="Microsoft Internet Explorer")Y.prototype.am=H,Q=30;else if(K&&X&&navigator.appName!="Netscape")Y.prototype.am=G,Q=26;else Y.prototype.am=q,Q=28;Y.prototype.DB=Q,Y.prototype.DM=(1<<Q)-1,Y.prototype.DV=1<<Q;var z=52;Y.prototype.FV=Math.pow(2,z),Y.prototype.F1=z-Q,Y.prototype.F2=2*Q-z;var V="0123456789abcdefghijklmnopqrstuvwxyz",F=new Array,O,N;O=48;for(N=0;N<=9;++N)F[O++]=N;O=97;for(N=10;N<36;++N)F[O++]=N;O=65;for(N=10;N<36;++N)F[O++]=N;function A(W){return V.charAt(W)}function B(W,M){var U=F[W.charCodeAt(M)];return U==null?-1:U}function L(W){for(var M=this.t-1;M>=0;--M)W[M]=this[M];W.t=this.t,W.s=this.s}function C(W){if(this.t=1,this.s=W<0?-1:0,W>0)this[0]=W;else if(W<-1)this[0]=W+this.DV;else this.t=0}function P(W){var M=$();return M.fromInt(W),M}function _(W,M){var U;if(M==16)U=4;else if(M==8)U=3;else if(M==256)U=8;else if(M==2)U=1;else if(M==32)U=5;else if(M==4)U=2;else{this.fromRadix(W,M);return}this.t=0,this.s=0;var j=W.length,w=!1,E=0;while(--j>=0){var S=U==8?W[j]&255:B(W,j);if(S<0){if(W.charAt(j)=="-")w=!0;continue}if(w=!1,E==0)this[this.t++]=S;else if(E+U>this.DB)this[this.t-1]|=(S&(1<<this.DB-E)-1)<<E,this[this.t++]=S>>this.DB-E;else this[this.t-1]|=S<<E;if(E+=U,E>=this.DB)E-=this.DB}if(U==8&&(W[0]&128)!=0){if(this.s=-1,E>0)this[this.t-1]|=(1<<this.DB-E)-1<<E}if(this.clamp(),w)Y.ZERO.subTo(this,this)}function x(){var W=this.s&this.DM;while(this.t>0&&this[this.t-1]==W)--this.t}function i(W){if(this.s<0)return"-"+this.negate().toString(W);var M;if(W==16)M=4;else if(W==8)M=3;else if(W==2)M=1;else if(W==32)M=5;else if(W==4)M=2;else return this.toRadix(W);var U=(1<<M)-1,j,w=!1,E="",S=this.t,v=this.DB-S*this.DB%M;if(S-- >0){if(v<this.DB&&(j=this[S]>>v)>0)w=!0,E=A(j);while(S>=0){if(v<M)j=(this[S]&(1<<v)-1)<<M-v,j|=this[--S]>>(v+=this.DB-M);else if(j=this[S]>>(v-=M)&U,v<=0)v+=this.DB,--S;if(j>0)w=!0;if(w)E+=A(j)}}return w?E:"0"}function J0(){var W=$();return Y.ZERO.subTo(this,W),W}function X0(){return this.s<0?this.negate():this}function z0(W){var M=this.s-W.s;if(M!=0)return M;var U=this.t;if(M=U-W.t,M!=0)return this.s<0?-M:M;while(--U>=0)if((M=this[U]-W[U])!=0)return M;return 0}function t(W){var M=1,U;if((U=W>>>16)!=0)W=U,M+=16;if((U=W>>8)!=0)W=U,M+=8;if((U=W>>4)!=0)W=U,M+=4;if((U=W>>2)!=0)W=U,M+=2;if((U=W>>1)!=0)W=U,M+=1;return M}function C0(){if(this.t<=0)return 0;return this.DB*(this.t-1)+t(this[this.t-1]^this.s&this.DM)}function B8(W,M){var U;for(U=this.t-1;U>=0;--U)M[U+W]=this[U];for(U=W-1;U>=0;--U)M[U]=0;M.t=this.t+W,M.s=this.s}function J4(W,M){for(var U=W;U<this.t;++U)M[U-W]=this[U];M.t=Math.max(this.t-W,0),M.s=this.s}function B1(W,M){var U=W%this.DB,j=this.DB-U,w=(1<<j)-1,E=Math.floor(W/this.DB),S=this.s<<U&this.DM,v;for(v=this.t-1;v>=0;--v)M[v+E+1]=this[v]>>j|S,S=(this[v]&w)<<U;for(v=E-1;v>=0;--v)M[v]=0;M[E]=S,M.t=this.t+E+1,M.s=this.s,M.clamp()}function Iz(W,M){M.s=this.s;var U=Math.floor(W/this.DB);if(U>=this.t){M.t=0;return}var j=W%this.DB,w=this.DB-j,E=(1<<j)-1;M[0]=this[U]>>j;for(var S=U+1;S<this.t;++S)M[S-U-1]|=(this[S]&E)<<w,M[S-U]=this[S]>>j;if(j>0)M[this.t-U-1]|=(this.s&E)<<w;M.t=this.t-U,M.clamp()}function Zz(W,M){var U=0,j=0,w=Math.min(W.t,this.t);while(U<w)j+=this[U]-W[U],M[U++]=j&this.DM,j>>=this.DB;if(W.t<this.t){j-=W.s;while(U<this.t)j+=this[U],M[U++]=j&this.DM,j>>=this.DB;j+=this.s}else{j+=this.s;while(U<W.t)j-=W[U],M[U++]=j&this.DM,j>>=this.DB;j-=W.s}if(M.s=j<0?-1:0,j<-1)M[U++]=this.DV+j;else if(j>0)M[U++]=j;M.t=U,M.clamp()}function Sz(W,M){var U=this.abs(),j=W.abs(),w=U.t;M.t=w+j.t;while(--w>=0)M[w]=0;for(w=0;w<j.t;++w)M[w+U.t]=U.am(0,j[w],M,w,0,U.t);if(M.s=0,M.clamp(),this.s!=W.s)Y.ZERO.subTo(M,M)}function _z(W){var M=this.abs(),U=W.t=2*M.t;while(--U>=0)W[U]=0;for(U=0;U<M.t-1;++U){var j=M.am(U,M[U],W,2*U,0,1);if((W[U+M.t]+=M.am(U+1,2*M[U],W,2*U+1,j,M.t-U-1))>=M.DV)W[U+M.t]-=M.DV,W[U+M.t+1]=1}if(W.t>0)W[W.t-1]+=M.am(U,M[U],W,2*U,0,1);W.s=0,W.clamp()}function xz(W,M,U){var j=W.abs();if(j.t<=0)return;var w=this.abs();if(w.t<j.t){if(M!=null)M.fromInt(0);if(U!=null)this.copyTo(U);return}if(U==null)U=$();var E=$(),S=this.s,v=W.s,$0=this.DB-t(j[j.t-1]);if($0>0)j.lShiftTo($0,E),w.lShiftTo($0,U);else j.copyTo(E),w.copyTo(U);var N0=E.t,d0=E[N0-1];if(d0==0)return;var b0=d0*(1<<this.F1)+(N0>1?E[N0-2]>>this.F2:0),g1=this.FV/b0,$9=(1<<this.F1)/b0,J1=1<<this.F2,X1=U.t,G9=X1-N0,t1=M==null?$():M;if(E.dlShiftTo(G9,t1),U.compareTo(t1)>=0)U[U.t++]=1,U.subTo(t1,U);Y.ONE.dlShiftTo(N0,t1),t1.subTo(E,E);while(E.t<N0)E[E.t++]=0;while(--G9>=0){var mJ=U[--X1]==d0?this.DM:Math.floor(U[X1]*g1+(U[X1-1]+J1)*$9);if((U[X1]+=E.am(0,mJ,U,G9,0,N0))<mJ){E.dlShiftTo(G9,t1),U.subTo(t1,U);while(U[X1]<--mJ)U.subTo(t1,U)}}if(M!=null){if(U.drShiftTo(N0,M),S!=v)Y.ZERO.subTo(M,M)}if(U.t=N0,U.clamp(),$0>0)U.rShiftTo($0,U);if(S<0)Y.ZERO.subTo(U,U)}function hz(W){var M=$();if(this.abs().divRemTo(W,null,M),this.s<0&&M.compareTo(Y.ZERO)>0)W.subTo(M,M);return M}function A8(W){this.m=W}function vz(W){if(W.s<0||W.compareTo(this.m)>=0)return W.mod(this.m);else return W}function yz(W){return W}function gz(W){W.divRemTo(this.m,null,W)}function fz(W,M,U){W.multiplyTo(M,U),this.reduce(U)}function kz(W,M){W.squareTo(M),this.reduce(M)}A8.prototype.convert=vz,A8.prototype.revert=yz,A8.prototype.reduce=gz,A8.prototype.mulTo=fz,A8.prototype.sqrTo=kz;function bz(){if(this.t<1)return 0;var W=this[0];if((W&1)==0)return 0;var M=W&3;return M=M*(2-(W&15)*M)&15,M=M*(2-(W&255)*M)&255,M=M*(2-((W&65535)*M&65535))&65535,M=M*(2-W*M%this.DV)%this.DV,M>0?this.DV-M:-M}function D8(W){this.m=W,this.mp=W.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<W.DB-15)-1,this.mt2=2*W.t}function mz(W){var M=$();if(W.abs().dlShiftTo(this.m.t,M),M.divRemTo(this.m,null,M),W.s<0&&M.compareTo(Y.ZERO)>0)this.m.subTo(M,M);return M}function uz(W){var M=$();return W.copyTo(M),this.reduce(M),M}function lz(W){while(W.t<=this.mt2)W[W.t++]=0;for(var M=0;M<this.m.t;++M){var U=W[M]&32767,j=U*this.mpl+((U*this.mph+(W[M]>>15)*this.mpl&this.um)<<15)&W.DM;U=M+this.m.t,W[U]+=this.m.am(0,j,W,M,0,this.m.t);while(W[U]>=W.DV)W[U]-=W.DV,W[++U]++}if(W.clamp(),W.drShiftTo(this.m.t,W),W.compareTo(this.m)>=0)W.subTo(this.m,W)}function cz(W,M){W.squareTo(M),this.reduce(M)}function dz(W,M,U){W.multiplyTo(M,U),this.reduce(U)}D8.prototype.convert=mz,D8.prototype.revert=uz,D8.prototype.reduce=lz,D8.prototype.mulTo=dz,D8.prototype.sqrTo=cz;function pz(){return(this.t>0?this[0]&1:this.s)==0}function nz(W,M){if(W>4294967295||W<1)return Y.ONE;var U=$(),j=$(),w=M.convert(this),E=t(W)-1;w.copyTo(U);while(--E>=0)if(M.sqrTo(U,j),(W&1<<E)>0)M.mulTo(j,w,U);else{var S=U;U=j,j=S}return M.revert(U)}function iz(W,M){var U;if(W<256||M.isEven())U=new A8(M);else U=new D8(M);return this.exp(W,U)}Y.prototype.copyTo=L,Y.prototype.fromInt=C,Y.prototype.fromString=_,Y.prototype.clamp=x,Y.prototype.dlShiftTo=B8,Y.prototype.drShiftTo=J4,Y.prototype.lShiftTo=B1,Y.prototype.rShiftTo=Iz,Y.prototype.subTo=Zz,Y.prototype.multiplyTo=Sz,Y.prototype.squareTo=_z,Y.prototype.divRemTo=xz,Y.prototype.invDigit=bz,Y.prototype.isEven=pz,Y.prototype.exp=nz,Y.prototype.toString=i,Y.prototype.negate=J0,Y.prototype.abs=X0,Y.prototype.compareTo=z0,Y.prototype.bitLength=C0,Y.prototype.mod=hz,Y.prototype.modPowInt=iz,Y.ZERO=P(0),Y.ONE=P(1);function oz(){var W=$();return this.copyTo(W),W}function rz(){if(this.s<0){if(this.t==1)return this[0]-this.DV;else if(this.t==0)return-1}else if(this.t==1)return this[0];else if(this.t==0)return 0;return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function az(){return this.t==0?this.s:this[0]<<24>>24}function sz(){return this.t==0?this.s:this[0]<<16>>16}function tz(W){return Math.floor(Math.LN2*this.DB/Math.log(W))}function ez(){if(this.s<0)return-1;else if(this.t<=0||this.t==1&&this[0]<=0)return 0;else return 1}function QV(W){if(W==null)W=10;if(this.signum()==0||W<2||W>36)return"0";var M=this.chunkSize(W),U=Math.pow(W,M),j=P(U),w=$(),E=$(),S="";this.divRemTo(j,w,E);while(w.signum()>0)S=(U+E.intValue()).toString(W).substr(1)+S,w.divRemTo(j,w,E);return E.intValue().toString(W)+S}function JV(W,M){if(this.fromInt(0),M==null)M=10;var U=this.chunkSize(M),j=Math.pow(M,U),w=!1,E=0,S=0;for(var v=0;v<W.length;++v){var $0=B(W,v);if($0<0){if(W.charAt(v)=="-"&&this.signum()==0)w=!0;continue}if(S=M*S+$0,++E>=U)this.dMultiply(j),this.dAddOffset(S,0),E=0,S=0}if(E>0)this.dMultiply(Math.pow(M,E)),this.dAddOffset(S,0);if(w)Y.ZERO.subTo(this,this)}function XV(W,M,U){if(typeof M=="number")if(W<2)this.fromInt(1);else{if(this.fromNumber(W,U),!this.testBit(W-1))this.bitwiseTo(Y.ONE.shiftLeft(W-1),gJ,this);if(this.isEven())this.dAddOffset(1,0);while(!this.isProbablePrime(M))if(this.dAddOffset(2,0),this.bitLength()>W)this.subTo(Y.ONE.shiftLeft(W-1),this)}else{var j=new Array,w=W&7;if(j.length=(W>>3)+1,M.nextBytes(j),w>0)j[0]&=(1<<w)-1;else j[0]=0;this.fromString(j,256)}}function YV(){var W=this.t,M=new Array;M[0]=this.s;var U=this.DB-W*this.DB%8,j,w=0;if(W-- >0){if(U<this.DB&&(j=this[W]>>U)!=(this.s&this.DM)>>U)M[w++]=j|this.s<<this.DB-U;while(W>=0){if(U<8)j=(this[W]&(1<<U)-1)<<8-U,j|=this[--W]>>(U+=this.DB-8);else if(j=this[W]>>(U-=8)&255,U<=0)U+=this.DB,--W;if((j&128)!=0)j|=-256;if(w==0&&(this.s&128)!=(j&128))++w;if(w>0||j!=this.s)M[w++]=j}}return M}function $V(W){return this.compareTo(W)==0}function GV(W){return this.compareTo(W)<0?this:W}function HV(W){return this.compareTo(W)>0?this:W}function qV(W,M,U){var j,w,E=Math.min(W.t,this.t);for(j=0;j<E;++j)U[j]=M(this[j],W[j]);if(W.t<this.t){w=W.s&this.DM;for(j=E;j<this.t;++j)U[j]=M(this[j],w);U.t=this.t}else{w=this.s&this.DM;for(j=E;j<W.t;++j)U[j]=M(w,W[j]);U.t=W.t}U.s=M(this.s,W.s),U.clamp()}function KV(W,M){return W&M}function WV(W){var M=$();return this.bitwiseTo(W,KV,M),M}function gJ(W,M){return W|M}function zV(W){var M=$();return this.bitwiseTo(W,gJ,M),M}function I6(W,M){return W^M}function VV(W){var M=$();return this.bitwiseTo(W,I6,M),M}function Z6(W,M){return W&~M}function MV(W){var M=$();return this.bitwiseTo(W,Z6,M),M}function UV(){var W=$();for(var M=0;M<this.t;++M)W[M]=this.DM&~this[M];return W.t=this.t,W.s=~this.s,W}function FV(W){var M=$();if(W<0)this.rShiftTo(-W,M);else this.lShiftTo(W,M);return M}function OV(W){var M=$();if(W<0)this.lShiftTo(-W,M);else this.rShiftTo(W,M);return M}function NV(W){if(W==0)return-1;var M=0;if((W&65535)==0)W>>=16,M+=16;if((W&255)==0)W>>=8,M+=8;if((W&15)==0)W>>=4,M+=4;if((W&3)==0)W>>=2,M+=2;if((W&1)==0)++M;return M}function jV(){for(var W=0;W<this.t;++W)if(this[W]!=0)return W*this.DB+NV(this[W]);if(this.s<0)return this.t*this.DB;return-1}function BV(W){var M=0;while(W!=0)W&=W-1,++M;return M}function AV(){var W=0,M=this.s&this.DM;for(var U=0;U<this.t;++U)W+=BV(this[U]^M);return W}function DV(W){var M=Math.floor(W/this.DB);if(M>=this.t)return this.s!=0;return(this[M]&1<<W%this.DB)!=0}function LV(W,M){var U=Y.ONE.shiftLeft(W);return this.bitwiseTo(U,M,U),U}function CV(W){return this.changeBit(W,gJ)}function PV(W){return this.changeBit(W,Z6)}function wV(W){return this.changeBit(W,I6)}function EV(W,M){var U=0,j=0,w=Math.min(W.t,this.t);while(U<w)j+=this[U]+W[U],M[U++]=j&this.DM,j>>=this.DB;if(W.t<this.t){j+=W.s;while(U<this.t)j+=this[U],M[U++]=j&this.DM,j>>=this.DB;j+=this.s}else{j+=this.s;while(U<W.t)j+=W[U],M[U++]=j&this.DM,j>>=this.DB;j+=W.s}if(M.s=j<0?-1:0,j>0)M[U++]=j;else if(j<-1)M[U++]=this.DV+j;M.t=U,M.clamp()}function RV(W){var M=$();return this.addTo(W,M),M}function TV(W){var M=$();return this.subTo(W,M),M}function IV(W){var M=$();return this.multiplyTo(W,M),M}function ZV(){var W=$();return this.squareTo(W),W}function SV(W){var M=$();return this.divRemTo(W,M,null),M}function _V(W){var M=$();return this.divRemTo(W,null,M),M}function xV(W){var M=$(),U=$();return this.divRemTo(W,M,U),new Array(M,U)}function hV(W){this[this.t]=this.am(0,W-1,this,0,0,this.t),++this.t,this.clamp()}function vV(W,M){if(W==0)return;while(this.t<=M)this[this.t++]=0;this[M]+=W;while(this[M]>=this.DV){if(this[M]-=this.DV,++M>=this.t)this[this.t++]=0;++this[M]}}function X4(){}function S6(W){return W}function yV(W,M,U){W.multiplyTo(M,U)}function gV(W,M){W.squareTo(M)}X4.prototype.convert=S6,X4.prototype.revert=S6,X4.prototype.mulTo=yV,X4.prototype.sqrTo=gV;function fV(W){return this.exp(W,new X4)}function kV(W,M,U){var j=Math.min(this.t+W.t,M);U.s=0,U.t=j;while(j>0)U[--j]=0;var w;for(w=U.t-this.t;j<w;++j)U[j+this.t]=this.am(0,W[j],U,j,0,this.t);for(w=Math.min(W.t,M);j<w;++j)this.am(0,W[j],U,j,0,M-j);U.clamp()}function bV(W,M,U){--M;var j=U.t=this.t+W.t-M;U.s=0;while(--j>=0)U[j]=0;for(j=Math.max(M-this.t,0);j<W.t;++j)U[this.t+j-M]=this.am(M-j,W[j],U,0,0,this.t+j-M);U.clamp(),U.drShiftTo(1,U)}function L8(W){this.r2=$(),this.q3=$(),Y.ONE.dlShiftTo(2*W.t,this.r2),this.mu=this.r2.divide(W),this.m=W}function mV(W){if(W.s<0||W.t>2*this.m.t)return W.mod(this.m);else if(W.compareTo(this.m)<0)return W;else{var M=$();return W.copyTo(M),this.reduce(M),M}}function uV(W){return W}function lV(W){if(W.drShiftTo(this.m.t-1,this.r2),W.t>this.m.t+1)W.t=this.m.t+1,W.clamp();this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(W.compareTo(this.r2)<0)W.dAddOffset(1,this.m.t+1);W.subTo(this.r2,W);while(W.compareTo(this.m)>=0)W.subTo(this.m,W)}function cV(W,M){W.squareTo(M),this.reduce(M)}function dV(W,M,U){W.multiplyTo(M,U),this.reduce(U)}L8.prototype.convert=mV,L8.prototype.revert=uV,L8.prototype.reduce=lV,L8.prototype.mulTo=dV,L8.prototype.sqrTo=cV;function pV(W,M){var U=W.bitLength(),j,w=P(1),E;if(U<=0)return w;else if(U<18)j=1;else if(U<48)j=3;else if(U<144)j=4;else if(U<768)j=5;else j=6;if(U<8)E=new A8(M);else if(M.isEven())E=new L8(M);else E=new D8(M);var S=new Array,v=3,$0=j-1,N0=(1<<j)-1;if(S[1]=E.convert(this),j>1){var d0=$();E.sqrTo(S[1],d0);while(v<=N0)S[v]=$(),E.mulTo(d0,S[v-2],S[v]),v+=2}var b0=W.t-1,g1,$9=!0,J1=$(),X1;U=t(W[b0])-1;while(b0>=0){if(U>=$0)g1=W[b0]>>U-$0&N0;else if(g1=(W[b0]&(1<<U+1)-1)<<$0-U,b0>0)g1|=W[b0-1]>>this.DB+U-$0;v=j;while((g1&1)==0)g1>>=1,--v;if((U-=v)<0)U+=this.DB,--b0;if($9)S[g1].copyTo(w),$9=!1;else{while(v>1)E.sqrTo(w,J1),E.sqrTo(J1,w),v-=2;if(v>0)E.sqrTo(w,J1);else X1=w,w=J1,J1=X1;E.mulTo(J1,S[g1],w)}while(b0>=0&&(W[b0]&1<<U)==0)if(E.sqrTo(w,J1),X1=w,w=J1,J1=X1,--U<0)U=this.DB-1,--b0}return E.revert(w)}function nV(W){var M=this.s<0?this.negate():this.clone(),U=W.s<0?W.negate():W.clone();if(M.compareTo(U)<0){var j=M;M=U,U=j}var w=M.getLowestSetBit(),E=U.getLowestSetBit();if(E<0)return M;if(w<E)E=w;if(E>0)M.rShiftTo(E,M),U.rShiftTo(E,U);while(M.signum()>0){if((w=M.getLowestSetBit())>0)M.rShiftTo(w,M);if((w=U.getLowestSetBit())>0)U.rShiftTo(w,U);if(M.compareTo(U)>=0)M.subTo(U,M),M.rShiftTo(1,M);else U.subTo(M,U),U.rShiftTo(1,U)}if(E>0)U.lShiftTo(E,U);return U}function iV(W){if(W<=0)return 0;var M=this.DV%W,U=this.s<0?W-1:0;if(this.t>0)if(M==0)U=this[0]%W;else for(var j=this.t-1;j>=0;--j)U=(M*U+this[j])%W;return U}function oV(W){var M=W.isEven();if(this.isEven()&&M||W.signum()==0)return Y.ZERO;var U=W.clone(),j=this.clone(),w=P(1),E=P(0),S=P(0),v=P(1);while(U.signum()!=0){while(U.isEven()){if(U.rShiftTo(1,U),M){if(!w.isEven()||!E.isEven())w.addTo(this,w),E.subTo(W,E);w.rShiftTo(1,w)}else if(!E.isEven())E.subTo(W,E);E.rShiftTo(1,E)}while(j.isEven()){if(j.rShiftTo(1,j),M){if(!S.isEven()||!v.isEven())S.addTo(this,S),v.subTo(W,v);S.rShiftTo(1,S)}else if(!v.isEven())v.subTo(W,v);v.rShiftTo(1,v)}if(U.compareTo(j)>=0){if(U.subTo(j,U),M)w.subTo(S,w);E.subTo(v,E)}else{if(j.subTo(U,j),M)S.subTo(w,S);v.subTo(E,v)}}if(j.compareTo(Y.ONE)!=0)return Y.ZERO;if(v.compareTo(W)>=0)return v.subtract(W);if(v.signum()<0)v.addTo(W,v);else return v;if(v.signum()<0)return v.add(W);else return v}var I0=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],rV=67108864/I0[I0.length-1];function aV(W){var M,U=this.abs();if(U.t==1&&U[0]<=I0[I0.length-1]){for(M=0;M<I0.length;++M)if(U[0]==I0[M])return!0;return!1}if(U.isEven())return!1;M=1;while(M<I0.length){var j=I0[M],w=M+1;while(w<I0.length&&j<rV)j*=I0[w++];j=U.modInt(j);while(M<w)if(j%I0[M++]==0)return!1}return U.millerRabin(W)}function sV(W){var M=this.subtract(Y.ONE),U=M.getLowestSetBit();if(U<=0)return!1;var j=M.shiftRight(U);if(W=W+1>>1,W>I0.length)W=I0.length;var w=$();for(var E=0;E<W;++E){w.fromInt(I0[Math.floor(Math.random()*I0.length)]);var S=w.modPow(j,this);if(S.compareTo(Y.ONE)!=0&&S.compareTo(M)!=0){var v=1;while(v++<U&&S.compareTo(M)!=0)if(S=S.modPowInt(2,this),S.compareTo(Y.ONE)==0)return!1;if(S.compareTo(M)!=0)return!1}}return!0}Y.prototype.chunkSize=tz,Y.prototype.toRadix=QV,Y.prototype.fromRadix=JV,Y.prototype.fromNumber=XV,Y.prototype.bitwiseTo=qV,Y.prototype.changeBit=LV,Y.prototype.addTo=EV,Y.prototype.dMultiply=hV,Y.prototype.dAddOffset=vV,Y.prototype.multiplyLowerTo=kV,Y.prototype.multiplyUpperTo=bV,Y.prototype.modInt=iV,Y.prototype.millerRabin=sV,Y.prototype.clone=oz,Y.prototype.intValue=rz,Y.prototype.byteValue=az,Y.prototype.shortValue=sz,Y.prototype.signum=ez,Y.prototype.toByteArray=YV,Y.prototype.equals=$V,Y.prototype.min=GV,Y.prototype.max=HV,Y.prototype.and=WV,Y.prototype.or=zV,Y.prototype.xor=VV,Y.prototype.andNot=MV,Y.prototype.not=UV,Y.prototype.shiftLeft=FV,Y.prototype.shiftRight=OV,Y.prototype.getLowestSetBit=jV,Y.prototype.bitCount=AV,Y.prototype.testBit=DV,Y.prototype.setBit=CV,Y.prototype.clearBit=PV,Y.prototype.flipBit=wV,Y.prototype.add=RV,Y.prototype.subtract=TV,Y.prototype.multiply=IV,Y.prototype.divide=SV,Y.prototype.remainder=_V,Y.prototype.divideAndRemainder=xV,Y.prototype.modPow=pV,Y.prototype.modInverse=oV,Y.prototype.pow=fV,Y.prototype.gcd=nV,Y.prototype.isProbablePrime=aV,Y.prototype.square=ZV,Y.prototype.Barrett=L8;var Y9,k0,O0;function tV(W){if(k0[O0++]^=W&255,k0[O0++]^=W>>8&255,k0[O0++]^=W>>16&255,k0[O0++]^=W>>24&255,O0>=bJ)O0-=bJ}function _6(){tV(new Date().getTime())}if(k0==null){k0=new Array,O0=0;var Q1;if(typeof window!=="undefined"&&window.crypto){if(window.crypto.getRandomValues){var x6=new Uint8Array(32);window.crypto.getRandomValues(x6);for(Q1=0;Q1<32;++Q1)k0[O0++]=x6[Q1]}else if(navigator.appName=="Netscape"&&navigator.appVersion<"5"){var h6=window.crypto.random(32);for(Q1=0;Q1<h6.length;++Q1)k0[O0++]=h6.charCodeAt(Q1)&255}}while(O0<bJ)Q1=Math.floor(65536*Math.random()),k0[O0++]=Q1>>>8,k0[O0++]=Q1&255;O0=0,_6()}function eV(){if(Y9==null){_6(),Y9=Y2(),Y9.init(k0);for(O0=0;O0<k0.length;++O0)k0[O0]=0;O0=0}return Y9.next()}function Q2(W){var M;for(M=0;M<W.length;++M)W[M]=eV()}function fJ(){}fJ.prototype.nextBytes=Q2;function kJ(){this.i=0,this.j=0,this.S=new Array}function J2(W){var M,U,j;for(M=0;M<256;++M)this.S[M]=M;U=0;for(M=0;M<256;++M)U=U+this.S[M]+W[M%W.length]&255,j=this.S[M],this.S[M]=this.S[U],this.S[U]=j;this.i=0,this.j=0}function X2(){var W;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,W=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=W,this.S[W+this.S[this.i]&255]}kJ.prototype.init=J2,kJ.prototype.next=X2;function Y2(){return new kJ}var bJ=256;if(typeof AJ!=="undefined")AJ=DW.exports={default:Y,BigInteger:Y,SecureRandom:fJ};else this.jsbn={BigInteger:Y,SecureRandom:fJ}}).call(AJ)});var c4=D((LW)=>{(function(){var Q={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function J(H){return Y(G(H),arguments)}function X(H,q){return J.apply(null,[H].concat(q||[]))}function Y(H,q){var K=1,z=H.length,V,F="",O,N,A,B,L,C,P,_;for(O=0;O<z;O++)if(typeof H[O]==="string")F+=H[O];else if(typeof H[O]==="object"){if(A=H[O],A.keys){V=q[K];for(N=0;N<A.keys.length;N++){if(V==null)throw new Error(J('[sprintf] Cannot access property "%s" of undefined value "%s"',A.keys[N],A.keys[N-1]));V=V[A.keys[N]]}}else if(A.param_no)V=q[A.param_no];else V=q[K++];if(Q.not_type.test(A.type)&&Q.not_primitive.test(A.type)&&V instanceof Function)V=V();if(Q.numeric_arg.test(A.type)&&(typeof V!=="number"&&isNaN(V)))throw new TypeError(J("[sprintf] expecting number but found %T",V));if(Q.number.test(A.type))P=V>=0;switch(A.type){case"b":V=parseInt(V,10).toString(2);break;case"c":V=String.fromCharCode(parseInt(V,10));break;case"d":case"i":V=parseInt(V,10);break;case"j":V=JSON.stringify(V,null,A.width?parseInt(A.width):0);break;case"e":V=A.precision?parseFloat(V).toExponential(A.precision):parseFloat(V).toExponential();break;case"f":V=A.precision?parseFloat(V).toFixed(A.precision):parseFloat(V);break;case"g":V=A.precision?String(Number(V.toPrecision(A.precision))):parseFloat(V);break;case"o":V=(parseInt(V,10)>>>0).toString(8);break;case"s":V=String(V),V=A.precision?V.substring(0,A.precision):V;break;case"t":V=String(!!V),V=A.precision?V.substring(0,A.precision):V;break;case"T":V=Object.prototype.toString.call(V).slice(8,-1).toLowerCase(),V=A.precision?V.substring(0,A.precision):V;break;case"u":V=parseInt(V,10)>>>0;break;case"v":V=V.valueOf(),V=A.precision?V.substring(0,A.precision):V;break;case"x":V=(parseInt(V,10)>>>0).toString(16);break;case"X":V=(parseInt(V,10)>>>0).toString(16).toUpperCase();break}if(Q.json.test(A.type))F+=V;else{if(Q.number.test(A.type)&&(!P||A.sign))_=P?"+":"-",V=V.toString().replace(Q.sign,"");else _="";L=A.pad_char?A.pad_char==="0"?"0":A.pad_char.charAt(1):" ",C=A.width-(_+V).length,B=A.width?C>0?L.repeat(C):"":"",F+=A.align?_+V+B:L==="0"?_+B+V:B+_+V}}return F}var $=Object.create(null);function G(H){if($[H])return $[H];var q=H,K,z=[],V=0;while(q){if((K=Q.text.exec(q))!==null)z.push(K[0]);else if((K=Q.modulo.exec(q))!==null)z.push("%");else if((K=Q.placeholder.exec(q))!==null){if(K[2]){V|=1;var F=[],O=K[2],N=[];if((N=Q.key.exec(O))!==null){F.push(N[1]);while((O=O.substring(N[0].length))!=="")if((N=Q.key_access.exec(O))!==null)F.push(N[1]);else if((N=Q.index_access.exec(O))!==null)F.push(N[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key")}else throw new SyntaxError("[sprintf] failed to parse named argument key");K[2]=F}else V|=2;if(V===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");z.push({placeholder:K[0],param_no:K[1],keys:K[2],sign:K[3],pad_char:K[4],align:K[5],width:K[6],precision:K[7],type:K[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");q=q.substring(K[0].length)}return $[H]=z}if(typeof LW!=="undefined")LW.sprintf=J,LW.vsprintf=X;if(typeof window!=="undefined"){if(window.sprintf=J,window.vsprintf=X,typeof define==="function"&&define.amd)define(function(){return{sprintf:J,vsprintf:X}})}})()});var Y6=D((_1)=>{var tC=_1&&_1.__createBinding||(Object.create?function(Q,J,X,Y){if(Y===void 0)Y=X;var $=Object.getOwnPropertyDescriptor(J,X);if(!$||("get"in $?!J.__esModule:$.writable||$.configurable))$={enumerable:!0,get:function(){return J[X]}};Object.defineProperty(Q,Y,$)}:function(Q,J,X,Y){if(Y===void 0)Y=X;Q[Y]=J[X]}),eC=_1&&_1.__setModuleDefault||(Object.create?function(Q,J){Object.defineProperty(Q,"default",{enumerable:!0,value:J})}:function(Q,J){Q.default=J}),wW=_1&&_1.__importStar||function(Q){if(Q&&Q.__esModule)return Q;var J={};if(Q!=null){for(var X in Q)if(X!=="default"&&Object.prototype.hasOwnProperty.call(Q,X))tC(J,Q,X)}return eC(J,Q),J};Object.defineProperty(_1,"__esModule",{value:!0});_1.Address4=void 0;var CW=wW(Q6()),M1=wW(J6()),PW=BJ(),d4=X6(),vQ=c4();class s0{constructor(Q){this.groups=M1.GROUPS,this.parsedAddress=[],this.parsedSubnet="",this.subnet="/32",this.subnetMask=32,this.v4=!0,this.isCorrect=CW.isCorrect(M1.BITS),this.isInSubnet=CW.isInSubnet,this.address=Q;let J=M1.RE_SUBNET_STRING.exec(Q);if(J){if(this.parsedSubnet=J[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,this.subnetMask<0||this.subnetMask>M1.BITS)throw new PW.AddressError("Invalid subnet mask.");Q=Q.replace(M1.RE_SUBNET_STRING,"")}this.addressMinusSuffix=Q,this.parsedAddress=this.parse(Q)}static isValid(Q){try{return new s0(Q),!0}catch(J){return!1}}parse(Q){let J=Q.split(".");if(!Q.match(M1.RE_ADDRESS))throw new PW.AddressError("Invalid IPv4 address.");return J}correctForm(){return this.parsedAddress.map((Q)=>parseInt(Q,10)).join(".")}static fromHex(Q){let J=Q.replace(/:/g,"").padStart(8,"0"),X=[],Y;for(Y=0;Y<8;Y+=2){let $=J.slice(Y,Y+2);X.push(parseInt($,16))}return new s0(X.join("."))}static fromInteger(Q){return s0.fromHex(Q.toString(16))}static fromArpa(Q){let X=Q.replace(/(\.in-addr\.arpa)?\.$/,"").split(".").reverse().join(".");return new s0(X)}toHex(){return this.parsedAddress.map((Q)=>vQ.sprintf("%02x",parseInt(Q,10))).join(":")}toArray(){return this.parsedAddress.map((Q)=>parseInt(Q,10))}toGroup6(){let Q=[],J;for(J=0;J<M1.GROUPS;J+=2){let X=vQ.sprintf("%02x%02x",parseInt(this.parsedAddress[J],10),parseInt(this.parsedAddress[J+1],10));Q.push(vQ.sprintf("%x",parseInt(X,16)))}return Q.join(":")}bigInteger(){return new d4.BigInteger(this.parsedAddress.map((Q)=>vQ.sprintf("%02x",parseInt(Q,10))).join(""),16)}_startAddress(){return new d4.BigInteger(this.mask()+"0".repeat(M1.BITS-this.subnetMask),2)}startAddress(){return s0.fromBigInteger(this._startAddress())}startAddressExclusive(){let Q=new d4.BigInteger("1");return s0.fromBigInteger(this._startAddress().add(Q))}_endAddress(){return new d4.BigInteger(this.mask()+"1".repeat(M1.BITS-this.subnetMask),2)}endAddress(){return s0.fromBigInteger(this._endAddress())}endAddressExclusive(){let Q=new d4.BigInteger("1");return s0.fromBigInteger(this._endAddress().subtract(Q))}static fromBigInteger(Q){return s0.fromInteger(parseInt(Q.toString(),10))}mask(Q){if(Q===void 0)Q=this.subnetMask;return this.getBitsBase2(0,Q)}getBitsBase2(Q,J){return this.binaryZeroPad().slice(Q,J)}reverseForm(Q){if(!Q)Q={};let J=this.correctForm().split(".").reverse().join(".");if(Q.omitSuffix)return J;return vQ.sprintf("%s.in-addr.arpa.",J)}isMulticast(){return this.isInSubnet(new s0("224.0.0.0/4"))}binaryZeroPad(){return this.bigInteger().toString(2).padStart(M1.BITS,"0")}groupForV6(){let Q=this.parsedAddress;return this.address.replace(M1.RE_ADDRESS,vQ.sprintf('<span class="hover-group group-v4 group-6">%s</span>.<span class="hover-group group-v4 group-7">%s</span>',Q.slice(0,2).join("."),Q.slice(2,4).join(".")))}}_1.Address4=s0});var $6=D((EW)=>{Object.defineProperty(EW,"__esModule",{value:!0});EW.RE_URL_WITH_PORT=EW.RE_URL=EW.RE_ZONE_STRING=EW.RE_SUBNET_STRING=EW.RE_BAD_ADDRESS=EW.RE_BAD_CHARACTERS=EW.TYPES=EW.SCOPES=EW.GROUPS=EW.BITS=void 0;EW.BITS=128;EW.GROUPS=8;EW.SCOPES={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"};EW.TYPES={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"};EW.RE_BAD_CHARACTERS=/([^0-9a-f:/%])/gi;EW.RE_BAD_ADDRESS=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi;EW.RE_SUBNET_STRING=/\/\d{1,3}(?=%|$)/;EW.RE_ZONE_STRING=/%.*$/;EW.RE_URL=new RegExp(/^\[{0,1}([0-9a-f:]+)\]{0,1}/);EW.RE_URL_WITH_PORT=new RegExp(/\[([0-9a-f:]+)\]:([0-9]{1,5})/)});var G6=D((SW)=>{Object.defineProperty(SW,"__esModule",{value:!0});SW.simpleGroup=SW.spanLeadingZeroes=SW.spanAll=SW.spanAllZeroes=void 0;var TW=c4();function IW(Q){return Q.replace(/(0+)/g,'<span class="zero">$1</span>')}SW.spanAllZeroes=IW;function WP(Q,J=0){return Q.split("").map((Y,$)=>TW.sprintf('<span class="digit value-%s position-%d">%s</span>',Y,$+J,IW(Y))).join("")}SW.spanAll=WP;function ZW(Q){return Q.replace(/^(0+)/,'<span class="zero">$1</span>')}function zP(Q){return Q.split(":").map((X)=>ZW(X)).join(":")}SW.spanLeadingZeroes=zP;function VP(Q,J=0){return Q.split(":").map((Y,$)=>{if(/group-v4/.test(Y))return Y;return TW.sprintf('<span class="hover-group group-%d">%s</span>',$+J,ZW(Y))})}SW.simpleGroup=VP});var xW=D((B0)=>{var OP=B0&&B0.__createBinding||(Object.create?function(Q,J,X,Y){if(Y===void 0)Y=X;var $=Object.getOwnPropertyDescriptor(J,X);if(!$||("get"in $?!J.__esModule:$.writable||$.configurable))$={enumerable:!0,get:function(){return J[X]}};Object.defineProperty(Q,Y,$)}:function(Q,J,X,Y){if(Y===void 0)Y=X;Q[Y]=J[X]}),NP=B0&&B0.__setModuleDefault||(Object.create?function(Q,J){Object.defineProperty(Q,"default",{enumerable:!0,value:J})}:function(Q,J){Q.default=J}),jP=B0&&B0.__importStar||function(Q){if(Q&&Q.__esModule)return Q;var J={};if(Q!=null){for(var X in Q)if(X!=="default"&&Object.prototype.hasOwnProperty.call(Q,X))OP(J,Q,X)}return NP(J,Q),J};Object.defineProperty(B0,"__esModule",{value:!0});B0.possibleElisions=B0.simpleRegularExpression=B0.ADDRESS_BOUNDARY=B0.padGroup=B0.groupPossibilities=void 0;var BP=jP($6()),yQ=c4();function LJ(Q){return yQ.sprintf("(%s)",Q.join("|"))}B0.groupPossibilities=LJ;function DJ(Q){if(Q.length<4)return yQ.sprintf("0{0,%d}%s",4-Q.length,Q);return Q}B0.padGroup=DJ;B0.ADDRESS_BOUNDARY="[^A-Fa-f0-9:]";function AP(Q){let J=[];Q.forEach((Y,$)=>{if(parseInt(Y,16)===0)J.push($)});let X=J.map((Y)=>Q.map(($,G)=>{if(G===Y){let H=G===0||G===BP.GROUPS-1?":":"";return LJ([DJ($),H])}return DJ($)}).join(":"));return X.push(Q.map(DJ).join(":")),LJ(X)}B0.simpleRegularExpression=AP;function DP(Q,J,X){let Y=J?"":":",$=X?"":":",G=[];if(!J&&!X)G.push("::");if(J&&X)G.push("");if(X&&!J||!X&&J)G.push(":");G.push(yQ.sprintf("%s(:0{1,4}){1,%d}",Y,Q-1)),G.push(yQ.sprintf("(0{1,4}:){1,%d}%s",Q-1,$)),G.push(yQ.sprintf("(0{1,4}:){%d}0{1,4}",Q-1));for(let H=1;H<Q-1;H++)for(let q=1;q<Q-H;q++)G.push(yQ.sprintf("(0{1,4}:){%d}:(0{1,4}:){%d}0{1,4}",q,Q-q-H-1));return LJ(G)}B0.possibleElisions=DP});var gW=D((x1)=>{var LP=x1&&x1.__createBinding||(Object.create?function(Q,J,X,Y){if(Y===void 0)Y=X;var $=Object.getOwnPropertyDescriptor(J,X);if(!$||("get"in $?!J.__esModule:$.writable||$.configurable))$={enumerable:!0,get:function(){return J[X]}};Object.defineProperty(Q,Y,$)}:function(Q,J,X,Y){if(Y===void 0)Y=X;Q[Y]=J[X]}),CP=x1&&x1.__setModuleDefault||(Object.create?function(Q,J){Object.defineProperty(Q,"default",{enumerable:!0,value:J})}:function(Q,J){Q.default=J}),PJ=x1&&x1.__importStar||function(Q){if(Q&&Q.__esModule)return Q;var J={};if(Q!=null){for(var X in Q)if(X!=="default"&&Object.prototype.hasOwnProperty.call(Q,X))LP(J,Q,X)}return CP(J,Q),J};Object.defineProperty(x1,"__esModule",{value:!0});x1.Address6=void 0;var hW=PJ(Q6()),H6=PJ(J6()),Y0=PJ($6()),q6=PJ(G6()),s8=Y6(),t8=xW(),n1=BJ(),x0=X6(),h0=c4();function CJ(Q){if(!Q)throw new Error("Assertion failed.")}function PP(Q){let J=/(\d+)(\d{3})/;while(J.test(Q))Q=Q.replace(J,"$1,$2");return Q}function wP(Q){return Q=Q.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2'),Q=Q.replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2'),Q}function EP(Q,J){let X=[],Y=[],$;for($=0;$<Q.length;$++)if($<J[0])X.push(Q[$]);else if($>J[1])Y.push(Q[$]);return X.concat(["compact"]).concat(Y)}function vW(Q){return h0.sprintf("%04x",parseInt(Q,16))}function yW(Q){return Q&255}class A0{constructor(Q,J){if(this.addressMinusSuffix="",this.parsedSubnet="",this.subnet="/128",this.subnetMask=128,this.v4=!1,this.zone="",this.isInSubnet=hW.isInSubnet,this.isCorrect=hW.isCorrect(Y0.BITS),J===void 0)this.groups=Y0.GROUPS;else this.groups=J;this.address=Q;let X=Y0.RE_SUBNET_STRING.exec(Q);if(X){if(this.parsedSubnet=X[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,Number.isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>Y0.BITS)throw new n1.AddressError("Invalid subnet mask.");Q=Q.replace(Y0.RE_SUBNET_STRING,"")}else if(/\//.test(Q))throw new n1.AddressError("Invalid subnet mask.");let Y=Y0.RE_ZONE_STRING.exec(Q);if(Y)this.zone=Y[0],Q=Q.replace(Y0.RE_ZONE_STRING,"");this.addressMinusSuffix=Q,this.parsedAddress=this.parse(this.addressMinusSuffix)}static isValid(Q){try{return new A0(Q),!0}catch(J){return!1}}static fromBigInteger(Q){let J=Q.toString(16).padStart(32,"0"),X=[],Y;for(Y=0;Y<Y0.GROUPS;Y++)X.push(J.slice(Y*4,(Y+1)*4));return new A0(X.join(":"))}static fromURL(Q){let J,X=null,Y;if(Q.indexOf("[")!==-1&&Q.indexOf("]:")!==-1){if(Y=Y0.RE_URL_WITH_PORT.exec(Q),Y===null)return{error:"failed to parse address with port",address:null,port:null};J=Y[1],X=Y[2]}else if(Q.indexOf("/")!==-1){if(Q=Q.replace(/^[a-z0-9]+:\/\//,""),Y=Y0.RE_URL.exec(Q),Y===null)return{error:"failed to parse address from URL",address:null,port:null};J=Y[1]}else J=Q;if(X){if(X=parseInt(X,10),X<0||X>65536)X=null}else X=null;return{address:new A0(J),port:X}}static fromAddress4(Q){let J=new s8.Address4(Q),X=Y0.BITS-(H6.BITS-J.subnetMask);return new A0(`::ffff:${J.correctForm()}/${X}`)}static fromArpa(Q){let J=Q.replace(/(\.ip6\.arpa)?\.$/,""),X=7;if(J.length!==63)throw new n1.AddressError("Invalid 'ip6.arpa' form.");let Y=J.split(".").reverse();for(let $=X;$>0;$--){let G=$*4;Y.splice(G,0,":")}return J=Y.join(""),new A0(J)}microsoftTranscription(){return h0.sprintf("%s.ipv6-literal.net",this.correctForm().replace(/:/g,"-"))}mask(Q=this.subnetMask){return this.getBitsBase2(0,Q)}possibleSubnets(Q=128){let J=Y0.BITS-this.subnetMask,X=Math.abs(Q-Y0.BITS),Y=J-X;if(Y<0)return"0";return PP(new x0.BigInteger("2",10).pow(Y).toString(10))}_startAddress(){return new x0.BigInteger(this.mask()+"0".repeat(Y0.BITS-this.subnetMask),2)}startAddress(){return A0.fromBigInteger(this._startAddress())}startAddressExclusive(){let Q=new x0.BigInteger("1");return A0.fromBigInteger(this._startAddress().add(Q))}_endAddress(){return new x0.BigInteger(this.mask()+"1".repeat(Y0.BITS-this.subnetMask),2)}endAddress(){return A0.fromBigInteger(this._endAddress())}endAddressExclusive(){let Q=new x0.BigInteger("1");return A0.fromBigInteger(this._endAddress().subtract(Q))}getScope(){let Q=Y0.SCOPES[this.getBits(12,16).intValue()];if(this.getType()==="Global unicast"&&Q!=="Link local")Q="Global";return Q||"Unknown"}getType(){for(let Q of Object.keys(Y0.TYPES))if(this.isInSubnet(new A0(Q)))return Y0.TYPES[Q];return"Global unicast"}getBits(Q,J){return new x0.BigInteger(this.getBitsBase2(Q,J),2)}getBitsBase2(Q,J){return this.binaryZeroPad().slice(Q,J)}getBitsBase16(Q,J){let X=J-Q;if(X%4!==0)throw new Error("Length of bits to retrieve must be divisible by four");return this.getBits(Q,J).toString(16).padStart(X/4,"0")}getBitsPastSubnet(){return this.getBitsBase2(this.subnetMask,Y0.BITS)}reverseForm(Q){if(!Q)Q={};let J=Math.floor(this.subnetMask/4),X=this.canonicalForm().replace(/:/g,"").split("").slice(0,J).reverse().join(".");if(J>0){if(Q.omitSuffix)return X;return h0.sprintf("%s.ip6.arpa.",X)}if(Q.omitSuffix)return"";return"ip6.arpa."}correctForm(){let Q,J=[],X=0,Y=[];for(Q=0;Q<this.parsedAddress.length;Q++){let H=parseInt(this.parsedAddress[Q],16);if(H===0)X++;if(H!==0&&X>0){if(X>1)Y.push([Q-X,Q-1]);X=0}}if(X>1)Y.push([this.parsedAddress.length-X,this.parsedAddress.length-1]);let $=Y.map((H)=>H[1]-H[0]+1);if(Y.length>0){let H=$.indexOf(Math.max(...$));J=EP(this.parsedAddress,Y[H])}else J=this.parsedAddress;for(Q=0;Q<J.length;Q++)if(J[Q]!=="compact")J[Q]=parseInt(J[Q],16).toString(16);let G=J.join(":");return G=G.replace(/^compact$/,"::"),G=G.replace(/^compact|compact$/,":"),G=G.replace(/compact/,""),G}binaryZeroPad(){return this.bigInteger().toString(2).padStart(Y0.BITS,"0")}parse4in6(Q){let J=Q.split(":"),Y=J.slice(-1)[0].match(H6.RE_ADDRESS);if(Y){this.parsedAddress4=Y[0],this.address4=new s8.Address4(this.parsedAddress4);for(let $=0;$<this.address4.groups;$++)if(/^0[0-9]+/.test(this.address4.parsedAddress[$]))throw new n1.AddressError("IPv4 addresses can't have leading zeroes.",Q.replace(H6.RE_ADDRESS,this.address4.parsedAddress.map(wP).join(".")));this.v4=!0,J[J.length-1]=this.address4.toGroup6(),Q=J.join(":")}return Q}parse(Q){Q=this.parse4in6(Q);let J=Q.match(Y0.RE_BAD_CHARACTERS);if(J)throw new n1.AddressError(h0.sprintf("Bad character%s detected in address: %s",J.length>1?"s":"",J.join("")),Q.replace(Y0.RE_BAD_CHARACTERS,'<span class="parse-error">$1</span>'));let X=Q.match(Y0.RE_BAD_ADDRESS);if(X)throw new n1.AddressError(h0.sprintf("Address failed regex: %s",X.join("")),Q.replace(Y0.RE_BAD_ADDRESS,'<span class="parse-error">$1</span>'));let Y=[],$=Q.split("::");if($.length===2){let G=$[0].split(":"),H=$[1].split(":");if(G.length===1&&G[0]==="")G=[];if(H.length===1&&H[0]==="")H=[];let q=this.groups-(G.length+H.length);if(!q)throw new n1.AddressError("Error parsing groups");this.elidedGroups=q,this.elisionBegin=G.length,this.elisionEnd=G.length+this.elidedGroups,Y=Y.concat(G);for(let K=0;K<q;K++)Y.push("0");Y=Y.concat(H)}else if($.length===1)Y=Q.split(":"),this.elidedGroups=0;else throw new n1.AddressError("Too many :: groups found");if(Y=Y.map((G)=>h0.sprintf("%x",parseInt(G,16))),Y.length!==this.groups)throw new n1.AddressError("Incorrect number of groups found");return Y}canonicalForm(){return this.parsedAddress.map(vW).join(":")}decimal(){return this.parsedAddress.map((Q)=>h0.sprintf("%05d",parseInt(Q,16))).join(":")}bigInteger(){return new x0.BigInteger(this.parsedAddress.map(vW).join(""),16)}to4(){let Q=this.binaryZeroPad().split("");return s8.Address4.fromHex(new x0.BigInteger(Q.slice(96,128).join(""),2).toString(16))}to4in6(){let Q=this.to4(),X=new A0(this.parsedAddress.slice(0,6).join(":"),6).correctForm(),Y="";if(!/:$/.test(X))Y=":";return X+Y+Q.address}inspectTeredo(){let Q=this.getBitsBase16(0,32),J=this.getBits(80,96).xor(new x0.BigInteger("ffff",16)).toString(),X=s8.Address4.fromHex(this.getBitsBase16(32,64)),Y=s8.Address4.fromHex(this.getBits(96,128).xor(new x0.BigInteger("ffffffff",16)).toString(16)),$=this.getBits(64,80),G=this.getBitsBase2(64,80),H=$.testBit(15),q=$.testBit(14),K=$.testBit(8),z=$.testBit(9),V=new x0.BigInteger(G.slice(2,6)+G.slice(8,16),2).toString(10);return{prefix:h0.sprintf("%s:%s",Q.slice(0,4),Q.slice(4,8)),server4:X.address,client4:Y.address,flags:G,coneNat:H,microsoft:{reserved:q,universalLocal:z,groupIndividual:K,nonce:V},udpPort:J}}inspect6to4(){let Q=this.getBitsBase16(0,16),J=s8.Address4.fromHex(this.getBitsBase16(16,48));return{prefix:h0.sprintf("%s",Q.slice(0,4)),gateway:J.address}}to6to4(){if(!this.is4())return null;let Q=["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":");return new A0(Q)}toByteArray(){let Q=this.bigInteger().toByteArray();if(Q.length===17&&Q[0]===0)return Q.slice(1);return Q}toUnsignedByteArray(){return this.toByteArray().map(yW)}static fromByteArray(Q){return this.fromUnsignedByteArray(Q.map(yW))}static fromUnsignedByteArray(Q){let J=new x0.BigInteger("256",10),X=new x0.BigInteger("0",10),Y=new x0.BigInteger("1",10);for(let $=Q.length-1;$>=0;$--)X=X.add(Y.multiply(new x0.BigInteger(Q[$].toString(10),10))),Y=Y.multiply(J);return A0.fromBigInteger(X)}isCanonical(){return this.addressMinusSuffix===this.canonicalForm()}isLinkLocal(){if(this.getBitsBase2(0,64)==="1111111010000000000000000000000000000000000000000000000000000000")return!0;return!1}isMulticast(){return this.getType()==="Multicast"}is4(){return this.v4}isTeredo(){return this.isInSubnet(new A0("2001::/32"))}is6to4(){return this.isInSubnet(new A0("2002::/16"))}isLoopback(){return this.getType()==="Loopback"}href(Q){if(Q===void 0)Q="";else Q=h0.sprintf(":%s",Q);return h0.sprintf("http://[%s]%s/",this.correctForm(),Q)}link(Q){if(!Q)Q={};if(Q.className===void 0)Q.className="";if(Q.prefix===void 0)Q.prefix="/#address=";if(Q.v4===void 0)Q.v4=!1;let J=this.correctForm;if(Q.v4)J=this.to4in6;if(Q.className)return h0.sprintf('<a href="%1$s%2$s" class="%3$s">%2$s</a>',Q.prefix,J.call(this),Q.className);return h0.sprintf('<a href="%1$s%2$s">%2$s</a>',Q.prefix,J.call(this))}group(){if(this.elidedGroups===0)return q6.simpleGroup(this.address).join(":");CJ(typeof this.elidedGroups==="number"),CJ(typeof this.elisionBegin==="number");let Q=[],[J,X]=this.address.split("::");if(J.length)Q.push(...q6.simpleGroup(J));else Q.push("");let Y=["hover-group"];for(let $=this.elisionBegin;$<this.elisionBegin+this.elidedGroups;$++)Y.push(h0.sprintf("group-%d",$));if(Q.push(h0.sprintf('<span class="%s"></span>',Y.join(" "))),X.length)Q.push(...q6.simpleGroup(X,this.elisionEnd));else Q.push("");if(this.is4())CJ(this.address4 instanceof s8.Address4),Q.pop(),Q.push(this.address4.groupForV6());return Q.join(":")}regularExpressionString(Q=!1){let J=[],X=new A0(this.correctForm());if(X.elidedGroups===0)J.push(t8.simpleRegularExpression(X.parsedAddress));else if(X.elidedGroups===Y0.GROUPS)J.push(t8.possibleElisions(Y0.GROUPS));else{let Y=X.address.split("::");if(Y[0].length)J.push(t8.simpleRegularExpression(Y[0].split(":")));if(CJ(typeof X.elidedGroups==="number"),J.push(t8.possibleElisions(X.elidedGroups,Y[0].length!==0,Y[1].length!==0)),Y[1].length)J.push(t8.simpleRegularExpression(Y[1].split(":")));J=[J.join(":")]}if(!Q)J=["(?=^|",t8.ADDRESS_BOUNDARY,"|[^\\w\\:])(",...J,")(?=[^\\w\\:]|",t8.ADDRESS_BOUNDARY,"|$)"];return J.join("")}regularExpression(Q=!1){return new RegExp(this.regularExpressionString(Q),"i")}}x1.Address6=A0});var K6=D((R0)=>{var RP=R0&&R0.__createBinding||(Object.create?function(Q,J,X,Y){if(Y===void 0)Y=X;var $=Object.getOwnPropertyDescriptor(J,X);if(!$||("get"in $?!J.__esModule:$.writable||$.configurable))$={enumerable:!0,get:function(){return J[X]}};Object.defineProperty(Q,Y,$)}:function(Q,J,X,Y){if(Y===void 0)Y=X;Q[Y]=J[X]}),TP=R0&&R0.__setModuleDefault||(Object.create?function(Q,J){Object.defineProperty(Q,"default",{enumerable:!0,value:J})}:function(Q,J){Q.default=J}),IP=R0&&R0.__importStar||function(Q){if(Q&&Q.__esModule)return Q;var J={};if(Q!=null){for(var X in Q)if(X!=="default"&&Object.prototype.hasOwnProperty.call(Q,X))RP(J,Q,X)}return TP(J,Q),J};Object.defineProperty(R0,"__esModule",{value:!0});R0.v6=R0.AddressError=R0.Address6=R0.Address4=void 0;var ZP=Y6();Object.defineProperty(R0,"Address4",{enumerable:!0,get:function(){return ZP.Address4}});var SP=gW();Object.defineProperty(R0,"Address6",{enumerable:!0,get:function(){return SP.Address6}});var _P=BJ();Object.defineProperty(R0,"AddressError",{enumerable:!0,get:function(){return _P.AddressError}});var xP=IP(G6());R0.v6={helpers:xP}});var dW=D((lW)=>{Object.defineProperty(lW,"__esModule",{value:!0});lW.ipToBuffer=lW.int32ToIpv4=lW.ipv4ToInt32=lW.validateSocksClientChainOptions=lW.validateSocksClientOptions=void 0;var v0=e5(),D0=t5(),hP=y("stream"),W6=K6(),fW=y("net");function vP(Q,J=["connect","bind","associate"]){if(!D0.SocksCommand[Q.command])throw new v0.SocksClientError(D0.ERRORS.InvalidSocksCommand,Q);if(J.indexOf(Q.command)===-1)throw new v0.SocksClientError(D0.ERRORS.InvalidSocksCommandForOperation,Q);if(!bW(Q.destination))throw new v0.SocksClientError(D0.ERRORS.InvalidSocksClientOptionsDestination,Q);if(!mW(Q.proxy))throw new v0.SocksClientError(D0.ERRORS.InvalidSocksClientOptionsProxy,Q);if(kW(Q.proxy,Q),Q.timeout&&!uW(Q.timeout))throw new v0.SocksClientError(D0.ERRORS.InvalidSocksClientOptionsTimeout,Q);if(Q.existing_socket&&!(Q.existing_socket instanceof hP.Duplex))throw new v0.SocksClientError(D0.ERRORS.InvalidSocksClientOptionsExistingSocket,Q)}lW.validateSocksClientOptions=vP;function yP(Q){if(Q.command!=="connect")throw new v0.SocksClientError(D0.ERRORS.InvalidSocksCommandChain,Q);if(!bW(Q.destination))throw new v0.SocksClientError(D0.ERRORS.InvalidSocksClientOptionsDestination,Q);if(!(Q.proxies&&Array.isArray(Q.proxies)&&Q.proxies.length>=2))throw new v0.SocksClientError(D0.ERRORS.InvalidSocksClientOptionsProxiesLength,Q);if(Q.proxies.forEach((J)=>{if(!mW(J))throw new v0.SocksClientError(D0.ERRORS.InvalidSocksClientOptionsProxy,Q);kW(J,Q)}),Q.timeout&&!uW(Q.timeout))throw new v0.SocksClientError(D0.ERRORS.InvalidSocksClientOptionsTimeout,Q)}lW.validateSocksClientChainOptions=yP;function kW(Q,J){if(Q.custom_auth_method!==void 0){if(Q.custom_auth_method<D0.SOCKS5_CUSTOM_AUTH_START||Q.custom_auth_method>D0.SOCKS5_CUSTOM_AUTH_END)throw new v0.SocksClientError(D0.ERRORS.InvalidSocksClientOptionsCustomAuthRange,J);if(Q.custom_auth_request_handler===void 0||typeof Q.custom_auth_request_handler!=="function")throw new v0.SocksClientError(D0.ERRORS.InvalidSocksClientOptionsCustomAuthOptions,J);if(Q.custom_auth_response_size===void 0)throw new v0.SocksClientError(D0.ERRORS.InvalidSocksClientOptionsCustomAuthOptions,J);if(Q.custom_auth_response_handler===void 0||typeof Q.custom_auth_response_handler!=="function")throw new v0.SocksClientError(D0.ERRORS.InvalidSocksClientOptionsCustomAuthOptions,J)}}function bW(Q){return Q&&typeof Q.host==="string"&&typeof Q.port==="number"&&Q.port>=0&&Q.port<=65535}function mW(Q){return Q&&(typeof Q.host==="string"||typeof Q.ipaddress==="string")&&typeof Q.port==="number"&&Q.port>=0&&Q.port<=65535&&(Q.type===4||Q.type===5)}function uW(Q){return typeof Q==="number"&&Q>0}function gP(Q){return new W6.Address4(Q).toArray().reduce((X,Y)=>(X<<8)+Y,0)}lW.ipv4ToInt32=gP;function fP(Q){let J=Q>>>24&255,X=Q>>>16&255,Y=Q>>>8&255,$=Q&255;return[J,X,Y,$].join(".")}lW.int32ToIpv4=fP;function kP(Q){if(fW.isIPv4(Q)){let J=new W6.Address4(Q);return Buffer.from(J.toArray())}else if(fW.isIPv6(Q)){let J=new W6.Address6(Q);return Buffer.from(J.canonicalForm().split(":").map((X)=>X.padStart(4,"0")).join(""),"hex")}else throw new Error("Invalid IP address format")}lW.ipToBuffer=kP});var oW=D((nW)=>{Object.defineProperty(nW,"__esModule",{value:!0});nW.ReceiveBuffer=void 0;class pW{constructor(Q=4096){this.buffer=Buffer.allocUnsafe(Q),this.offset=0,this.originalSize=Q}get length(){return this.offset}append(Q){if(!Buffer.isBuffer(Q))throw new Error("Attempted to append a non-buffer instance to ReceiveBuffer.");if(this.offset+Q.length>=this.buffer.length){let J=this.buffer;this.buffer=Buffer.allocUnsafe(Math.max(this.buffer.length+this.originalSize,this.buffer.length+Q.length)),J.copy(this.buffer)}return Q.copy(this.buffer,this.offset),this.offset+=Q.length}peek(Q){if(Q>this.offset)throw new Error("Attempted to read beyond the bounds of the managed internal data.");return this.buffer.slice(0,Q)}get(Q){if(Q>this.offset)throw new Error("Attempted to read beyond the bounds of the managed internal data.");let J=Buffer.allocUnsafe(Q);return this.buffer.slice(0,Q).copy(J),this.buffer.copyWithin(0,Q,Q+this.offset-Q),this.offset-=Q,J}}nW.ReceiveBuffer=pW});var rW=D((U8)=>{var gQ=U8&&U8.__awaiter||function(Q,J,X,Y){function $(G){return G instanceof X?G:new X(function(H){H(G)})}return new(X||(X=Promise))(function(G,H){function q(V){try{z(Y.next(V))}catch(F){H(F)}}function K(V){try{z(Y.throw(V))}catch(F){H(F)}}function z(V){V.done?G(V.value):$(V.value).then(q,K)}z((Y=Y.apply(Q,J||[])).next())})};Object.defineProperty(U8,"__esModule",{value:!0});U8.SocksClientError=U8.SocksClient=void 0;var cP=y("events"),fQ=y("net"),f0=JW(),T=t5(),u0=dW(),dP=oW(),V6=e5();Object.defineProperty(U8,"SocksClientError",{enumerable:!0,get:function(){return V6.SocksClientError}});var z6=K6();class wJ extends cP.EventEmitter{constructor(Q){super();this.options=Object.assign({},Q),u0.validateSocksClientOptions(Q),this.setState(T.SocksClientState.Created)}static createConnection(Q,J){return new Promise((X,Y)=>{try{u0.validateSocksClientOptions(Q,["connect"])}catch(G){if(typeof J==="function")return J(G),X(G);else return Y(G)}let $=new wJ(Q);$.connect(Q.existing_socket),$.once("established",(G)=>{if($.removeAllListeners(),typeof J==="function")J(null,G),X(G);else X(G)}),$.once("error",(G)=>{if($.removeAllListeners(),typeof J==="function")J(G),X(G);else Y(G)})})}static createConnectionChain(Q,J){return new Promise((X,Y)=>gQ(this,void 0,void 0,function*(){try{u0.validateSocksClientChainOptions(Q)}catch($){if(typeof J==="function")return J($),X($);else return Y($)}if(Q.randomizeChain)V6.shuffleArray(Q.proxies);try{let $;for(let G=0;G<Q.proxies.length;G++){let H=Q.proxies[G],q=G===Q.proxies.length-1?Q.destination:{host:Q.proxies[G+1].host||Q.proxies[G+1].ipaddress,port:Q.proxies[G+1].port},K=yield wJ.createConnection({command:"connect",proxy:H,destination:q,existing_socket:$});$=$||K.socket}if(typeof J==="function")J(null,{socket:$}),X({socket:$});else X({socket:$})}catch($){if(typeof J==="function")J($),X($);else Y($)}}))}static createUDPFrame(Q){let J=new f0.SmartBuffer;if(J.writeUInt16BE(0),J.writeUInt8(Q.frameNumber||0),fQ.isIPv4(Q.remoteHost.host))J.writeUInt8(T.Socks5HostType.IPv4),J.writeUInt32BE(u0.ipv4ToInt32(Q.remoteHost.host));else if(fQ.isIPv6(Q.remoteHost.host))J.writeUInt8(T.Socks5HostType.IPv6),J.writeBuffer(u0.ipToBuffer(Q.remoteHost.host));else J.writeUInt8(T.Socks5HostType.Hostname),J.writeUInt8(Buffer.byteLength(Q.remoteHost.host)),J.writeString(Q.remoteHost.host);return J.writeUInt16BE(Q.remoteHost.port),J.writeBuffer(Q.data),J.toBuffer()}static parseUDPFrame(Q){let J=f0.SmartBuffer.fromBuffer(Q);J.readOffset=2;let X=J.readUInt8(),Y=J.readUInt8(),$;if(Y===T.Socks5HostType.IPv4)$=u0.int32ToIpv4(J.readUInt32BE());else if(Y===T.Socks5HostType.IPv6)$=z6.Address6.fromByteArray(Array.from(J.readBuffer(16))).canonicalForm();else $=J.readString(J.readUInt8());let G=J.readUInt16BE();return{frameNumber:X,remoteHost:{host:$,port:G},data:J.readBuffer()}}setState(Q){if(this.state!==T.SocksClientState.Error)this.state=Q}connect(Q){this.onDataReceived=(X)=>this.onDataReceivedHandler(X),this.onClose=()=>this.onCloseHandler(),this.onError=(X)=>this.onErrorHandler(X),this.onConnect=()=>this.onConnectHandler();let J=setTimeout(()=>this.onEstablishedTimeout(),this.options.timeout||T.DEFAULT_TIMEOUT);if(J.unref&&typeof J.unref==="function")J.unref();if(Q)this.socket=Q;else this.socket=new fQ.Socket;if(this.socket.once("close",this.onClose),this.socket.once("error",this.onError),this.socket.once("connect",this.onConnect),this.socket.on("data",this.onDataReceived),this.setState(T.SocksClientState.Connecting),this.receiveBuffer=new dP.ReceiveBuffer,Q)this.socket.emit("connect");else if(this.socket.connect(this.getSocketOptions()),this.options.set_tcp_nodelay!==void 0&&this.options.set_tcp_nodelay!==null)this.socket.setNoDelay(!!this.options.set_tcp_nodelay);this.prependOnceListener("established",(X)=>{setImmediate(()=>{if(this.receiveBuffer.length>0){let Y=this.receiveBuffer.get(this.receiveBuffer.length);X.socket.emit("data",Y)}X.socket.resume()})})}getSocketOptions(){return Object.assign(Object.assign({},this.options.socket_options),{host:this.options.proxy.host||this.options.proxy.ipaddress,port:this.options.proxy.port})}onEstablishedTimeout(){if(this.state!==T.SocksClientState.Established&&this.state!==T.SocksClientState.BoundWaitingForConnection)this.closeSocket(T.ERRORS.ProxyConnectionTimedOut)}onConnectHandler(){if(this.setState(T.SocksClientState.Connected),this.options.proxy.type===4)this.sendSocks4InitialHandshake();else this.sendSocks5InitialHandshake();this.setState(T.SocksClientState.SentInitialHandshake)}onDataReceivedHandler(Q){this.receiveBuffer.append(Q),this.processData()}processData(){while(this.state!==T.SocksClientState.Established&&this.state!==T.SocksClientState.Error&&this.receiveBuffer.length>=this.nextRequiredPacketBufferSize)if(this.state===T.SocksClientState.SentInitialHandshake)if(this.options.proxy.type===4)this.handleSocks4FinalHandshakeResponse();else this.handleInitialSocks5HandshakeResponse();else if(this.state===T.SocksClientState.SentAuthentication)this.handleInitialSocks5AuthenticationHandshakeResponse();else if(this.state===T.SocksClientState.SentFinalHandshake)this.handleSocks5FinalHandshakeResponse();else if(this.state===T.SocksClientState.BoundWaitingForConnection)if(this.options.proxy.type===4)this.handleSocks4IncomingConnectionResponse();else this.handleSocks5IncomingConnectionResponse();else{this.closeSocket(T.ERRORS.InternalError);break}}onCloseHandler(){this.closeSocket(T.ERRORS.SocketClosed)}onErrorHandler(Q){this.closeSocket(Q.message)}removeInternalSocketHandlers(){this.socket.pause(),this.socket.removeListener("data",this.onDataReceived),this.socket.removeListener("close",this.onClose),this.socket.removeListener("error",this.onError),this.socket.removeListener("connect",this.onConnect)}closeSocket(Q){if(this.state!==T.SocksClientState.Error)this.setState(T.SocksClientState.Error),this.socket.destroy(),this.removeInternalSocketHandlers(),this.emit("error",new V6.SocksClientError(Q,this.options))}sendSocks4InitialHandshake(){let Q=this.options.proxy.userId||"",J=new f0.SmartBuffer;if(J.writeUInt8(4),J.writeUInt8(T.SocksCommand[this.options.command]),J.writeUInt16BE(this.options.destination.port),fQ.isIPv4(this.options.destination.host))J.writeBuffer(u0.ipToBuffer(this.options.destination.host)),J.writeStringNT(Q);else J.writeUInt8(0),J.writeUInt8(0),J.writeUInt8(0),J.writeUInt8(1),J.writeStringNT(Q),J.writeStringNT(this.options.destination.host);this.nextRequiredPacketBufferSize=T.SOCKS_INCOMING_PACKET_SIZES.Socks4Response,this.socket.write(J.toBuffer())}handleSocks4FinalHandshakeResponse(){let Q=this.receiveBuffer.get(8);if(Q[1]!==T.Socks4Response.Granted)this.closeSocket(`${T.ERRORS.Socks4ProxyRejectedConnection} - (${T.Socks4Response[Q[1]]})`);else if(T.SocksCommand[this.options.command]===T.SocksCommand.bind){let J=f0.SmartBuffer.fromBuffer(Q);J.readOffset=2;let X={port:J.readUInt16BE(),host:u0.int32ToIpv4(J.readUInt32BE())};if(X.host==="0.0.0.0")X.host=this.options.proxy.ipaddress;this.setState(T.SocksClientState.BoundWaitingForConnection),this.emit("bound",{remoteHost:X,socket:this.socket})}else this.setState(T.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{socket:this.socket})}handleSocks4IncomingConnectionResponse(){let Q=this.receiveBuffer.get(8);if(Q[1]!==T.Socks4Response.Granted)this.closeSocket(`${T.ERRORS.Socks4ProxyRejectedIncomingBoundConnection} - (${T.Socks4Response[Q[1]]})`);else{let J=f0.SmartBuffer.fromBuffer(Q);J.readOffset=2;let X={port:J.readUInt16BE(),host:u0.int32ToIpv4(J.readUInt32BE())};this.setState(T.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:X,socket:this.socket})}}sendSocks5InitialHandshake(){let Q=new f0.SmartBuffer,J=[T.Socks5Auth.NoAuth];if(this.options.proxy.userId||this.options.proxy.password)J.push(T.Socks5Auth.UserPass);if(this.options.proxy.custom_auth_method!==void 0)J.push(this.options.proxy.custom_auth_method);Q.writeUInt8(5),Q.writeUInt8(J.length);for(let X of J)Q.writeUInt8(X);this.nextRequiredPacketBufferSize=T.SOCKS_INCOMING_PACKET_SIZES.Socks5InitialHandshakeResponse,this.socket.write(Q.toBuffer()),this.setState(T.SocksClientState.SentInitialHandshake)}handleInitialSocks5HandshakeResponse(){let Q=this.receiveBuffer.get(2);if(Q[0]!==5)this.closeSocket(T.ERRORS.InvalidSocks5IntiailHandshakeSocksVersion);else if(Q[1]===T.SOCKS5_NO_ACCEPTABLE_AUTH)this.closeSocket(T.ERRORS.InvalidSocks5InitialHandshakeNoAcceptedAuthType);else if(Q[1]===T.Socks5Auth.NoAuth)this.socks5ChosenAuthType=T.Socks5Auth.NoAuth,this.sendSocks5CommandRequest();else if(Q[1]===T.Socks5Auth.UserPass)this.socks5ChosenAuthType=T.Socks5Auth.UserPass,this.sendSocks5UserPassAuthentication();else if(Q[1]===this.options.proxy.custom_auth_method)this.socks5ChosenAuthType=this.options.proxy.custom_auth_method,this.sendSocks5CustomAuthentication();else this.closeSocket(T.ERRORS.InvalidSocks5InitialHandshakeUnknownAuthType)}sendSocks5UserPassAuthentication(){let Q=this.options.proxy.userId||"",J=this.options.proxy.password||"",X=new f0.SmartBuffer;X.writeUInt8(1),X.writeUInt8(Buffer.byteLength(Q)),X.writeString(Q),X.writeUInt8(Buffer.byteLength(J)),X.writeString(J),this.nextRequiredPacketBufferSize=T.SOCKS_INCOMING_PACKET_SIZES.Socks5UserPassAuthenticationResponse,this.socket.write(X.toBuffer()),this.setState(T.SocksClientState.SentAuthentication)}sendSocks5CustomAuthentication(){return gQ(this,void 0,void 0,function*(){this.nextRequiredPacketBufferSize=this.options.proxy.custom_auth_response_size,this.socket.write(yield this.options.proxy.custom_auth_request_handler()),this.setState(T.SocksClientState.SentAuthentication)})}handleSocks5CustomAuthHandshakeResponse(Q){return gQ(this,void 0,void 0,function*(){return yield this.options.proxy.custom_auth_response_handler(Q)})}handleSocks5AuthenticationNoAuthHandshakeResponse(Q){return gQ(this,void 0,void 0,function*(){return Q[1]===0})}handleSocks5AuthenticationUserPassHandshakeResponse(Q){return gQ(this,void 0,void 0,function*(){return Q[1]===0})}handleInitialSocks5AuthenticationHandshakeResponse(){return gQ(this,void 0,void 0,function*(){this.setState(T.SocksClientState.ReceivedAuthenticationResponse);let Q=!1;if(this.socks5ChosenAuthType===T.Socks5Auth.NoAuth)Q=yield this.handleSocks5AuthenticationNoAuthHandshakeResponse(this.receiveBuffer.get(2));else if(this.socks5ChosenAuthType===T.Socks5Auth.UserPass)Q=yield this.handleSocks5AuthenticationUserPassHandshakeResponse(this.receiveBuffer.get(2));else if(this.socks5ChosenAuthType===this.options.proxy.custom_auth_method)Q=yield this.handleSocks5CustomAuthHandshakeResponse(this.receiveBuffer.get(this.options.proxy.custom_auth_response_size));if(!Q)this.closeSocket(T.ERRORS.Socks5AuthenticationFailed);else this.sendSocks5CommandRequest()})}sendSocks5CommandRequest(){let Q=new f0.SmartBuffer;if(Q.writeUInt8(5),Q.writeUInt8(T.SocksCommand[this.options.command]),Q.writeUInt8(0),fQ.isIPv4(this.options.destination.host))Q.writeUInt8(T.Socks5HostType.IPv4),Q.writeBuffer(u0.ipToBuffer(this.options.destination.host));else if(fQ.isIPv6(this.options.destination.host))Q.writeUInt8(T.Socks5HostType.IPv6),Q.writeBuffer(u0.ipToBuffer(this.options.destination.host));else Q.writeUInt8(T.Socks5HostType.Hostname),Q.writeUInt8(this.options.destination.host.length),Q.writeString(this.options.destination.host);Q.writeUInt16BE(this.options.destination.port),this.nextRequiredPacketBufferSize=T.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHeader,this.socket.write(Q.toBuffer()),this.setState(T.SocksClientState.SentFinalHandshake)}handleSocks5FinalHandshakeResponse(){let Q=this.receiveBuffer.peek(5);if(Q[0]!==5||Q[1]!==T.Socks5Response.Granted)this.closeSocket(`${T.ERRORS.InvalidSocks5FinalHandshakeRejected} - ${T.Socks5Response[Q[1]]}`);else{let J=Q[3],X,Y;if(J===T.Socks5HostType.IPv4){let $=T.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv4;if(this.receiveBuffer.length<$){this.nextRequiredPacketBufferSize=$;return}if(Y=f0.SmartBuffer.fromBuffer(this.receiveBuffer.get($).slice(4)),X={host:u0.int32ToIpv4(Y.readUInt32BE()),port:Y.readUInt16BE()},X.host==="0.0.0.0")X.host=this.options.proxy.ipaddress}else if(J===T.Socks5HostType.Hostname){let $=Q[4],G=T.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHostname($);if(this.receiveBuffer.length<G){this.nextRequiredPacketBufferSize=G;return}Y=f0.SmartBuffer.fromBuffer(this.receiveBuffer.get(G).slice(5)),X={host:Y.readString($),port:Y.readUInt16BE()}}else if(J===T.Socks5HostType.IPv6){let $=T.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv6;if(this.receiveBuffer.length<$){this.nextRequiredPacketBufferSize=$;return}Y=f0.SmartBuffer.fromBuffer(this.receiveBuffer.get($).slice(4)),X={host:z6.Address6.fromByteArray(Array.from(Y.readBuffer(16))).canonicalForm(),port:Y.readUInt16BE()}}if(this.setState(T.SocksClientState.ReceivedFinalResponse),T.SocksCommand[this.options.command]===T.SocksCommand.connect)this.setState(T.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:X,socket:this.socket});else if(T.SocksCommand[this.options.command]===T.SocksCommand.bind)this.setState(T.SocksClientState.BoundWaitingForConnection),this.nextRequiredPacketBufferSize=T.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHeader,this.emit("bound",{remoteHost:X,socket:this.socket});else if(T.SocksCommand[this.options.command]===T.SocksCommand.associate)this.setState(T.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:X,socket:this.socket})}}handleSocks5IncomingConnectionResponse(){let Q=this.receiveBuffer.peek(5);if(Q[0]!==5||Q[1]!==T.Socks5Response.Granted)this.closeSocket(`${T.ERRORS.Socks5ProxyRejectedIncomingBoundConnection} - ${T.Socks5Response[Q[1]]}`);else{let J=Q[3],X,Y;if(J===T.Socks5HostType.IPv4){let $=T.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv4;if(this.receiveBuffer.length<$){this.nextRequiredPacketBufferSize=$;return}if(Y=f0.SmartBuffer.fromBuffer(this.receiveBuffer.get($).slice(4)),X={host:u0.int32ToIpv4(Y.readUInt32BE()),port:Y.readUInt16BE()},X.host==="0.0.0.0")X.host=this.options.proxy.ipaddress}else if(J===T.Socks5HostType.Hostname){let $=Q[4],G=T.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHostname($);if(this.receiveBuffer.length<G){this.nextRequiredPacketBufferSize=G;return}Y=f0.SmartBuffer.fromBuffer(this.receiveBuffer.get(G).slice(5)),X={host:Y.readString($),port:Y.readUInt16BE()}}else if(J===T.Socks5HostType.IPv6){let $=T.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv6;if(this.receiveBuffer.length<$){this.nextRequiredPacketBufferSize=$;return}Y=f0.SmartBuffer.fromBuffer(this.receiveBuffer.get($).slice(4)),X={host:z6.Address6.fromByteArray(Array.from(Y.readBuffer(16))).canonicalForm(),port:Y.readUInt16BE()}}this.setState(T.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:X,socket:this.socket})}}get socksClientOptions(){return Object.assign({},this.options)}}U8.SocksClient=wJ});var aW=D((e8)=>{var pP=e8&&e8.__createBinding||(Object.create?function(Q,J,X,Y){if(Y===void 0)Y=X;var $=Object.getOwnPropertyDescriptor(J,X);if(!$||("get"in $?!J.__esModule:$.writable||$.configurable))$={enumerable:!0,get:function(){return J[X]}};Object.defineProperty(Q,Y,$)}:function(Q,J,X,Y){if(Y===void 0)Y=X;Q[Y]=J[X]}),nP=e8&&e8.__exportStar||function(Q,J){for(var X in Q)if(X!=="default"&&!Object.prototype.hasOwnProperty.call(J,X))pP(J,Q,X)};Object.defineProperty(e8,"__esModule",{value:!0});nP(rW(),e8)});var U6=D((U1)=>{var iP=U1&&U1.__createBinding||(Object.create?function(Q,J,X,Y){if(Y===void 0)Y=X;var $=Object.getOwnPropertyDescriptor(J,X);if(!$||("get"in $?!J.__esModule:$.writable||$.configurable))$={enumerable:!0,get:function(){return J[X]}};Object.defineProperty(Q,Y,$)}:function(Q,J,X,Y){if(Y===void 0)Y=X;Q[Y]=J[X]}),oP=U1&&U1.__setModuleDefault||(Object.create?function(Q,J){Object.defineProperty(Q,"default",{enumerable:!0,value:J})}:function(Q,J){Q.default=J}),rP=U1&&U1.__importStar||function(){var Q=function(J){return Q=Object.getOwnPropertyNames||function(X){var Y=[];for(var $ in X)if(Object.prototype.hasOwnProperty.call(X,$))Y[Y.length]=$;return Y},Q(J)};return function(J){if(J&&J.__esModule)return J;var X={};if(J!=null){for(var Y=Q(J),$=0;$<Y.length;$++)if(Y[$]!=="default")iP(X,J,Y[$])}return oP(X,J),X}}(),sW=U1&&U1.__importDefault||function(Q){return Q&&Q.__esModule?Q:{default:Q}};Object.defineProperty(U1,"__esModule",{value:!0});U1.default=$w;var aP=sW(q1()),sP=y("stream"),tP=aW(),eP=rP(y("dns")),Qw=y("util"),M6=sW(y("assert")),i1=aP.default("mqttjs:socks");class tW extends sP.Duplex{constructor(){super({autoDestroy:!1});this._flowing=!1,this._onData=(Q)=>{if(M6.default(this._socket),this._flowing=this.push(Q),!this._flowing)this._socket.pause()},this._onEnd=()=>{i1("proxy stream received EOF"),this.push(null)},this._onClose=()=>{i1("proxy stream closed"),this.destroy()},this._onError=(Q)=>{i1("proxy stream died with error %s",Q),this.destroy(Q)},this.cork()}_start(Q){if(i1("proxy stream started"),M6.default(!this._socket),this.destroyed){Q.destroy(this.errored);return}if(this._socket=Q,!this._flowing)Q.pause();Q.on("data",this._onData),Q.on("end",this._onEnd),Q.on("error",this._onError),Q.on("close",this._onClose),Q.emit("connect"),this.uncork()}_write(Q,J,X){M6.default(this._socket),this._socket.write(Q,X)}_read(Q){var J,X;this._flowing=!0,(X=(J=this._socket)===null||J===void 0?void 0:J.resume)===null||X===void 0||X.call(J)}_destroy(Q,J){var X,Y;(Y=(X=this._socket)===null||X===void 0?void 0:X.destroy)===null||Y===void 0||Y.call(X,Q),J(Q)}}function EJ(Q){try{if(Q.code===void 0)Q.code="SOCKS";return Q}catch(J){return Q}}function Jw(Q){switch(Q){case"socks5h:":return[5,!0];case"socks4a:":return[4,!0];case"socks5:":return[5,!1];case"socks4:":return[4,!1];default:return[void 0,!1]}}function Xw(Q){let J=new URL(Q);if(J.pathname||J.hash||J.search)throw EJ(new Error("bad SOCKS URL"));let[X,Y]=Jw(J.protocol);if(!X)throw EJ(new Error("bad SOCKS URL: invalid protocol"));let $=parseInt(J.port,10);if(Number.isNaN($))throw EJ(new Error("bad SOCKS URL: invalid port"));return[{host:J.hostname,port:$,type:X},Y]}async function Yw(Q,J,X,Y,$={}){var G;let H=(G=$.lookup)!==null&&G!==void 0?G:Qw.promisify(eP.lookup),[q,K]=Xw(X);if(!K)i1("resolving %s locally",Q),Q=(await H(Q,{family:q.type===4?4:0})).address;i1("establishing SOCKS%d connection to %s:%d via %s:%d",q.type,Q,J,q.host,q.port);let z=new tP.SocksClient({command:"connect",destination:{host:Q,port:J},proxy:Object.assign({},q),timeout:$.timeout});z.connect(),z.on("established",({socket:V})=>Y._start(V)),z.on("error",(V)=>{i1("SOCKS failed: %s",V),Y.destroy(EJ(V))})}function $w(Q,J,X,Y){i1("SOCKS connection to %s:%d via %s",Q,J,X);let $=new tW;return Yw(Q,J,X,$,Y).catch((G)=>{i1("SOCKS failed: %s",G),$.destroy(G)}),$}});var O6=D((p4)=>{var F6=p4&&p4.__importDefault||function(Q){return Q&&Q.__esModule?Q:{default:Q}};Object.defineProperty(p4,"__esModule",{value:!0});var Gw=F6(y("net")),Hw=F6(q1()),qw=F6(U6()),Kw=Hw.default("mqttjs:tcp"),Ww=(Q,J)=>{if(J.port=J.port||1883,J.hostname=J.hostname||J.host||"localhost",J.socksProxy)return qw.default(J.hostname,J.port,J.socksProxy,{timeout:J.socksTimeout});let{port:X,path:Y}=J,$=J.hostname;return Kw("port %d and host %s",X,$),Gw.default.createConnection({port:X,host:$,path:Y})};p4.default=Ww});var N6=D((QQ)=>{var zw=QQ&&QQ.__rest||function(Q,J){var X={};for(var Y in Q)if(Object.prototype.hasOwnProperty.call(Q,Y)&&J.indexOf(Y)<0)X[Y]=Q[Y];if(Q!=null&&typeof Object.getOwnPropertySymbols==="function"){for(var $=0,Y=Object.getOwnPropertySymbols(Q);$<Y.length;$++)if(J.indexOf(Y[$])<0&&Object.prototype.propertyIsEnumerable.call(Q,Y[$]))X[Y[$]]=Q[Y[$]]}return X},RJ=QQ&&QQ.__importDefault||function(Q){return Q&&Q.__esModule?Q:{default:Q}};Object.defineProperty(QQ,"__esModule",{value:!0});var Vw=RJ(y("tls")),Mw=RJ(y("net")),Uw=RJ(q1()),Fw=RJ(U6()),Ow=Uw.default("mqttjs:tls");function Nw(Q){let{host:J,port:X,socksProxy:Y}=Q,$=zw(Q,["host","port","socksProxy"]);return Vw.default.connect(Y?Object.assign(Object.assign({},$),{socket:Fw.default(J,X,Y,{timeout:Q.socksTimeout})}):Q)}var jw=(Q,J)=>{if(J.port=J.port||8883,J.host=J.hostname||J.host||"localhost",Mw.default.isIP(J.host)===0)J.servername=J.host;J.rejectUnauthorized=J.rejectUnauthorized!==!1,delete J.path,Ow("port %d host %s rejectUnauthorized %b",J.port,J.host,J.rejectUnauthorized);let X=Nw(J);X.on("secureConnect",()=>{if(J.rejectUnauthorized&&!X.authorized)X.emit("error",new Error("TLS not authorized"));else X.removeListener("error",Y)});function Y($){if(J.rejectUnauthorized)Q.emit("error",$);X.end()}return X.on("error",Y),X};QQ.default=jw});var B6=D((Qz)=>{Object.defineProperty(Qz,"__esModule",{value:!0});var eW=y("buffer"),Bw=X8(),Aw=NJ(),h1,j6,l0;function Dw(){let Q=new Bw.Transform;return Q._write=(J,X,Y)=>{h1.send({data:J.buffer,success(){Y()},fail($){Y(new Error($))}})},Q._flush=(J)=>{h1.close({success(){J()}})},Q}function Lw(Q){if(!Q.hostname)Q.hostname="localhost";if(!Q.path)Q.path="/";if(!Q.wsOptions)Q.wsOptions={}}function Cw(Q,J){let X=Q.protocol==="wxs"?"wss":"ws",Y=`${X}://${Q.hostname}${Q.path}`;if(Q.port&&Q.port!==80&&Q.port!==443)Y=`${X}://${Q.hostname}:${Q.port}${Q.path}`;if(typeof Q.transformWsUrl==="function")Y=Q.transformWsUrl(Y,Q,J);return Y}function Pw(){h1.onOpen(()=>{l0.socketReady()}),h1.onMessage((Q)=>{let{data:J}=Q;if(J instanceof ArrayBuffer)J=eW.Buffer.from(J);else J=eW.Buffer.from(J,"utf8");j6.push(J)}),h1.onClose(()=>{l0.emit("close"),l0.end(),l0.destroy()}),h1.onError((Q)=>{let J=new Error(Q.errMsg);l0.destroy(J)})}var ww=(Q,J)=>{if(J.hostname=J.hostname||J.host,!J.hostname)throw new Error("Could not determine host. Specify host manually.");let X=J.protocolId==="MQIsdp"&&J.protocolVersion===3?"mqttv3.1":"mqtt";Lw(J);let Y=Cw(J,Q);h1=wx.connectSocket({url:Y,protocols:[X]}),j6=Dw(),l0=new Aw.BufferedDuplex(J,j6,h1),l0._destroy=(G,H)=>{h1.close({success(){if(H)H(G)}})};let $=l0.destroy;return l0.destroy=(G,H)=>{return l0.destroy=$,setTimeout(()=>{h1.close({fail(){l0._destroy(G,H)}})},0),l0},Pw(),l0};Qz.default=ww});var D6=D((Xz)=>{Object.defineProperty(Xz,"__esModule",{value:!0});var A6=y("buffer"),Rw=X8(),Tw=NJ(),o1,TJ,kQ,Jz=!1;function Iw(){let Q=new Rw.Transform;return Q._write=(J,X,Y)=>{o1.sendSocketMessage({data:J.buffer,success(){Y()},fail(){Y(new Error)}})},Q._flush=(J)=>{o1.closeSocket({success(){J()}})},Q}function Zw(Q){if(!Q.hostname)Q.hostname="localhost";if(!Q.path)Q.path="/";if(!Q.wsOptions)Q.wsOptions={}}function Sw(Q,J){let X=Q.protocol==="alis"?"wss":"ws",Y=`${X}://${Q.hostname}${Q.path}`;if(Q.port&&Q.port!==80&&Q.port!==443)Y=`${X}://${Q.hostname}:${Q.port}${Q.path}`;if(typeof Q.transformWsUrl==="function")Y=Q.transformWsUrl(Y,Q,J);return Y}function _w(){if(Jz)return;Jz=!0,o1.onSocketOpen(()=>{kQ.socketReady()}),o1.onSocketMessage((Q)=>{if(typeof Q.data==="string"){let J=A6.Buffer.from(Q.data,"base64");TJ.push(J)}else{let J=new FileReader;J.addEventListener("load",()=>{let X=J.result;if(X instanceof ArrayBuffer)X=A6.Buffer.from(X);else X=A6.Buffer.from(X,"utf8");TJ.push(X)}),J.readAsArrayBuffer(Q.data)}}),o1.onSocketClose(()=>{kQ.end(),kQ.destroy()}),o1.onSocketError((Q)=>{kQ.destroy(Q)})}var xw=(Q,J)=>{if(J.hostname=J.hostname||J.host,!J.hostname)throw new Error("Could not determine host. Specify host manually.");let X=J.protocolId==="MQIsdp"&&J.protocolVersion===3?"mqttv3.1":"mqtt";Zw(J);let Y=Sw(J,Q);return o1=J.my,o1.connectSocket({url:Y,protocols:X}),TJ=Iw(),kQ=new Tw.BufferedDuplex(J,TJ,o1),_w(),kQ};Xz.default=xw});var Hz=D((bQ)=>{var IJ=bQ&&bQ.__importDefault||function(Q){return Q&&Q.__esModule?Q:{default:Q}};Object.defineProperty(bQ,"__esModule",{value:!0});bQ.connectAsync=kw;var vw=IJ(q1()),yw=IJ(y("url")),gw=IJ(XJ()),Yz=IJ(Z4());if(typeof(process===null||process===void 0?void 0:process.nextTick)!=="function")process.nextTick=setImmediate;var $z=vw.default("mqttjs"),F0=null;function fw(Q){let J;if(Q.auth)if(J=Q.auth.match(/^(.+):(.+)$/),J)Q.username=J[1],Q.password=J[2];else Q.username=Q.auth}function Gz(Q,J){var X,Y,$;if($z("connecting to an MQTT broker..."),typeof Q==="object"&&!J)J=Q,Q="";if(J=J||{},Q&&typeof Q==="string"){let q=yw.default.parse(Q,!0),K={};if(q.port!=null)K.port=Number(q.port);if(K.host=q.hostname,K.query=q.query,K.auth=q.auth,K.protocol=q.protocol,K.path=q.path,J=Object.assign(Object.assign({},K),J),!J.protocol)throw new Error("Missing protocol");J.protocol=J.protocol.replace(/:$/,"")}if(J.unixSocket=J.unixSocket||((X=J.protocol)===null||X===void 0?void 0:X.includes("+unix")),J.unixSocket)J.protocol=J.protocol.replace("+unix","");else if(!((Y=J.protocol)===null||Y===void 0?void 0:Y.startsWith("ws"))&&!(($=J.protocol)===null||$===void 0?void 0:$.startsWith("wx")))delete J.path;if(fw(J),J.query&&typeof J.query.clientId==="string")J.clientId=J.query.clientId;if(Yz.default||J.unixSocket)J.socksProxy=void 0;else if(J.socksProxy===void 0&&typeof process!=="undefined")J.socksProxy=process.env.MQTTJS_SOCKS_PROXY;if(J.cert&&J.key)if(J.protocol){if(["mqtts","wss","wxs","alis"].indexOf(J.protocol)===-1)switch(J.protocol){case"mqtt":J.protocol="mqtts";break;case"ws":J.protocol="wss";break;case"wx":J.protocol="wxs";break;case"ali":J.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${J.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(!F0)if(F0={},!Yz.default&&!J.forceNativeWebSocket)F0.ws=l4().streamBuilder,F0.wss=l4().streamBuilder,F0.mqtt=O6().default,F0.tcp=O6().default,F0.ssl=N6().default,F0.tls=F0.ssl,F0.mqtts=N6().default;else F0.ws=l4().browserStreamBuilder,F0.wss=l4().browserStreamBuilder,F0.wx=B6().default,F0.wxs=B6().default,F0.ali=D6().default,F0.alis=D6().default;if(!F0[J.protocol]){let q=["mqtts","wss"].indexOf(J.protocol)!==-1;J.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((K,z)=>{if(q&&z%2===0)return!1;return typeof F0[K]==="function"})[0]}if(J.clean===!1&&!J.clientId)throw new Error("Missing clientId for unclean clients");if(J.protocol)J.defaultProtocol=J.protocol;function G(q){if(J.servers){if(!q._reconnectCount||q._reconnectCount===J.servers.length)q._reconnectCount=0;J.host=J.servers[q._reconnectCount].host,J.port=J.servers[q._reconnectCount].port,J.protocol=!J.servers[q._reconnectCount].protocol?J.defaultProtocol:J.servers[q._reconnectCount].protocol,J.hostname=J.host,q._reconnectCount++}return $z("calling streambuilder for",J.protocol),F0[J.protocol](q,J)}let H=new gw.default(G,J);return H.on("error",()=>{}),H}function kw(Q,J,X=!0){return new Promise((Y,$)=>{let G=Gz(Q,J),H={connect:(K)=>{q(),Y(G)},end:()=>{q(),Y(G)},error:(K)=>{q(),G.end(),$(K)}};if(X===!1)H.close=()=>{H.error(new Error("Couldn't connect to server"))};function q(){Object.keys(H).forEach((K)=>{G.off(K,H[K])})}Object.keys(H).forEach((K)=>{G.on(K,H[K])})})}bQ.default=Gz});var L6=D((Q0)=>{var qz=Q0&&Q0.__createBinding||(Object.create?function(Q,J,X,Y){if(Y===void 0)Y=X;var $=Object.getOwnPropertyDescriptor(J,X);if(!$||("get"in $?!J.__esModule:$.writable||$.configurable))$={enumerable:!0,get:function(){return J[X]}};Object.defineProperty(Q,Y,$)}:function(Q,J,X,Y){if(Y===void 0)Y=X;Q[Y]=J[X]}),bw=Q0&&Q0.__setModuleDefault||(Object.create?function(Q,J){Object.defineProperty(Q,"default",{enumerable:!0,value:J})}:function(Q,J){Q.default=J}),mw=Q0&&Q0.__importStar||function(){var Q=function(J){return Q=Object.getOwnPropertyNames||function(X){var Y=[];for(var $ in X)if(Object.prototype.hasOwnProperty.call(X,$))Y[Y.length]=$;return Y},Q(J)};return function(J){if(J&&J.__esModule)return J;var X={};if(J!=null){for(var Y=Q(J),$=0;$<Y.length;$++)if(Y[$]!=="default")qz(X,J,Y[$])}return bw(X,J),X}}(),Kz=Q0&&Q0.__exportStar||function(Q,J){for(var X in Q)if(X!=="default"&&!Object.prototype.hasOwnProperty.call(J,X))qz(J,Q,X)},n4=Q0&&Q0.__importDefault||function(Q){return Q&&Q.__esModule?Q:{default:Q}};Object.defineProperty(Q0,"__esModule",{value:!0});Q0.ReasonCodes=Q0.KeepaliveManager=Q0.UniqueMessageIdProvider=Q0.DefaultMessageIdProvider=Q0.Store=Q0.MqttClient=Q0.connectAsync=Q0.connect=Q0.Client=void 0;var Wz=n4(XJ());Q0.MqttClient=Wz.default;var uw=n4(W5());Q0.DefaultMessageIdProvider=uw.default;var lw=n4(yK());Q0.UniqueMessageIdProvider=lw.default;var cw=n4(z5());Q0.Store=cw.default;var zz=mw(Hz());Q0.connect=zz.default;Object.defineProperty(Q0,"connectAsync",{enumerable:!0,get:function(){return zz.connectAsync}});var dw=n4(x5());Q0.KeepaliveManager=dw.default;Q0.Client=Wz.default;Kz(XJ(),Q0);Kz(b8(),Q0);var pw=P4();Object.defineProperty(Q0,"ReasonCodes",{enumerable:!0,get:function(){return pw.ReasonCodes}})});var Mz=D((t0)=>{var Vz=t0&&t0.__createBinding||(Object.create?function(Q,J,X,Y){if(Y===void 0)Y=X;var $=Object.getOwnPropertyDescriptor(J,X);if(!$||("get"in $?!J.__esModule:$.writable||$.configurable))$={enumerable:!0,get:function(){return J[X]}};Object.defineProperty(Q,Y,$)}:function(Q,J,X,Y){if(Y===void 0)Y=X;Q[Y]=J[X]}),nw=t0&&t0.__setModuleDefault||(Object.create?function(Q,J){Object.defineProperty(Q,"default",{enumerable:!0,value:J})}:function(Q,J){Q.default=J}),iw=t0&&t0.__importStar||function(){var Q=function(J){return Q=Object.getOwnPropertyNames||function(X){var Y=[];for(var $ in X)if(Object.prototype.hasOwnProperty.call(X,$))Y[Y.length]=$;return Y},Q(J)};return function(J){if(J&&J.__esModule)return J;var X={};if(J!=null){for(var Y=Q(J),$=0;$<Y.length;$++)if(Y[$]!=="default")Vz(X,J,Y[$])}return nw(X,J),X}}(),ow=t0&&t0.__exportStar||function(Q,J){for(var X in Q)if(X!=="default"&&!Object.prototype.hasOwnProperty.call(J,X))Vz(J,Q,X)};Object.defineProperty(t0,"__esModule",{value:!0});var rw=iw(L6());t0.default=rw;ow(L6(),t0)});var Tz=K2(Mz(),1);function aw(Q,J){let X={},Y=[];for(let $ in Q){let G=Q[$],H=J[$],q=G["~standard"].validate(H);if(q instanceof Promise)throw new Error(`Validation must be synchronous, but ${$} returned a Promise.`);if(q.issues){Y.push(...q.issues.map((K)=>({...K,path:[$,...K.path??[]]})));continue}X[$]=q.value}if(Y.length)return{issues:Y};return{value:X}}function Uz(Q){let J=Q.runtimeEnvStrict??Q.runtimeEnv??process.env;if(Q.emptyStringAsUndefined??!1){for(let[P,_]of Object.entries(J))if(_==="")delete J[P]}if(!!Q.skipValidation)return J;let $=typeof Q.client==="object"?Q.client:{},G=typeof Q.server==="object"?Q.server:{},H=typeof Q.shared==="object"?Q.shared:{},q=Q.isServer??(typeof window==="undefined"||("Deno"in window)),K=q?{...G,...H,...$}:{...$,...H},z=aw(K,J),V=Q.onValidationError??((P)=>{throw console.error("❌ Invalid environment variables:",P),new Error("Invalid environment variables")}),F=Q.onInvalidAccess??(()=>{throw new Error("❌ Attempted to access a server-side environment variable on the client")});if(z.issues)return V(z.issues);let O=(P)=>{if(!Q.clientPrefix)return!0;return!P.startsWith(Q.clientPrefix)&&!(P in H)},N=(P)=>{return q||!O(P)},A=(P)=>{return P==="__esModule"||P==="$$typeof"},B=(Q.extends??[]).reduce((P,_)=>{return Object.assign(P,_)},{}),L=Object.assign(z.value,B);return new Proxy(L,{get(P,_){if(typeof _!=="string")return;if(A(_))return;if(!N(_))return F(_);return Reflect.get(P,_)}})}var s;(function(Q){Q.assertEqual=($)=>$;function J($){}Q.assertIs=J;function X($){throw new Error}Q.assertNever=X,Q.arrayToEnum=($)=>{let G={};for(let H of $)G[H]=H;return G},Q.getValidEnumValues=($)=>{let G=Q.objectKeys($).filter((q)=>typeof $[$[q]]!=="number"),H={};for(let q of G)H[q]=$[q];return Q.objectValues(H)},Q.objectValues=($)=>{return Q.objectKeys($).map(function(G){return $[G]})},Q.objectKeys=typeof Object.keys==="function"?($)=>Object.keys($):($)=>{let G=[];for(let H in $)if(Object.prototype.hasOwnProperty.call($,H))G.push(H);return G},Q.find=($,G)=>{for(let H of $)if(G(H))return H;return},Q.isInteger=typeof Number.isInteger==="function"?($)=>Number.isInteger($):($)=>typeof $==="number"&&isFinite($)&&Math.floor($)===$;function Y($,G=" | "){return $.map((H)=>typeof H==="string"?`'${H}'`:H).join(G)}Q.joinValues=Y,Q.jsonStringifyReplacer=($,G)=>{if(typeof G==="bigint")return G.toString();return G}})(s||(s={}));var P6;(function(Q){Q.mergeShapes=(J,X)=>{return{...J,...X}}})(P6||(P6={}));var h=s.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),a1=(Q)=>{switch(typeof Q){case"undefined":return h.undefined;case"string":return h.string;case"number":return isNaN(Q)?h.nan:h.number;case"boolean":return h.boolean;case"function":return h.function;case"bigint":return h.bigint;case"symbol":return h.symbol;case"object":if(Array.isArray(Q))return h.array;if(Q===null)return h.null;if(Q.then&&typeof Q.then==="function"&&Q.catch&&typeof Q.catch==="function")return h.promise;if(typeof Map!=="undefined"&&Q instanceof Map)return h.map;if(typeof Set!=="undefined"&&Q instanceof Set)return h.set;if(typeof Date!=="undefined"&&Q instanceof Date)return h.date;return h.object;default:return h.unknown}},R=s.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),sw=(Q)=>{return JSON.stringify(Q,null,2).replace(/"([^"]+)":/g,"$1:")};class c0 extends Error{get errors(){return this.issues}constructor(Q){super();this.issues=[],this.addIssue=(X)=>{this.issues=[...this.issues,X]},this.addIssues=(X=[])=>{this.issues=[...this.issues,...X]};let J=new.target.prototype;if(Object.setPrototypeOf)Object.setPrototypeOf(this,J);else this.__proto__=J;this.name="ZodError",this.issues=Q}format(Q){let J=Q||function($){return $.message},X={_errors:[]},Y=($)=>{for(let G of $.issues)if(G.code==="invalid_union")G.unionErrors.map(Y);else if(G.code==="invalid_return_type")Y(G.returnTypeError);else if(G.code==="invalid_arguments")Y(G.argumentsError);else if(G.path.length===0)X._errors.push(J(G));else{let H=X,q=0;while(q<G.path.length){let K=G.path[q];if(q!==G.path.length-1)H[K]=H[K]||{_errors:[]};else H[K]=H[K]||{_errors:[]},H[K]._errors.push(J(G));H=H[K],q++}}};return Y(this),X}static assert(Q){if(!(Q instanceof c0))throw new Error(`Not a ZodError: ${Q}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,s.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(Q=(J)=>J.message){let J={},X=[];for(let Y of this.issues)if(Y.path.length>0)J[Y.path[0]]=J[Y.path[0]]||[],J[Y.path[0]].push(Q(Y));else X.push(Q(Y));return{formErrors:X,fieldErrors:J}}get formErrors(){return this.flatten()}}c0.create=(Q)=>{return new c0(Q)};var cQ=(Q,J)=>{let X;switch(Q.code){case R.invalid_type:if(Q.received===h.undefined)X="Required";else X=`Expected ${Q.expected}, received ${Q.received}`;break;case R.invalid_literal:X=`Invalid literal value, expected ${JSON.stringify(Q.expected,s.jsonStringifyReplacer)}`;break;case R.unrecognized_keys:X=`Unrecognized key(s) in object: ${s.joinValues(Q.keys,", ")}`;break;case R.invalid_union:X="Invalid input";break;case R.invalid_union_discriminator:X=`Invalid discriminator value. Expected ${s.joinValues(Q.options)}`;break;case R.invalid_enum_value:X=`Invalid enum value. Expected ${s.joinValues(Q.options)}, received '${Q.received}'`;break;case R.invalid_arguments:X="Invalid function arguments";break;case R.invalid_return_type:X="Invalid function return type";break;case R.invalid_date:X="Invalid date";break;case R.invalid_string:if(typeof Q.validation==="object")if("includes"in Q.validation){if(X=`Invalid input: must include "${Q.validation.includes}"`,typeof Q.validation.position==="number")X=`${X} at one or more positions greater than or equal to ${Q.validation.position}`}else if("startsWith"in Q.validation)X=`Invalid input: must start with "${Q.validation.startsWith}"`;else if("endsWith"in Q.validation)X=`Invalid input: must end with "${Q.validation.endsWith}"`;else s.assertNever(Q.validation);else if(Q.validation!=="regex")X=`Invalid ${Q.validation}`;else X="Invalid";break;case R.too_small:if(Q.type==="array")X=`Array must contain ${Q.exact?"exactly":Q.inclusive?"at least":"more than"} ${Q.minimum} element(s)`;else if(Q.type==="string")X=`String must contain ${Q.exact?"exactly":Q.inclusive?"at least":"over"} ${Q.minimum} character(s)`;else if(Q.type==="number")X=`Number must be ${Q.exact?"exactly equal to ":Q.inclusive?"greater than or equal to ":"greater than "}${Q.minimum}`;else if(Q.type==="date")X=`Date must be ${Q.exact?"exactly equal to ":Q.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(Q.minimum))}`;else X="Invalid input";break;case R.too_big:if(Q.type==="array")X=`Array must contain ${Q.exact?"exactly":Q.inclusive?"at most":"less than"} ${Q.maximum} element(s)`;else if(Q.type==="string")X=`String must contain ${Q.exact?"exactly":Q.inclusive?"at most":"under"} ${Q.maximum} character(s)`;else if(Q.type==="number")X=`Number must be ${Q.exact?"exactly":Q.inclusive?"less than or equal to":"less than"} ${Q.maximum}`;else if(Q.type==="bigint")X=`BigInt must be ${Q.exact?"exactly":Q.inclusive?"less than or equal to":"less than"} ${Q.maximum}`;else if(Q.type==="date")X=`Date must be ${Q.exact?"exactly":Q.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(Q.maximum))}`;else X="Invalid input";break;case R.custom:X="Invalid input";break;case R.invalid_intersection_types:X="Intersection results could not be merged";break;case R.not_multiple_of:X=`Number must be a multiple of ${Q.multipleOf}`;break;case R.not_finite:X="Number must be finite";break;default:X=J.defaultError,s.assertNever(Q)}return{message:X}},jz=cQ;function tw(Q){jz=Q}function ZJ(){return jz}var SJ=(Q)=>{let{data:J,path:X,errorMaps:Y,issueData:$}=Q,G=[...X,...$.path||[]],H={...$,path:G};if($.message!==void 0)return{...$,path:G,message:$.message};let q="",K=Y.filter((z)=>!!z).slice().reverse();for(let z of K)q=z(H,{data:J,defaultError:q}).message;return{...$,path:G,message:q}},ew=[];function Z(Q,J){let X=ZJ(),Y=SJ({issueData:J,data:Q.data,path:Q.path,errorMaps:[Q.common.contextualErrorMap,Q.schemaErrorMap,X,X===cQ?void 0:cQ].filter(($)=>!!$)});Q.common.issues.push(Y)}class T0{constructor(){this.value="valid"}dirty(){if(this.value==="valid")this.value="dirty"}abort(){if(this.value!=="aborted")this.value="aborted"}static mergeArray(Q,J){let X=[];for(let Y of J){if(Y.status==="aborted")return b;if(Y.status==="dirty")Q.dirty();X.push(Y.value)}return{status:Q.value,value:X}}static async mergeObjectAsync(Q,J){let X=[];for(let Y of J){let $=await Y.key,G=await Y.value;X.push({key:$,value:G})}return T0.mergeObjectSync(Q,X)}static mergeObjectSync(Q,J){let X={};for(let Y of J){let{key:$,value:G}=Y;if($.status==="aborted")return b;if(G.status==="aborted")return b;if($.status==="dirty")Q.dirty();if(G.status==="dirty")Q.dirty();if($.value!=="__proto__"&&(typeof G.value!=="undefined"||Y.alwaysSet))X[$.value]=G.value}return{status:Q.value,value:X}}}var b=Object.freeze({status:"aborted"}),uQ=(Q)=>({status:"dirty",value:Q}),y0=(Q)=>({status:"valid",value:Q}),w6=(Q)=>Q.status==="aborted",E6=(Q)=>Q.status==="dirty",JQ=(Q)=>Q.status==="valid",r4=(Q)=>typeof Promise!=="undefined"&&Q instanceof Promise;function _J(Q,J,X,Y){if(X==="a"&&!Y)throw new TypeError("Private accessor was defined without a getter");if(typeof J==="function"?Q!==J||!Y:!J.has(Q))throw new TypeError("Cannot read private member from an object whose class did not declare it");return X==="m"?Y:X==="a"?Y.call(Q):Y?Y.value:J.get(Q)}function Bz(Q,J,X,Y,$){if(Y==="m")throw new TypeError("Private method is not writable");if(Y==="a"&&!$)throw new TypeError("Private accessor was defined without a setter");if(typeof J==="function"?Q!==J||!$:!J.has(Q))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Y==="a"?$.call(Q,X):$?$.value=X:J.set(Q,X),X}var g;(function(Q){Q.errToObj=(J)=>typeof J==="string"?{message:J}:J||{},Q.toString=(J)=>typeof J==="string"?J:J===null||J===void 0?void 0:J.message})(g||(g={}));var i4,o4;class j1{constructor(Q,J,X,Y){this._cachedPath=[],this.parent=Q,this.data=J,this._path=X,this._key=Y}get path(){if(!this._cachedPath.length)if(this._key instanceof Array)this._cachedPath.push(...this._path,...this._key);else this._cachedPath.push(...this._path,this._key);return this._cachedPath}}var Fz=(Q,J)=>{if(JQ(J))return{success:!0,data:J.value};else{if(!Q.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let X=new c0(Q.common.issues);return this._error=X,this._error}}}};function c(Q){if(!Q)return{};let{errorMap:J,invalid_type_error:X,required_error:Y,description:$}=Q;if(J&&(X||Y))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(J)return{errorMap:J,description:$};return{errorMap:(H,q)=>{var K,z;let{message:V}=Q;if(H.code==="invalid_enum_value")return{message:V!==null&&V!==void 0?V:q.defaultError};if(typeof q.data==="undefined")return{message:(K=V!==null&&V!==void 0?V:Y)!==null&&K!==void 0?K:q.defaultError};if(H.code!=="invalid_type")return{message:q.defaultError};return{message:(z=V!==null&&V!==void 0?V:X)!==null&&z!==void 0?z:q.defaultError}},description:$}}class d{get description(){return this._def.description}_getType(Q){return a1(Q.data)}_getOrReturnCtx(Q,J){return J||{common:Q.parent.common,data:Q.data,parsedType:a1(Q.data),schemaErrorMap:this._def.errorMap,path:Q.path,parent:Q.parent}}_processInputParams(Q){return{status:new T0,ctx:{common:Q.parent.common,data:Q.data,parsedType:a1(Q.data),schemaErrorMap:this._def.errorMap,path:Q.path,parent:Q.parent}}}_parseSync(Q){let J=this._parse(Q);if(r4(J))throw new Error("Synchronous parse encountered promise.");return J}_parseAsync(Q){let J=this._parse(Q);return Promise.resolve(J)}parse(Q,J){let X=this.safeParse(Q,J);if(X.success)return X.data;throw X.error}safeParse(Q,J){var X;let Y={common:{issues:[],async:(X=J===null||J===void 0?void 0:J.async)!==null&&X!==void 0?X:!1,contextualErrorMap:J===null||J===void 0?void 0:J.errorMap},path:(J===null||J===void 0?void 0:J.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:Q,parsedType:a1(Q)},$=this._parseSync({data:Q,path:Y.path,parent:Y});return Fz(Y,$)}"~validate"(Q){var J,X;let Y={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:Q,parsedType:a1(Q)};if(!this["~standard"].async)try{let $=this._parseSync({data:Q,path:[],parent:Y});return JQ($)?{value:$.value}:{issues:Y.common.issues}}catch($){if((X=(J=$===null||$===void 0?void 0:$.message)===null||J===void 0?void 0:J.toLowerCase())===null||X===void 0?void 0:X.includes("encountered"))this["~standard"].async=!0;Y.common={issues:[],async:!0}}return this._parseAsync({data:Q,path:[],parent:Y}).then(($)=>JQ($)?{value:$.value}:{issues:Y.common.issues})}async parseAsync(Q,J){let X=await this.safeParseAsync(Q,J);if(X.success)return X.data;throw X.error}async safeParseAsync(Q,J){let X={common:{issues:[],contextualErrorMap:J===null||J===void 0?void 0:J.errorMap,async:!0},path:(J===null||J===void 0?void 0:J.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:Q,parsedType:a1(Q)},Y=this._parse({data:Q,path:X.path,parent:X}),$=await(r4(Y)?Y:Promise.resolve(Y));return Fz(X,$)}refine(Q,J){let X=(Y)=>{if(typeof J==="string"||typeof J==="undefined")return{message:J};else if(typeof J==="function")return J(Y);else return J};return this._refinement((Y,$)=>{let G=Q(Y),H=()=>$.addIssue({code:R.custom,...X(Y)});if(typeof Promise!=="undefined"&&G instanceof Promise)return G.then((q)=>{if(!q)return H(),!1;else return!0});if(!G)return H(),!1;else return!0})}refinement(Q,J){return this._refinement((X,Y)=>{if(!Q(X))return Y.addIssue(typeof J==="function"?J(X,Y):J),!1;else return!0})}_refinement(Q){return new e0({schema:this,typeName:f.ZodEffects,effect:{type:"refinement",refinement:Q}})}superRefine(Q){return this._refinement(Q)}constructor(Q){this.spa=this.safeParseAsync,this._def=Q,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:(J)=>this["~validate"](J)}}optional(){return N1.create(this,this._def)}nullable(){return s1.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return O1.create(this)}promise(){return GQ.create(this,this._def)}or(Q){return iQ.create([this,Q],this._def)}and(Q){return oQ.create(this,Q,this._def)}transform(Q){return new e0({...c(this._def),schema:this,typeName:f.ZodEffects,effect:{type:"transform",transform:Q}})}default(Q){let J=typeof Q==="function"?Q:()=>Q;return new tQ({...c(this._def),innerType:this,defaultValue:J,typeName:f.ZodDefault})}brand(){return new hJ({typeName:f.ZodBranded,type:this,...c(this._def)})}catch(Q){let J=typeof Q==="function"?Q:()=>Q;return new eQ({...c(this._def),innerType:this,catchValue:J,typeName:f.ZodCatch})}describe(Q){return new this.constructor({...this._def,description:Q})}pipe(Q){return J9.create(this,Q)}readonly(){return Q4.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}var QE=/^c[^\s-]{8,}$/i,JE=/^[0-9a-z]+$/,XE=/^[0-9A-HJKMNP-TV-Z]{26}$/i,YE=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,$E=/^[a-z0-9_-]{21}$/i,GE=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,HE=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,qE=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,KE="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",C6,WE=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,zE=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,VE=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ME=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,UE=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,FE=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Az="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",OE=new RegExp(`^${Az}$`);function Dz(Q){let J="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";if(Q.precision)J=`${J}\\.\\d{${Q.precision}}`;else if(Q.precision==null)J=`${J}(\\.\\d+)?`;return J}function NE(Q){return new RegExp(`^${Dz(Q)}$`)}function Lz(Q){let J=`${Az}T${Dz(Q)}`,X=[];if(X.push(Q.local?"Z?":"Z"),Q.offset)X.push("([+-]\\d{2}:?\\d{2})");return J=`${J}(${X.join("|")})`,new RegExp(`^${J}$`)}function jE(Q,J){if((J==="v4"||!J)&&WE.test(Q))return!0;if((J==="v6"||!J)&&VE.test(Q))return!0;return!1}function BE(Q,J){if(!GE.test(Q))return!1;try{let[X]=Q.split("."),Y=X.replace(/-/g,"+").replace(/_/g,"/").padEnd(X.length+(4-X.length%4)%4,"="),$=JSON.parse(atob(Y));if(typeof $!=="object"||$===null)return!1;if(!$.typ||!$.alg)return!1;if(J&&$.alg!==J)return!1;return!0}catch(X){return!1}}function AE(Q,J){if((J==="v4"||!J)&&zE.test(Q))return!0;if((J==="v6"||!J)&&ME.test(Q))return!0;return!1}class F1 extends d{_parse(Q){if(this._def.coerce)Q.data=String(Q.data);if(this._getType(Q)!==h.string){let $=this._getOrReturnCtx(Q);return Z($,{code:R.invalid_type,expected:h.string,received:$.parsedType}),b}let X=new T0,Y=void 0;for(let $ of this._def.checks)if($.kind==="min"){if(Q.data.length<$.value)Y=this._getOrReturnCtx(Q,Y),Z(Y,{code:R.too_small,minimum:$.value,type:"string",inclusive:!0,exact:!1,message:$.message}),X.dirty()}else if($.kind==="max"){if(Q.data.length>$.value)Y=this._getOrReturnCtx(Q,Y),Z(Y,{code:R.too_big,maximum:$.value,type:"string",inclusive:!0,exact:!1,message:$.message}),X.dirty()}else if($.kind==="length"){let G=Q.data.length>$.value,H=Q.data.length<$.value;if(G||H){if(Y=this._getOrReturnCtx(Q,Y),G)Z(Y,{code:R.too_big,maximum:$.value,type:"string",inclusive:!0,exact:!0,message:$.message});else if(H)Z(Y,{code:R.too_small,minimum:$.value,type:"string",inclusive:!0,exact:!0,message:$.message});X.dirty()}}else if($.kind==="email"){if(!qE.test(Q.data))Y=this._getOrReturnCtx(Q,Y),Z(Y,{validation:"email",code:R.invalid_string,message:$.message}),X.dirty()}else if($.kind==="emoji"){if(!C6)C6=new RegExp(KE,"u");if(!C6.test(Q.data))Y=this._getOrReturnCtx(Q,Y),Z(Y,{validation:"emoji",code:R.invalid_string,message:$.message}),X.dirty()}else if($.kind==="uuid"){if(!YE.test(Q.data))Y=this._getOrReturnCtx(Q,Y),Z(Y,{validation:"uuid",code:R.invalid_string,message:$.message}),X.dirty()}else if($.kind==="nanoid"){if(!$E.test(Q.data))Y=this._getOrReturnCtx(Q,Y),Z(Y,{validation:"nanoid",code:R.invalid_string,message:$.message}),X.dirty()}else if($.kind==="cuid"){if(!QE.test(Q.data))Y=this._getOrReturnCtx(Q,Y),Z(Y,{validation:"cuid",code:R.invalid_string,message:$.message}),X.dirty()}else if($.kind==="cuid2"){if(!JE.test(Q.data))Y=this._getOrReturnCtx(Q,Y),Z(Y,{validation:"cuid2",code:R.invalid_string,message:$.message}),X.dirty()}else if($.kind==="ulid"){if(!XE.test(Q.data))Y=this._getOrReturnCtx(Q,Y),Z(Y,{validation:"ulid",code:R.invalid_string,message:$.message}),X.dirty()}else if($.kind==="url")try{new URL(Q.data)}catch(G){Y=this._getOrReturnCtx(Q,Y),Z(Y,{validation:"url",code:R.invalid_string,message:$.message}),X.dirty()}else if($.kind==="regex"){if($.regex.lastIndex=0,!$.regex.test(Q.data))Y=this._getOrReturnCtx(Q,Y),Z(Y,{validation:"regex",code:R.invalid_string,message:$.message}),X.dirty()}else if($.kind==="trim")Q.data=Q.data.trim();else if($.kind==="includes"){if(!Q.data.includes($.value,$.position))Y=this._getOrReturnCtx(Q,Y),Z(Y,{code:R.invalid_string,validation:{includes:$.value,position:$.position},message:$.message}),X.dirty()}else if($.kind==="toLowerCase")Q.data=Q.data.toLowerCase();else if($.kind==="toUpperCase")Q.data=Q.data.toUpperCase();else if($.kind==="startsWith"){if(!Q.data.startsWith($.value))Y=this._getOrReturnCtx(Q,Y),Z(Y,{code:R.invalid_string,validation:{startsWith:$.value},message:$.message}),X.dirty()}else if($.kind==="endsWith"){if(!Q.data.endsWith($.value))Y=this._getOrReturnCtx(Q,Y),Z(Y,{code:R.invalid_string,validation:{endsWith:$.value},message:$.message}),X.dirty()}else if($.kind==="datetime"){if(!Lz($).test(Q.data))Y=this._getOrReturnCtx(Q,Y),Z(Y,{code:R.invalid_string,validation:"datetime",message:$.message}),X.dirty()}else if($.kind==="date"){if(!OE.test(Q.data))Y=this._getOrReturnCtx(Q,Y),Z(Y,{code:R.invalid_string,validation:"date",message:$.message}),X.dirty()}else if($.kind==="time"){if(!NE($).test(Q.data))Y=this._getOrReturnCtx(Q,Y),Z(Y,{code:R.invalid_string,validation:"time",message:$.message}),X.dirty()}else if($.kind==="duration"){if(!HE.test(Q.data))Y=this._getOrReturnCtx(Q,Y),Z(Y,{validation:"duration",code:R.invalid_string,message:$.message}),X.dirty()}else if($.kind==="ip"){if(!jE(Q.data,$.version))Y=this._getOrReturnCtx(Q,Y),Z(Y,{validation:"ip",code:R.invalid_string,message:$.message}),X.dirty()}else if($.kind==="jwt"){if(!BE(Q.data,$.alg))Y=this._getOrReturnCtx(Q,Y),Z(Y,{validation:"jwt",code:R.invalid_string,message:$.message}),X.dirty()}else if($.kind==="cidr"){if(!AE(Q.data,$.version))Y=this._getOrReturnCtx(Q,Y),Z(Y,{validation:"cidr",code:R.invalid_string,message:$.message}),X.dirty()}else if($.kind==="base64"){if(!UE.test(Q.data))Y=this._getOrReturnCtx(Q,Y),Z(Y,{validation:"base64",code:R.invalid_string,message:$.message}),X.dirty()}else if($.kind==="base64url"){if(!FE.test(Q.data))Y=this._getOrReturnCtx(Q,Y),Z(Y,{validation:"base64url",code:R.invalid_string,message:$.message}),X.dirty()}else s.assertNever($);return{status:X.value,value:Q.data}}_regex(Q,J,X){return this.refinement((Y)=>Q.test(Y),{validation:J,code:R.invalid_string,...g.errToObj(X)})}_addCheck(Q){return new F1({...this._def,checks:[...this._def.checks,Q]})}email(Q){return this._addCheck({kind:"email",...g.errToObj(Q)})}url(Q){return this._addCheck({kind:"url",...g.errToObj(Q)})}emoji(Q){return this._addCheck({kind:"emoji",...g.errToObj(Q)})}uuid(Q){return this._addCheck({kind:"uuid",...g.errToObj(Q)})}nanoid(Q){return this._addCheck({kind:"nanoid",...g.errToObj(Q)})}cuid(Q){return this._addCheck({kind:"cuid",...g.errToObj(Q)})}cuid2(Q){return this._addCheck({kind:"cuid2",...g.errToObj(Q)})}ulid(Q){return this._addCheck({kind:"ulid",...g.errToObj(Q)})}base64(Q){return this._addCheck({kind:"base64",...g.errToObj(Q)})}base64url(Q){return this._addCheck({kind:"base64url",...g.errToObj(Q)})}jwt(Q){return this._addCheck({kind:"jwt",...g.errToObj(Q)})}ip(Q){return this._addCheck({kind:"ip",...g.errToObj(Q)})}cidr(Q){return this._addCheck({kind:"cidr",...g.errToObj(Q)})}datetime(Q){var J,X;if(typeof Q==="string")return this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:Q});return this._addCheck({kind:"datetime",precision:typeof(Q===null||Q===void 0?void 0:Q.precision)==="undefined"?null:Q===null||Q===void 0?void 0:Q.precision,offset:(J=Q===null||Q===void 0?void 0:Q.offset)!==null&&J!==void 0?J:!1,local:(X=Q===null||Q===void 0?void 0:Q.local)!==null&&X!==void 0?X:!1,...g.errToObj(Q===null||Q===void 0?void 0:Q.message)})}date(Q){return this._addCheck({kind:"date",message:Q})}time(Q){if(typeof Q==="string")return this._addCheck({kind:"time",precision:null,message:Q});return this._addCheck({kind:"time",precision:typeof(Q===null||Q===void 0?void 0:Q.precision)==="undefined"?null:Q===null||Q===void 0?void 0:Q.precision,...g.errToObj(Q===null||Q===void 0?void 0:Q.message)})}duration(Q){return this._addCheck({kind:"duration",...g.errToObj(Q)})}regex(Q,J){return this._addCheck({kind:"regex",regex:Q,...g.errToObj(J)})}includes(Q,J){return this._addCheck({kind:"includes",value:Q,position:J===null||J===void 0?void 0:J.position,...g.errToObj(J===null||J===void 0?void 0:J.message)})}startsWith(Q,J){return this._addCheck({kind:"startsWith",value:Q,...g.errToObj(J)})}endsWith(Q,J){return this._addCheck({kind:"endsWith",value:Q,...g.errToObj(J)})}min(Q,J){return this._addCheck({kind:"min",value:Q,...g.errToObj(J)})}max(Q,J){return this._addCheck({kind:"max",value:Q,...g.errToObj(J)})}length(Q,J){return this._addCheck({kind:"length",value:Q,...g.errToObj(J)})}nonempty(Q){return this.min(1,g.errToObj(Q))}trim(){return new F1({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new F1({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new F1({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((Q)=>Q.kind==="datetime")}get isDate(){return!!this._def.checks.find((Q)=>Q.kind==="date")}get isTime(){return!!this._def.checks.find((Q)=>Q.kind==="time")}get isDuration(){return!!this._def.checks.find((Q)=>Q.kind==="duration")}get isEmail(){return!!this._def.checks.find((Q)=>Q.kind==="email")}get isURL(){return!!this._def.checks.find((Q)=>Q.kind==="url")}get isEmoji(){return!!this._def.checks.find((Q)=>Q.kind==="emoji")}get isUUID(){return!!this._def.checks.find((Q)=>Q.kind==="uuid")}get isNANOID(){return!!this._def.checks.find((Q)=>Q.kind==="nanoid")}get isCUID(){return!!this._def.checks.find((Q)=>Q.kind==="cuid")}get isCUID2(){return!!this._def.checks.find((Q)=>Q.kind==="cuid2")}get isULID(){return!!this._def.checks.find((Q)=>Q.kind==="ulid")}get isIP(){return!!this._def.checks.find((Q)=>Q.kind==="ip")}get isCIDR(){return!!this._def.checks.find((Q)=>Q.kind==="cidr")}get isBase64(){return!!this._def.checks.find((Q)=>Q.kind==="base64")}get isBase64url(){return!!this._def.checks.find((Q)=>Q.kind==="base64url")}get minLength(){let Q=null;for(let J of this._def.checks)if(J.kind==="min"){if(Q===null||J.value>Q)Q=J.value}return Q}get maxLength(){let Q=null;for(let J of this._def.checks)if(J.kind==="max"){if(Q===null||J.value<Q)Q=J.value}return Q}}F1.create=(Q)=>{var J;return new F1({checks:[],typeName:f.ZodString,coerce:(J=Q===null||Q===void 0?void 0:Q.coerce)!==null&&J!==void 0?J:!1,...c(Q)})};function DE(Q,J){let X=(Q.toString().split(".")[1]||"").length,Y=(J.toString().split(".")[1]||"").length,$=X>Y?X:Y,G=parseInt(Q.toFixed($).replace(".","")),H=parseInt(J.toFixed($).replace(".",""));return G%H/Math.pow(10,$)}class O8 extends d{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(Q){if(this._def.coerce)Q.data=Number(Q.data);if(this._getType(Q)!==h.number){let $=this._getOrReturnCtx(Q);return Z($,{code:R.invalid_type,expected:h.number,received:$.parsedType}),b}let X=void 0,Y=new T0;for(let $ of this._def.checks)if($.kind==="int"){if(!s.isInteger(Q.data))X=this._getOrReturnCtx(Q,X),Z(X,{code:R.invalid_type,expected:"integer",received:"float",message:$.message}),Y.dirty()}else if($.kind==="min"){if($.inclusive?Q.data<$.value:Q.data<=$.value)X=this._getOrReturnCtx(Q,X),Z(X,{code:R.too_small,minimum:$.value,type:"number",inclusive:$.inclusive,exact:!1,message:$.message}),Y.dirty()}else if($.kind==="max"){if($.inclusive?Q.data>$.value:Q.data>=$.value)X=this._getOrReturnCtx(Q,X),Z(X,{code:R.too_big,maximum:$.value,type:"number",inclusive:$.inclusive,exact:!1,message:$.message}),Y.dirty()}else if($.kind==="multipleOf"){if(DE(Q.data,$.value)!==0)X=this._getOrReturnCtx(Q,X),Z(X,{code:R.not_multiple_of,multipleOf:$.value,message:$.message}),Y.dirty()}else if($.kind==="finite"){if(!Number.isFinite(Q.data))X=this._getOrReturnCtx(Q,X),Z(X,{code:R.not_finite,message:$.message}),Y.dirty()}else s.assertNever($);return{status:Y.value,value:Q.data}}gte(Q,J){return this.setLimit("min",Q,!0,g.toString(J))}gt(Q,J){return this.setLimit("min",Q,!1,g.toString(J))}lte(Q,J){return this.setLimit("max",Q,!0,g.toString(J))}lt(Q,J){return this.setLimit("max",Q,!1,g.toString(J))}setLimit(Q,J,X,Y){return new O8({...this._def,checks:[...this._def.checks,{kind:Q,value:J,inclusive:X,message:g.toString(Y)}]})}_addCheck(Q){return new O8({...this._def,checks:[...this._def.checks,Q]})}int(Q){return this._addCheck({kind:"int",message:g.toString(Q)})}positive(Q){return this._addCheck({kind:"min",value:0,inclusive:!1,message:g.toString(Q)})}negative(Q){return this._addCheck({kind:"max",value:0,inclusive:!1,message:g.toString(Q)})}nonpositive(Q){return this._addCheck({kind:"max",value:0,inclusive:!0,message:g.toString(Q)})}nonnegative(Q){return this._addCheck({kind:"min",value:0,inclusive:!0,message:g.toString(Q)})}multipleOf(Q,J){return this._addCheck({kind:"multipleOf",value:Q,message:g.toString(J)})}finite(Q){return this._addCheck({kind:"finite",message:g.toString(Q)})}safe(Q){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:g.toString(Q)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:g.toString(Q)})}get minValue(){let Q=null;for(let J of this._def.checks)if(J.kind==="min"){if(Q===null||J.value>Q)Q=J.value}return Q}get maxValue(){let Q=null;for(let J of this._def.checks)if(J.kind==="max"){if(Q===null||J.value<Q)Q=J.value}return Q}get isInt(){return!!this._def.checks.find((Q)=>Q.kind==="int"||Q.kind==="multipleOf"&&s.isInteger(Q.value))}get isFinite(){let Q=null,J=null;for(let X of this._def.checks)if(X.kind==="finite"||X.kind==="int"||X.kind==="multipleOf")return!0;else if(X.kind==="min"){if(J===null||X.value>J)J=X.value}else if(X.kind==="max"){if(Q===null||X.value<Q)Q=X.value}return Number.isFinite(J)&&Number.isFinite(Q)}}O8.create=(Q)=>{return new O8({checks:[],typeName:f.ZodNumber,coerce:(Q===null||Q===void 0?void 0:Q.coerce)||!1,...c(Q)})};class N8 extends d{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte}_parse(Q){if(this._def.coerce)try{Q.data=BigInt(Q.data)}catch($){return this._getInvalidInput(Q)}if(this._getType(Q)!==h.bigint)return this._getInvalidInput(Q);let X=void 0,Y=new T0;for(let $ of this._def.checks)if($.kind==="min"){if($.inclusive?Q.data<$.value:Q.data<=$.value)X=this._getOrReturnCtx(Q,X),Z(X,{code:R.too_small,type:"bigint",minimum:$.value,inclusive:$.inclusive,message:$.message}),Y.dirty()}else if($.kind==="max"){if($.inclusive?Q.data>$.value:Q.data>=$.value)X=this._getOrReturnCtx(Q,X),Z(X,{code:R.too_big,type:"bigint",maximum:$.value,inclusive:$.inclusive,message:$.message}),Y.dirty()}else if($.kind==="multipleOf"){if(Q.data%$.value!==BigInt(0))X=this._getOrReturnCtx(Q,X),Z(X,{code:R.not_multiple_of,multipleOf:$.value,message:$.message}),Y.dirty()}else s.assertNever($);return{status:Y.value,value:Q.data}}_getInvalidInput(Q){let J=this._getOrReturnCtx(Q);return Z(J,{code:R.invalid_type,expected:h.bigint,received:J.parsedType}),b}gte(Q,J){return this.setLimit("min",Q,!0,g.toString(J))}gt(Q,J){return this.setLimit("min",Q,!1,g.toString(J))}lte(Q,J){return this.setLimit("max",Q,!0,g.toString(J))}lt(Q,J){return this.setLimit("max",Q,!1,g.toString(J))}setLimit(Q,J,X,Y){return new N8({...this._def,checks:[...this._def.checks,{kind:Q,value:J,inclusive:X,message:g.toString(Y)}]})}_addCheck(Q){return new N8({...this._def,checks:[...this._def.checks,Q]})}positive(Q){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:g.toString(Q)})}negative(Q){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:g.toString(Q)})}nonpositive(Q){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:g.toString(Q)})}nonnegative(Q){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:g.toString(Q)})}multipleOf(Q,J){return this._addCheck({kind:"multipleOf",value:Q,message:g.toString(J)})}get minValue(){let Q=null;for(let J of this._def.checks)if(J.kind==="min"){if(Q===null||J.value>Q)Q=J.value}return Q}get maxValue(){let Q=null;for(let J of this._def.checks)if(J.kind==="max"){if(Q===null||J.value<Q)Q=J.value}return Q}}N8.create=(Q)=>{var J;return new N8({checks:[],typeName:f.ZodBigInt,coerce:(J=Q===null||Q===void 0?void 0:Q.coerce)!==null&&J!==void 0?J:!1,...c(Q)})};class dQ extends d{_parse(Q){if(this._def.coerce)Q.data=Boolean(Q.data);if(this._getType(Q)!==h.boolean){let X=this._getOrReturnCtx(Q);return Z(X,{code:R.invalid_type,expected:h.boolean,received:X.parsedType}),b}return y0(Q.data)}}dQ.create=(Q)=>{return new dQ({typeName:f.ZodBoolean,coerce:(Q===null||Q===void 0?void 0:Q.coerce)||!1,...c(Q)})};class XQ extends d{_parse(Q){if(this._def.coerce)Q.data=new Date(Q.data);if(this._getType(Q)!==h.date){let $=this._getOrReturnCtx(Q);return Z($,{code:R.invalid_type,expected:h.date,received:$.parsedType}),b}if(isNaN(Q.data.getTime())){let $=this._getOrReturnCtx(Q);return Z($,{code:R.invalid_date}),b}let X=new T0,Y=void 0;for(let $ of this._def.checks)if($.kind==="min"){if(Q.data.getTime()<$.value)Y=this._getOrReturnCtx(Q,Y),Z(Y,{code:R.too_small,message:$.message,inclusive:!0,exact:!1,minimum:$.value,type:"date"}),X.dirty()}else if($.kind==="max"){if(Q.data.getTime()>$.value)Y=this._getOrReturnCtx(Q,Y),Z(Y,{code:R.too_big,message:$.message,inclusive:!0,exact:!1,maximum:$.value,type:"date"}),X.dirty()}else s.assertNever($);return{status:X.value,value:new Date(Q.data.getTime())}}_addCheck(Q){return new XQ({...this._def,checks:[...this._def.checks,Q]})}min(Q,J){return this._addCheck({kind:"min",value:Q.getTime(),message:g.toString(J)})}max(Q,J){return this._addCheck({kind:"max",value:Q.getTime(),message:g.toString(J)})}get minDate(){let Q=null;for(let J of this._def.checks)if(J.kind==="min"){if(Q===null||J.value>Q)Q=J.value}return Q!=null?new Date(Q):null}get maxDate(){let Q=null;for(let J of this._def.checks)if(J.kind==="max"){if(Q===null||J.value<Q)Q=J.value}return Q!=null?new Date(Q):null}}XQ.create=(Q)=>{return new XQ({checks:[],coerce:(Q===null||Q===void 0?void 0:Q.coerce)||!1,typeName:f.ZodDate,...c(Q)})};class a4 extends d{_parse(Q){if(this._getType(Q)!==h.symbol){let X=this._getOrReturnCtx(Q);return Z(X,{code:R.invalid_type,expected:h.symbol,received:X.parsedType}),b}return y0(Q.data)}}a4.create=(Q)=>{return new a4({typeName:f.ZodSymbol,...c(Q)})};class pQ extends d{_parse(Q){if(this._getType(Q)!==h.undefined){let X=this._getOrReturnCtx(Q);return Z(X,{code:R.invalid_type,expected:h.undefined,received:X.parsedType}),b}return y0(Q.data)}}pQ.create=(Q)=>{return new pQ({typeName:f.ZodUndefined,...c(Q)})};class nQ extends d{_parse(Q){if(this._getType(Q)!==h.null){let X=this._getOrReturnCtx(Q);return Z(X,{code:R.invalid_type,expected:h.null,received:X.parsedType}),b}return y0(Q.data)}}nQ.create=(Q)=>{return new nQ({typeName:f.ZodNull,...c(Q)})};class YQ extends d{constructor(){super(...arguments);this._any=!0}_parse(Q){return y0(Q.data)}}YQ.create=(Q)=>{return new YQ({typeName:f.ZodAny,...c(Q)})};class F8 extends d{constructor(){super(...arguments);this._unknown=!0}_parse(Q){return y0(Q.data)}}F8.create=(Q)=>{return new F8({typeName:f.ZodUnknown,...c(Q)})};class v1 extends d{_parse(Q){let J=this._getOrReturnCtx(Q);return Z(J,{code:R.invalid_type,expected:h.never,received:J.parsedType}),b}}v1.create=(Q)=>{return new v1({typeName:f.ZodNever,...c(Q)})};class s4 extends d{_parse(Q){if(this._getType(Q)!==h.undefined){let X=this._getOrReturnCtx(Q);return Z(X,{code:R.invalid_type,expected:h.void,received:X.parsedType}),b}return y0(Q.data)}}s4.create=(Q)=>{return new s4({typeName:f.ZodVoid,...c(Q)})};class O1 extends d{_parse(Q){let{ctx:J,status:X}=this._processInputParams(Q),Y=this._def;if(J.parsedType!==h.array)return Z(J,{code:R.invalid_type,expected:h.array,received:J.parsedType}),b;if(Y.exactLength!==null){let G=J.data.length>Y.exactLength.value,H=J.data.length<Y.exactLength.value;if(G||H)Z(J,{code:G?R.too_big:R.too_small,minimum:H?Y.exactLength.value:void 0,maximum:G?Y.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:Y.exactLength.message}),X.dirty()}if(Y.minLength!==null){if(J.data.length<Y.minLength.value)Z(J,{code:R.too_small,minimum:Y.minLength.value,type:"array",inclusive:!0,exact:!1,message:Y.minLength.message}),X.dirty()}if(Y.maxLength!==null){if(J.data.length>Y.maxLength.value)Z(J,{code:R.too_big,maximum:Y.maxLength.value,type:"array",inclusive:!0,exact:!1,message:Y.maxLength.message}),X.dirty()}if(J.common.async)return Promise.all([...J.data].map((G,H)=>{return Y.type._parseAsync(new j1(J,G,J.path,H))})).then((G)=>{return T0.mergeArray(X,G)});let $=[...J.data].map((G,H)=>{return Y.type._parseSync(new j1(J,G,J.path,H))});return T0.mergeArray(X,$)}get element(){return this._def.type}min(Q,J){return new O1({...this._def,minLength:{value:Q,message:g.toString(J)}})}max(Q,J){return new O1({...this._def,maxLength:{value:Q,message:g.toString(J)}})}length(Q,J){return new O1({...this._def,exactLength:{value:Q,message:g.toString(J)}})}nonempty(Q){return this.min(1,Q)}}O1.create=(Q,J)=>{return new O1({type:Q,minLength:null,maxLength:null,exactLength:null,typeName:f.ZodArray,...c(J)})};function mQ(Q){if(Q instanceof W0){let J={};for(let X in Q.shape){let Y=Q.shape[X];J[X]=N1.create(mQ(Y))}return new W0({...Q._def,shape:()=>J})}else if(Q instanceof O1)return new O1({...Q._def,type:mQ(Q.element)});else if(Q instanceof N1)return N1.create(mQ(Q.unwrap()));else if(Q instanceof s1)return s1.create(mQ(Q.unwrap()));else if(Q instanceof y1)return y1.create(Q.items.map((J)=>mQ(J)));else return Q}class W0 extends d{constructor(){super(...arguments);this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let Q=this._def.shape(),J=s.objectKeys(Q);return this._cached={shape:Q,keys:J}}_parse(Q){if(this._getType(Q)!==h.object){let K=this._getOrReturnCtx(Q);return Z(K,{code:R.invalid_type,expected:h.object,received:K.parsedType}),b}let{status:X,ctx:Y}=this._processInputParams(Q),{shape:$,keys:G}=this._getCached(),H=[];if(!(this._def.catchall instanceof v1&&this._def.unknownKeys==="strip")){for(let K in Y.data)if(!G.includes(K))H.push(K)}let q=[];for(let K of G){let z=$[K],V=Y.data[K];q.push({key:{status:"valid",value:K},value:z._parse(new j1(Y,V,Y.path,K)),alwaysSet:K in Y.data})}if(this._def.catchall instanceof v1){let K=this._def.unknownKeys;if(K==="passthrough")for(let z of H)q.push({key:{status:"valid",value:z},value:{status:"valid",value:Y.data[z]}});else if(K==="strict"){if(H.length>0)Z(Y,{code:R.unrecognized_keys,keys:H}),X.dirty()}else if(K==="strip");else throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let K=this._def.catchall;for(let z of H){let V=Y.data[z];q.push({key:{status:"valid",value:z},value:K._parse(new j1(Y,V,Y.path,z)),alwaysSet:z in Y.data})}}if(Y.common.async)return Promise.resolve().then(async()=>{let K=[];for(let z of q){let V=await z.key,F=await z.value;K.push({key:V,value:F,alwaysSet:z.alwaysSet})}return K}).then((K)=>{return T0.mergeObjectSync(X,K)});else return T0.mergeObjectSync(X,q)}get shape(){return this._def.shape()}strict(Q){return g.errToObj,new W0({...this._def,unknownKeys:"strict",...Q!==void 0?{errorMap:(J,X)=>{var Y,$,G,H;let q=(G=($=(Y=this._def).errorMap)===null||$===void 0?void 0:$.call(Y,J,X).message)!==null&&G!==void 0?G:X.defaultError;if(J.code==="unrecognized_keys")return{message:(H=g.errToObj(Q).message)!==null&&H!==void 0?H:q};return{message:q}}}:{}})}strip(){return new W0({...this._def,unknownKeys:"strip"})}passthrough(){return new W0({...this._def,unknownKeys:"passthrough"})}extend(Q){return new W0({...this._def,shape:()=>({...this._def.shape(),...Q})})}merge(Q){return new W0({unknownKeys:Q._def.unknownKeys,catchall:Q._def.catchall,shape:()=>({...this._def.shape(),...Q._def.shape()}),typeName:f.ZodObject})}setKey(Q,J){return this.augment({[Q]:J})}catchall(Q){return new W0({...this._def,catchall:Q})}pick(Q){let J={};return s.objectKeys(Q).forEach((X)=>{if(Q[X]&&this.shape[X])J[X]=this.shape[X]}),new W0({...this._def,shape:()=>J})}omit(Q){let J={};return s.objectKeys(this.shape).forEach((X)=>{if(!Q[X])J[X]=this.shape[X]}),new W0({...this._def,shape:()=>J})}deepPartial(){return mQ(this)}partial(Q){let J={};return s.objectKeys(this.shape).forEach((X)=>{let Y=this.shape[X];if(Q&&!Q[X])J[X]=Y;else J[X]=Y.optional()}),new W0({...this._def,shape:()=>J})}required(Q){let J={};return s.objectKeys(this.shape).forEach((X)=>{if(Q&&!Q[X])J[X]=this.shape[X];else{let $=this.shape[X];while($ instanceof N1)$=$._def.innerType;J[X]=$}}),new W0({...this._def,shape:()=>J})}keyof(){return Cz(s.objectKeys(this.shape))}}W0.create=(Q,J)=>{return new W0({shape:()=>Q,unknownKeys:"strip",catchall:v1.create(),typeName:f.ZodObject,...c(J)})};W0.strictCreate=(Q,J)=>{return new W0({shape:()=>Q,unknownKeys:"strict",catchall:v1.create(),typeName:f.ZodObject,...c(J)})};W0.lazycreate=(Q,J)=>{return new W0({shape:Q,unknownKeys:"strip",catchall:v1.create(),typeName:f.ZodObject,...c(J)})};class iQ extends d{_parse(Q){let{ctx:J}=this._processInputParams(Q),X=this._def.options;function Y($){for(let H of $)if(H.result.status==="valid")return H.result;for(let H of $)if(H.result.status==="dirty")return J.common.issues.push(...H.ctx.common.issues),H.result;let G=$.map((H)=>new c0(H.ctx.common.issues));return Z(J,{code:R.invalid_union,unionErrors:G}),b}if(J.common.async)return Promise.all(X.map(async($)=>{let G={...J,common:{...J.common,issues:[]},parent:null};return{result:await $._parseAsync({data:J.data,path:J.path,parent:G}),ctx:G}})).then(Y);else{let $=void 0,G=[];for(let q of X){let K={...J,common:{...J.common,issues:[]},parent:null},z=q._parseSync({data:J.data,path:J.path,parent:K});if(z.status==="valid")return z;else if(z.status==="dirty"&&!$)$={result:z,ctx:K};if(K.common.issues.length)G.push(K.common.issues)}if($)return J.common.issues.push(...$.ctx.common.issues),$.result;let H=G.map((q)=>new c0(q));return Z(J,{code:R.invalid_union,unionErrors:H}),b}}get options(){return this._def.options}}iQ.create=(Q,J)=>{return new iQ({options:Q,typeName:f.ZodUnion,...c(J)})};var r1=(Q)=>{if(Q instanceof rQ)return r1(Q.schema);else if(Q instanceof e0)return r1(Q.innerType());else if(Q instanceof aQ)return[Q.value];else if(Q instanceof j8)return Q.options;else if(Q instanceof sQ)return s.objectValues(Q.enum);else if(Q instanceof tQ)return r1(Q._def.innerType);else if(Q instanceof pQ)return[void 0];else if(Q instanceof nQ)return[null];else if(Q instanceof N1)return[void 0,...r1(Q.unwrap())];else if(Q instanceof s1)return[null,...r1(Q.unwrap())];else if(Q instanceof hJ)return r1(Q.unwrap());else if(Q instanceof Q4)return r1(Q.unwrap());else if(Q instanceof eQ)return r1(Q._def.innerType);else return[]};class xJ extends d{_parse(Q){let{ctx:J}=this._processInputParams(Q);if(J.parsedType!==h.object)return Z(J,{code:R.invalid_type,expected:h.object,received:J.parsedType}),b;let X=this.discriminator,Y=J.data[X],$=this.optionsMap.get(Y);if(!$)return Z(J,{code:R.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[X]}),b;if(J.common.async)return $._parseAsync({data:J.data,path:J.path,parent:J});else return $._parseSync({data:J.data,path:J.path,parent:J})}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(Q,J,X){let Y=new Map;for(let $ of J){let G=r1($.shape[Q]);if(!G.length)throw new Error(`A discriminator value for key \`${Q}\` could not be extracted from all schema options`);for(let H of G){if(Y.has(H))throw new Error(`Discriminator property ${String(Q)} has duplicate value ${String(H)}`);Y.set(H,$)}}return new xJ({typeName:f.ZodDiscriminatedUnion,discriminator:Q,options:J,optionsMap:Y,...c(X)})}}function R6(Q,J){let X=a1(Q),Y=a1(J);if(Q===J)return{valid:!0,data:Q};else if(X===h.object&&Y===h.object){let $=s.objectKeys(J),G=s.objectKeys(Q).filter((q)=>$.indexOf(q)!==-1),H={...Q,...J};for(let q of G){let K=R6(Q[q],J[q]);if(!K.valid)return{valid:!1};H[q]=K.data}return{valid:!0,data:H}}else if(X===h.array&&Y===h.array){if(Q.length!==J.length)return{valid:!1};let $=[];for(let G=0;G<Q.length;G++){let H=Q[G],q=J[G],K=R6(H,q);if(!K.valid)return{valid:!1};$.push(K.data)}return{valid:!0,data:$}}else if(X===h.date&&Y===h.date&&+Q===+J)return{valid:!0,data:Q};else return{valid:!1}}class oQ extends d{_parse(Q){let{status:J,ctx:X}=this._processInputParams(Q),Y=($,G)=>{if(w6($)||w6(G))return b;let H=R6($.value,G.value);if(!H.valid)return Z(X,{code:R.invalid_intersection_types}),b;if(E6($)||E6(G))J.dirty();return{status:J.value,value:H.data}};if(X.common.async)return Promise.all([this._def.left._parseAsync({data:X.data,path:X.path,parent:X}),this._def.right._parseAsync({data:X.data,path:X.path,parent:X})]).then(([$,G])=>Y($,G));else return Y(this._def.left._parseSync({data:X.data,path:X.path,parent:X}),this._def.right._parseSync({data:X.data,path:X.path,parent:X}))}}oQ.create=(Q,J,X)=>{return new oQ({left:Q,right:J,typeName:f.ZodIntersection,...c(X)})};class y1 extends d{_parse(Q){let{status:J,ctx:X}=this._processInputParams(Q);if(X.parsedType!==h.array)return Z(X,{code:R.invalid_type,expected:h.array,received:X.parsedType}),b;if(X.data.length<this._def.items.length)return Z(X,{code:R.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),b;if(!this._def.rest&&X.data.length>this._def.items.length)Z(X,{code:R.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),J.dirty();let $=[...X.data].map((G,H)=>{let q=this._def.items[H]||this._def.rest;if(!q)return null;return q._parse(new j1(X,G,X.path,H))}).filter((G)=>!!G);if(X.common.async)return Promise.all($).then((G)=>{return T0.mergeArray(J,G)});else return T0.mergeArray(J,$)}get items(){return this._def.items}rest(Q){return new y1({...this._def,rest:Q})}}y1.create=(Q,J)=>{if(!Array.isArray(Q))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new y1({items:Q,typeName:f.ZodTuple,rest:null,...c(J)})};class t4 extends d{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(Q){let{status:J,ctx:X}=this._processInputParams(Q);if(X.parsedType!==h.object)return Z(X,{code:R.invalid_type,expected:h.object,received:X.parsedType}),b;let Y=[],$=this._def.keyType,G=this._def.valueType;for(let H in X.data)Y.push({key:$._parse(new j1(X,H,X.path,H)),value:G._parse(new j1(X,X.data[H],X.path,H)),alwaysSet:H in X.data});if(X.common.async)return T0.mergeObjectAsync(J,Y);else return T0.mergeObjectSync(J,Y)}get element(){return this._def.valueType}static create(Q,J,X){if(J instanceof d)return new t4({keyType:Q,valueType:J,typeName:f.ZodRecord,...c(X)});return new t4({keyType:F1.create(),valueType:Q,typeName:f.ZodRecord,...c(J)})}}class e4 extends d{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(Q){let{status:J,ctx:X}=this._processInputParams(Q);if(X.parsedType!==h.map)return Z(X,{code:R.invalid_type,expected:h.map,received:X.parsedType}),b;let Y=this._def.keyType,$=this._def.valueType,G=[...X.data.entries()].map(([H,q],K)=>{return{key:Y._parse(new j1(X,H,X.path,[K,"key"])),value:$._parse(new j1(X,q,X.path,[K,"value"]))}});if(X.common.async){let H=new Map;return Promise.resolve().then(async()=>{for(let q of G){let K=await q.key,z=await q.value;if(K.status==="aborted"||z.status==="aborted")return b;if(K.status==="dirty"||z.status==="dirty")J.dirty();H.set(K.value,z.value)}return{status:J.value,value:H}})}else{let H=new Map;for(let q of G){let{key:K,value:z}=q;if(K.status==="aborted"||z.status==="aborted")return b;if(K.status==="dirty"||z.status==="dirty")J.dirty();H.set(K.value,z.value)}return{status:J.value,value:H}}}}e4.create=(Q,J,X)=>{return new e4({valueType:J,keyType:Q,typeName:f.ZodMap,...c(X)})};class $Q extends d{_parse(Q){let{status:J,ctx:X}=this._processInputParams(Q);if(X.parsedType!==h.set)return Z(X,{code:R.invalid_type,expected:h.set,received:X.parsedType}),b;let Y=this._def;if(Y.minSize!==null){if(X.data.size<Y.minSize.value)Z(X,{code:R.too_small,minimum:Y.minSize.value,type:"set",inclusive:!0,exact:!1,message:Y.minSize.message}),J.dirty()}if(Y.maxSize!==null){if(X.data.size>Y.maxSize.value)Z(X,{code:R.too_big,maximum:Y.maxSize.value,type:"set",inclusive:!0,exact:!1,message:Y.maxSize.message}),J.dirty()}let $=this._def.valueType;function G(q){let K=new Set;for(let z of q){if(z.status==="aborted")return b;if(z.status==="dirty")J.dirty();K.add(z.value)}return{status:J.value,value:K}}let H=[...X.data.values()].map((q,K)=>$._parse(new j1(X,q,X.path,K)));if(X.common.async)return Promise.all(H).then((q)=>G(q));else return G(H)}min(Q,J){return new $Q({...this._def,minSize:{value:Q,message:g.toString(J)}})}max(Q,J){return new $Q({...this._def,maxSize:{value:Q,message:g.toString(J)}})}size(Q,J){return this.min(Q,J).max(Q,J)}nonempty(Q){return this.min(1,Q)}}$Q.create=(Q,J)=>{return new $Q({valueType:Q,minSize:null,maxSize:null,typeName:f.ZodSet,...c(J)})};class lQ extends d{constructor(){super(...arguments);this.validate=this.implement}_parse(Q){let{ctx:J}=this._processInputParams(Q);if(J.parsedType!==h.function)return Z(J,{code:R.invalid_type,expected:h.function,received:J.parsedType}),b;function X(H,q){return SJ({data:H,path:J.path,errorMaps:[J.common.contextualErrorMap,J.schemaErrorMap,ZJ(),cQ].filter((K)=>!!K),issueData:{code:R.invalid_arguments,argumentsError:q}})}function Y(H,q){return SJ({data:H,path:J.path,errorMaps:[J.common.contextualErrorMap,J.schemaErrorMap,ZJ(),cQ].filter((K)=>!!K),issueData:{code:R.invalid_return_type,returnTypeError:q}})}let $={errorMap:J.common.contextualErrorMap},G=J.data;if(this._def.returns instanceof GQ){let H=this;return y0(async function(...q){let K=new c0([]),z=await H._def.args.parseAsync(q,$).catch((O)=>{throw K.addIssue(X(q,O)),K}),V=await Reflect.apply(G,this,z);return await H._def.returns._def.type.parseAsync(V,$).catch((O)=>{throw K.addIssue(Y(V,O)),K})})}else{let H=this;return y0(function(...q){let K=H._def.args.safeParse(q,$);if(!K.success)throw new c0([X(q,K.error)]);let z=Reflect.apply(G,this,K.data),V=H._def.returns.safeParse(z,$);if(!V.success)throw new c0([Y(z,V.error)]);return V.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...Q){return new lQ({...this._def,args:y1.create(Q).rest(F8.create())})}returns(Q){return new lQ({...this._def,returns:Q})}implement(Q){return this.parse(Q)}strictImplement(Q){return this.parse(Q)}static create(Q,J,X){return new lQ({args:Q?Q:y1.create([]).rest(F8.create()),returns:J||F8.create(),typeName:f.ZodFunction,...c(X)})}}class rQ extends d{get schema(){return this._def.getter()}_parse(Q){let{ctx:J}=this._processInputParams(Q);return this._def.getter()._parse({data:J.data,path:J.path,parent:J})}}rQ.create=(Q,J)=>{return new rQ({getter:Q,typeName:f.ZodLazy,...c(J)})};class aQ extends d{_parse(Q){if(Q.data!==this._def.value){let J=this._getOrReturnCtx(Q);return Z(J,{received:J.data,code:R.invalid_literal,expected:this._def.value}),b}return{status:"valid",value:Q.data}}get value(){return this._def.value}}aQ.create=(Q,J)=>{return new aQ({value:Q,typeName:f.ZodLiteral,...c(J)})};function Cz(Q,J){return new j8({values:Q,typeName:f.ZodEnum,...c(J)})}class j8 extends d{constructor(){super(...arguments);i4.set(this,void 0)}_parse(Q){if(typeof Q.data!=="string"){let J=this._getOrReturnCtx(Q),X=this._def.values;return Z(J,{expected:s.joinValues(X),received:J.parsedType,code:R.invalid_type}),b}if(!_J(this,i4,"f"))Bz(this,i4,new Set(this._def.values),"f");if(!_J(this,i4,"f").has(Q.data)){let J=this._getOrReturnCtx(Q),X=this._def.values;return Z(J,{received:J.data,code:R.invalid_enum_value,options:X}),b}return y0(Q.data)}get options(){return this._def.values}get enum(){let Q={};for(let J of this._def.values)Q[J]=J;return Q}get Values(){let Q={};for(let J of this._def.values)Q[J]=J;return Q}get Enum(){let Q={};for(let J of this._def.values)Q[J]=J;return Q}extract(Q,J=this._def){return j8.create(Q,{...this._def,...J})}exclude(Q,J=this._def){return j8.create(this.options.filter((X)=>!Q.includes(X)),{...this._def,...J})}}i4=new WeakMap;j8.create=Cz;class sQ extends d{constructor(){super(...arguments);o4.set(this,void 0)}_parse(Q){let J=s.getValidEnumValues(this._def.values),X=this._getOrReturnCtx(Q);if(X.parsedType!==h.string&&X.parsedType!==h.number){let Y=s.objectValues(J);return Z(X,{expected:s.joinValues(Y),received:X.parsedType,code:R.invalid_type}),b}if(!_J(this,o4,"f"))Bz(this,o4,new Set(s.getValidEnumValues(this._def.values)),"f");if(!_J(this,o4,"f").has(Q.data)){let Y=s.objectValues(J);return Z(X,{received:X.data,code:R.invalid_enum_value,options:Y}),b}return y0(Q.data)}get enum(){return this._def.values}}o4=new WeakMap;sQ.create=(Q,J)=>{return new sQ({values:Q,typeName:f.ZodNativeEnum,...c(J)})};class GQ extends d{unwrap(){return this._def.type}_parse(Q){let{ctx:J}=this._processInputParams(Q);if(J.parsedType!==h.promise&&J.common.async===!1)return Z(J,{code:R.invalid_type,expected:h.promise,received:J.parsedType}),b;let X=J.parsedType===h.promise?J.data:Promise.resolve(J.data);return y0(X.then((Y)=>{return this._def.type.parseAsync(Y,{path:J.path,errorMap:J.common.contextualErrorMap})}))}}GQ.create=(Q,J)=>{return new GQ({type:Q,typeName:f.ZodPromise,...c(J)})};class e0 extends d{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===f.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(Q){let{status:J,ctx:X}=this._processInputParams(Q),Y=this._def.effect||null,$={addIssue:(G)=>{if(Z(X,G),G.fatal)J.abort();else J.dirty()},get path(){return X.path}};if($.addIssue=$.addIssue.bind($),Y.type==="preprocess"){let G=Y.transform(X.data,$);if(X.common.async)return Promise.resolve(G).then(async(H)=>{if(J.value==="aborted")return b;let q=await this._def.schema._parseAsync({data:H,path:X.path,parent:X});if(q.status==="aborted")return b;if(q.status==="dirty")return uQ(q.value);if(J.value==="dirty")return uQ(q.value);return q});else{if(J.value==="aborted")return b;let H=this._def.schema._parseSync({data:G,path:X.path,parent:X});if(H.status==="aborted")return b;if(H.status==="dirty")return uQ(H.value);if(J.value==="dirty")return uQ(H.value);return H}}if(Y.type==="refinement"){let G=(H)=>{let q=Y.refinement(H,$);if(X.common.async)return Promise.resolve(q);if(q instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return H};if(X.common.async===!1){let H=this._def.schema._parseSync({data:X.data,path:X.path,parent:X});if(H.status==="aborted")return b;if(H.status==="dirty")J.dirty();return G(H.value),{status:J.value,value:H.value}}else return this._def.schema._parseAsync({data:X.data,path:X.path,parent:X}).then((H)=>{if(H.status==="aborted")return b;if(H.status==="dirty")J.dirty();return G(H.value).then(()=>{return{status:J.value,value:H.value}})})}if(Y.type==="transform")if(X.common.async===!1){let G=this._def.schema._parseSync({data:X.data,path:X.path,parent:X});if(!JQ(G))return G;let H=Y.transform(G.value,$);if(H instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:J.value,value:H}}else return this._def.schema._parseAsync({data:X.data,path:X.path,parent:X}).then((G)=>{if(!JQ(G))return G;return Promise.resolve(Y.transform(G.value,$)).then((H)=>({status:J.value,value:H}))});s.assertNever(Y)}}e0.create=(Q,J,X)=>{return new e0({schema:Q,typeName:f.ZodEffects,effect:J,...c(X)})};e0.createWithPreprocess=(Q,J,X)=>{return new e0({schema:J,effect:{type:"preprocess",transform:Q},typeName:f.ZodEffects,...c(X)})};class N1 extends d{_parse(Q){if(this._getType(Q)===h.undefined)return y0(void 0);return this._def.innerType._parse(Q)}unwrap(){return this._def.innerType}}N1.create=(Q,J)=>{return new N1({innerType:Q,typeName:f.ZodOptional,...c(J)})};class s1 extends d{_parse(Q){if(this._getType(Q)===h.null)return y0(null);return this._def.innerType._parse(Q)}unwrap(){return this._def.innerType}}s1.create=(Q,J)=>{return new s1({innerType:Q,typeName:f.ZodNullable,...c(J)})};class tQ extends d{_parse(Q){let{ctx:J}=this._processInputParams(Q),X=J.data;if(J.parsedType===h.undefined)X=this._def.defaultValue();return this._def.innerType._parse({data:X,path:J.path,parent:J})}removeDefault(){return this._def.innerType}}tQ.create=(Q,J)=>{return new tQ({innerType:Q,typeName:f.ZodDefault,defaultValue:typeof J.default==="function"?J.default:()=>J.default,...c(J)})};class eQ extends d{_parse(Q){let{ctx:J}=this._processInputParams(Q),X={...J,common:{...J.common,issues:[]}},Y=this._def.innerType._parse({data:X.data,path:X.path,parent:{...X}});if(r4(Y))return Y.then(($)=>{return{status:"valid",value:$.status==="valid"?$.value:this._def.catchValue({get error(){return new c0(X.common.issues)},input:X.data})}});else return{status:"valid",value:Y.status==="valid"?Y.value:this._def.catchValue({get error(){return new c0(X.common.issues)},input:X.data})}}removeCatch(){return this._def.innerType}}eQ.create=(Q,J)=>{return new eQ({innerType:Q,typeName:f.ZodCatch,catchValue:typeof J.catch==="function"?J.catch:()=>J.catch,...c(J)})};class Q9 extends d{_parse(Q){if(this._getType(Q)!==h.nan){let X=this._getOrReturnCtx(Q);return Z(X,{code:R.invalid_type,expected:h.nan,received:X.parsedType}),b}return{status:"valid",value:Q.data}}}Q9.create=(Q)=>{return new Q9({typeName:f.ZodNaN,...c(Q)})};var LE=Symbol("zod_brand");class hJ extends d{_parse(Q){let{ctx:J}=this._processInputParams(Q),X=J.data;return this._def.type._parse({data:X,path:J.path,parent:J})}unwrap(){return this._def.type}}class J9 extends d{_parse(Q){let{status:J,ctx:X}=this._processInputParams(Q);if(X.common.async)return(async()=>{let $=await this._def.in._parseAsync({data:X.data,path:X.path,parent:X});if($.status==="aborted")return b;if($.status==="dirty")return J.dirty(),uQ($.value);else return this._def.out._parseAsync({data:$.value,path:X.path,parent:X})})();else{let Y=this._def.in._parseSync({data:X.data,path:X.path,parent:X});if(Y.status==="aborted")return b;if(Y.status==="dirty")return J.dirty(),{status:"dirty",value:Y.value};else return this._def.out._parseSync({data:Y.value,path:X.path,parent:X})}}static create(Q,J){return new J9({in:Q,out:J,typeName:f.ZodPipeline})}}class Q4 extends d{_parse(Q){let J=this._def.innerType._parse(Q),X=(Y)=>{if(JQ(Y))Y.value=Object.freeze(Y.value);return Y};return r4(J)?J.then((Y)=>X(Y)):X(J)}unwrap(){return this._def.innerType}}Q4.create=(Q,J)=>{return new Q4({innerType:Q,typeName:f.ZodReadonly,...c(J)})};function Oz(Q,J){let X=typeof Q==="function"?Q(J):typeof Q==="string"?{message:Q}:Q;return typeof X==="string"?{message:X}:X}function Pz(Q,J={},X){if(Q)return YQ.create().superRefine((Y,$)=>{var G,H;let q=Q(Y);if(q instanceof Promise)return q.then((K)=>{var z,V;if(!K){let F=Oz(J,Y),O=(V=(z=F.fatal)!==null&&z!==void 0?z:X)!==null&&V!==void 0?V:!0;$.addIssue({code:"custom",...F,fatal:O})}});if(!q){let K=Oz(J,Y),z=(H=(G=K.fatal)!==null&&G!==void 0?G:X)!==null&&H!==void 0?H:!0;$.addIssue({code:"custom",...K,fatal:z})}return});return YQ.create()}var CE={object:W0.lazycreate},f;(function(Q){Q.ZodString="ZodString",Q.ZodNumber="ZodNumber",Q.ZodNaN="ZodNaN",Q.ZodBigInt="ZodBigInt",Q.ZodBoolean="ZodBoolean",Q.ZodDate="ZodDate",Q.ZodSymbol="ZodSymbol",Q.ZodUndefined="ZodUndefined",Q.ZodNull="ZodNull",Q.ZodAny="ZodAny",Q.ZodUnknown="ZodUnknown",Q.ZodNever="ZodNever",Q.ZodVoid="ZodVoid",Q.ZodArray="ZodArray",Q.ZodObject="ZodObject",Q.ZodUnion="ZodUnion",Q.ZodDiscriminatedUnion="ZodDiscriminatedUnion",Q.ZodIntersection="ZodIntersection",Q.ZodTuple="ZodTuple",Q.ZodRecord="ZodRecord",Q.ZodMap="ZodMap",Q.ZodSet="ZodSet",Q.ZodFunction="ZodFunction",Q.ZodLazy="ZodLazy",Q.ZodLiteral="ZodLiteral",Q.ZodEnum="ZodEnum",Q.ZodEffects="ZodEffects",Q.ZodNativeEnum="ZodNativeEnum",Q.ZodOptional="ZodOptional",Q.ZodNullable="ZodNullable",Q.ZodDefault="ZodDefault",Q.ZodCatch="ZodCatch",Q.ZodPromise="ZodPromise",Q.ZodBranded="ZodBranded",Q.ZodPipeline="ZodPipeline",Q.ZodReadonly="ZodReadonly"})(f||(f={}));var PE=(Q,J={message:`Input not instance of ${Q.name}`})=>Pz((X)=>X instanceof Q,J),wz=F1.create,Ez=O8.create,wE=Q9.create,EE=N8.create,Rz=dQ.create,RE=XQ.create,TE=a4.create,IE=pQ.create,ZE=nQ.create,SE=YQ.create,_E=F8.create,xE=v1.create,hE=s4.create,vE=O1.create,yE=W0.create,gE=W0.strictCreate,fE=iQ.create,kE=xJ.create,bE=oQ.create,mE=y1.create,uE=t4.create,lE=e4.create,cE=$Q.create,dE=lQ.create,pE=rQ.create,nE=aQ.create,iE=j8.create,oE=sQ.create,rE=GQ.create,Nz=e0.create,aE=N1.create,sE=s1.create,tE=e0.createWithPreprocess,eE=J9.create,QR=()=>wz().optional(),JR=()=>Ez().optional(),XR=()=>Rz().optional(),YR={string:(Q)=>F1.create({...Q,coerce:!0}),number:(Q)=>O8.create({...Q,coerce:!0}),boolean:(Q)=>dQ.create({...Q,coerce:!0}),bigint:(Q)=>N8.create({...Q,coerce:!0}),date:(Q)=>XQ.create({...Q,coerce:!0})},$R=b,X9=Object.freeze({__proto__:null,defaultErrorMap:cQ,setErrorMap:tw,getErrorMap:ZJ,makeIssue:SJ,EMPTY_PATH:ew,addIssueToContext:Z,ParseStatus:T0,INVALID:b,DIRTY:uQ,OK:y0,isAborted:w6,isDirty:E6,isValid:JQ,isAsync:r4,get util(){return s},get objectUtil(){return P6},ZodParsedType:h,getParsedType:a1,ZodType:d,datetimeRegex:Lz,ZodString:F1,ZodNumber:O8,ZodBigInt:N8,ZodBoolean:dQ,ZodDate:XQ,ZodSymbol:a4,ZodUndefined:pQ,ZodNull:nQ,ZodAny:YQ,ZodUnknown:F8,ZodNever:v1,ZodVoid:s4,ZodArray:O1,ZodObject:W0,ZodUnion:iQ,ZodDiscriminatedUnion:xJ,ZodIntersection:oQ,ZodTuple:y1,ZodRecord:t4,ZodMap:e4,ZodSet:$Q,ZodFunction:lQ,ZodLazy:rQ,ZodLiteral:aQ,ZodEnum:j8,ZodNativeEnum:sQ,ZodPromise:GQ,ZodEffects:e0,ZodTransformer:e0,ZodOptional:N1,ZodNullable:s1,ZodDefault:tQ,ZodCatch:eQ,ZodNaN:Q9,BRAND:LE,ZodBranded:hJ,ZodPipeline:J9,ZodReadonly:Q4,custom:Pz,Schema:d,ZodSchema:d,late:CE,get ZodFirstPartyTypeKind(){return f},coerce:YR,any:SE,array:vE,bigint:EE,boolean:Rz,date:RE,discriminatedUnion:kE,effect:Nz,enum:iE,function:dE,instanceof:PE,intersection:bE,lazy:pE,literal:nE,map:lE,nan:wE,nativeEnum:oE,never:xE,null:ZE,nullable:sE,number:Ez,object:yE,oboolean:XR,onumber:JR,optional:aE,ostring:QR,pipeline:eE,preprocess:tE,promise:rE,record:uE,set:cE,strictObject:gE,string:wz,symbol:TE,transformer:Nz,tuple:mE,undefined:IE,union:fE,unknown:_E,void:hE,NEVER:$R,ZodIssueCode:R,quotelessJson:sw,ZodError:c0});var vJ=Uz({server:{NODE_ENV:X9.enum(["development","production","test"]).default("development"),MQTT_URL:X9.string().default("http://localhost:1883"),MQTT_USER:X9.string().default("telegraf"),MQTT_PASS:X9.string().default("telegraf")},runtimeEnv:process.env,emptyStringAsUndefined:!0});var yJ=Tz.default.connect(vJ.MQTT_URL,{username:vJ.MQTT_USER,password:vJ.MQTT_PASS}),GR=["home/ThermoBeacon/Plant"];yJ.on("connect",()=>{console.log("connected to mqtt broker");for(let Q of GR)yJ.subscribe(Q,(J)=>{if(!J)console.log(`subscribed to ${Q}`)})});yJ.on("message",(Q,J,X)=>{console.log(`message in ${Q}: ${J.toString()}`)});var T6=async()=>{await yJ.endAsync(),console.log("closed connections"),process.exit()};process.on("beforeExit",T6);process.on("SIGTERM",T6);process.on("SIGINT",T6);
